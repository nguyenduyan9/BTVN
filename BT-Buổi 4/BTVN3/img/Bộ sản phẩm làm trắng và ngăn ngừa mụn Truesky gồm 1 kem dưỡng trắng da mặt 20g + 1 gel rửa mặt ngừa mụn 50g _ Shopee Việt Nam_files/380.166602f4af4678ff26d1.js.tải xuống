(self.wpJsonpPcmallRating=self.wpJsonpPcmallRating||[]).push([[380],{8120:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.withAsync=void 0;var i=a(5410),o=a(3804),n=a(579);t.withAsync=function(e){return function(t){var a=(0,n.useAxonAsync)(),r=a.setTimeout,s=a.setInterval,d=a.Defer,_=a.addEventListener,c=a.requestAnimationFrame,l=a.runAsyncIterator,p=a.mounted;return(0,o.createElement)(e,i.__assign({runAsyncIterator:l,mounted:p,setTimeout:r,setInterval:s,Defer:d,addEventListener:_,requestAnimationFrame:c},t))}}},9667:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createAxonContextWrap=void 0;var i=a(5410);t.createAxonContextWrap=function(e){function t(){return{taskSet:e,allTasksRemain:[],uuid:0,disableFallback:!1}}void 0===e&&(e={});var a=t();return{contextValue:{collectPrepare:function(e,t){var i=a.taskSet,o=a.allTasksRemain;if(void 0===i[t=t||""+a.uuid++]){var n=e();return i[t]=[n],o.push([n,t]),null}var r,s=i[t];return(r=s)&&2===r.length?s[1]:null}},hasMorePromises:function(){return a.uuid=0,a.allTasksRemain.length>0},reset:function(){Object.assign(a,t())},wait:function(){return i.__awaiter(this,void 0,void 0,(function(){var e,t,o,n;return i.__generator(this,(function(i){switch(i.label){case 0:return e=a.taskSet,t=a.allTasksRemain,o=a.disableFallback,n=t.map((function(t){var a=t[0],i=t[1];return a.then((function(t){e[i][1]={uid:i,data:t,pending:!1,err:null,staled:!1,_t:Date.now()}}),(function(t){if(o)throw e[i][1]={uid:i,err:t,data:null,pending:!1,staled:!1,_t:Date.now()},t;e[i][1]={uid:i,err:null,data:void 0,pending:!0,staled:!1,_t:Date.now()}}))})),a.uuid=0,t.length=0,[4,Promise.all(n)];case 1:return i.sent(),[2]}}))}))},getTaskResult:function(){var e=a.taskSet;return e?Object.keys(e).reduce((function(t,a){return t[a]=e[a][1],t}),{}):{}},disableFallbackTask:function(){a.disableFallback=!0}}}},3744:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AxonQuery=void 0;var i=a(5410),o=a(9850);t.AxonQuery=function(e){var t=e.children,a=i.__rest(e,["children"]);return t((0,o.useAxonQuery)((function(){return a}),[e.keyMaker]))}},2517:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AxonSetTimeout=void 0;var i=a(5410),o=a(1416);t.AxonSetTimeout=function(e){var t=e.time,a=e.children,n=i.__rest(e,["time","children"]);return a((0,o.useAxonTimeout)((function(){return i.__assign({timeInMs:null!=t?t:0},n)})))}},7795:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AxonTask=void 0;var i=a(8326);t.AxonTask=function(e){var t,a=e.ssr,o=void 0!==a&&a,n=e.task,r=e.children,s=e.keyMaker,d=(0,i.useAxonTask)((function(){return{task:n,children:r,ssr:o,keyMaker:s}}),[s]),_=d.data,c=d.staled,l=d.err,p=d.pending,u=d.uid,m=d._t;return null!==(t=r({data:_,err:l,staled:c,pending:p,uid:u,_t:m}))&&void 0!==t?t:null}},9631:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.usePartialAxonService=t.AxonTaskProvider=void 0;var i=a(5410),o=i.__importStar(a(3804)),n=a(1094),r=a(1016);t.AxonTaskProvider=function(e){var t=(0,o.useContext)(n.CollectedSSRTaskResultContext),a=e.children,s=e.service,d=void 0===s?{}:s,_=e.taskResult||t||{},c=(0,o.useState)((function(){var e=i.__assign({},d);return{value:e,add:function(t){var a=Object.keys(t);return a.forEach((function(a){e[a],e[a]=t[a]})),function(){a.forEach((function(t){delete e[t]}))}}}}))[0],l=(0,o.useState)((function(){var e=new r.TaskMngImpl({defaultTaskResult:_});return{service:c.value,addServices:c.add,taskMng:e}}))[0];return(0,o.useEffect)((function(){window.axon_task_mng=l.taskMng})),o.default.createElement(n.AxonTaskContext.Provider,{value:l},a)},t.usePartialAxonService=function(e){var t=(0,o.useContext)(n.AxonTaskContext),a=(0,o.useMemo)((function(){return t.addServices(e)}),[]);(0,o.useEffect)((function(){return function(){a()}}),[])}},1094:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getCurrentRenderContext=t.setCurrentRenderContext=t.CollectedSSRTaskResultContext=t.AxonTaskContext=void 0;var i,o=a(3804);t.AxonTaskContext=(0,o.createContext)(null),t.CollectedSSRTaskResultContext=(0,o.createContext)(null),t.setCurrentRenderContext=function(e){i=e},t.getCurrentRenderContext=function(){return i}},1895:(e,t)=>{"use strict";var a;Object.defineProperty(t,"__esModule",{value:!0}),t.noop=t.RESOLVED_PROMISE=t.TASK_TIMEOUT_EXCEPTION=t.IS_RUNNING_IN_BROWSER=t.IS_RUNNING_IN_SERVER=t.AsyncTypeEnum=t.CLEAR_MAP=t.INTERVAL_NAME=t.TIMER_NAME=t.RAF_NAME=void 0,t.RAF_NAME="requestAnimationFrame",t.TIMER_NAME="setTimeout",t.INTERVAL_NAME="setInterval",t.CLEAR_MAP={0:"clearTimeout",1:"clearInterval",2:"cancelAnimationFrame"},(a=t.AsyncTypeEnum||(t.AsyncTypeEnum={}))[a.setTimeout=0]="setTimeout",a[a.setInterval=1]="setInterval",a[a.requestAnimationFrame=2]="requestAnimationFrame",a[a.defer=3]="defer",t.IS_RUNNING_IN_SERVER="undefined"==typeof window&&"undefined"==typeof document,t.IS_RUNNING_IN_BROWSER=!t.IS_RUNNING_IN_SERVER,t.TASK_TIMEOUT_EXCEPTION=new Error("TaskTimeout"),t.RESOLVED_PROMISE=Promise.resolve(),t.noop=function(){}},579:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.useAxonAsync=void 0;var i=a(5410),o=a(3804),n=a(895),r=a(1895),s=a(3673);t.useAxonAsync=function(){var e=(0,o.useRef)(0),t=(0,o.useRef)({_unlisteners:{},_pendingDefer:{},_pendingAsyncTaskSet:{},_cancellationCollection:{},_mounted:!1,_createInvoke:function(e,t,a){var i=this,o=window[r.CLEAR_MAP[e]];return function(){delete i._pendingAsyncTaskSet[a],o(t)}},_createAsyncFunc:function(e){var t=this;return function(a,i){void 0===i&&(i=0);var o="",n=window[e]((function(){for(var i=[],n=0;n<arguments.length;n++)i[n]=arguments[n];if(t._mounted)try{a.apply(void 0,i)}finally{e!==r.RAF_NAME&&e!==r.TIMER_NAME||delete t._pendingAsyncTaskSet[o]}}),r.RAF_NAME===e?void 0:i);return o="".concat(n,"_").concat(r.AsyncTypeEnum[e]),t._pendingAsyncTaskSet[o]=[n,e===r.TIMER_NAME?r.AsyncTypeEnum.setTimeout:e===r.INTERVAL_NAME?r.AsyncTypeEnum.setInterval:r.AsyncTypeEnum.requestAnimationFrame],{cancel:t._createInvoke(r.AsyncTypeEnum[e],n,o),id:n}}},_clearPendingAsyncCallback:function(){var e=this;Object.keys(this._pendingAsyncTaskSet).forEach((function(t){var a=e._pendingAsyncTaskSet[t],i=a[0],o=a[1];window[r.CLEAR_MAP[o]](i)})),this._pendingAsyncTaskSet={},Object.keys(this._pendingDefer).forEach((function(t){e._pendingDefer[t].cancel()})),this._pendingDefer={},Object.keys(this._unlisteners).forEach((function(t){e._unlisteners[t]()})),this._unlisteners={},Object.keys(this._cancellationCollection).forEach((function(t){e._cancellationCollection[t]&&e._cancellationCollection[t]()})),this._cancellationCollection={}}}).current;return(0,o.useEffect)((function(){return t._mounted=!0,function(){t._mounted=!1}}),[]),(0,o.useState)((function(){return{get mounted(){return t._mounted},addEventListener:function(a,i,o,n){var r=e.current++;a.addEventListener(i,o,n);var s=function(){a.removeEventListener(i,o,n),delete t._unlisteners[r]};return t._unlisteners[r]=s,s},runAsyncIterator:function(a,i){var o=i||e.current++;return{subscribe:function(e){var i,r=(i=e,{next:function(e){this.value=e,i.next(e)},error:function(e){i.error(e),this.isStopped=!0},complete:function(){i.complete(),this.isStopped=!0},isStopped:!1,value:void 0});return(0,n.asStream)(a)(r),void 0!==r.value&&r.next(r.value),t._cancellationCollection[o]=function(){r.isStopped=!0},function(){t._cancellationCollection[o]&&t._cancellationCollection[o](),delete t._cancellationCollection[o]}}}},setTimeout:t._createAsyncFunc(r.TIMER_NAME).bind(t),setInterval:t._createAsyncFunc(r.INTERVAL_NAME).bind(t),requestAnimationFrame:t._createAsyncFunc(r.RAF_NAME).bind(t),clearPendingAsyncCallback:t._clearPendingAsyncCallback.bind(t),Defer:function(a){function o(){for(var i=[],o=0;o<arguments.length;o++)i[o]=arguments[o];var n=a.apply(this,i)||this,r=e.current++;return t._pendingDefer[r]=n,n.finally((function(){return delete t._pendingDefer[r]})),n}return i.__extends(o,a),o}(s.Defer)}}))[0]}},7290:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.useInfiniteQuery=void 0;var i=a(5410),o=a(3804),n=a(8302),r=a(9850),s=a(1094),d=a(63),_=a(8699),c=Promise.resolve();t.useInfiniteQuery=function(e,t){var a=this,l=(0,o.useContext)(s.AxonTaskContext),p=(0,o.useRef)([]),u=l.taskMng.createCacheHelper,m=e().keyMaker,g="".concat("$inf$").concat("function"==typeof m?m():m),h=u(g),y=h[0],f=h[1],v=h[2],b=(0,o.useCallback)((function(){var e,t;return void 0===(null===(e=y())||void 0===e?void 0:e.l)?1:null===(t=y())||void 0===t?void 0:t.l}),[g]),E=(0,o.useCallback)((function(){var e,t=null===(e=y())||void 0===e?void 0:e.l;return void 0===t?1:t}),[g]);(0,n.useSyncExternalStore)((0,o.useCallback)((function(e){return g?v((function(){e()})):function(){}}),[g]),b,b);var C=(0,o.useCallback)((function(e){return g?("function"==typeof e?t=e(E()):"number"==typeof e&&(t=e),"number"!=typeof t?c:void f({l:t})):c;var t}),[g,E]),w=(0,r.useAxonQuery)((function(){var t=e(),o=t.query,n=i.__rest(t,["query"]);return i.__assign(i.__assign({},n),{keyMaker:"".concat(g,"-").concat(E()),query:function(e){return i.__awaiter(a,void 0,void 0,(function(){var t,a,n,r,s,d=this;return i.__generator(this,(function(_){switch(_.label){case 0:t=[],a=E(),n=function(a){var n,r,_,c,l,p;return i.__generator(this,(function(m){switch(m.label){case 0:return n="".concat(g).concat(a),r=u(n),_=r[0],c=r[1],void 0===(l=null===(s=_())||void 0===s?void 0:s.data)||a+1===E()?(p=function(){return i.__awaiter(d,void 0,void 0,(function(){var n;return i.__generator(this,(function(i){switch(i.label){case 0:return[4,o(e,a)];case 1:return n=i.sent(),c({data:l=n}),t[a]=l,[2]}}))}))},[4,p()]):[3,2];case 1:return m.sent(),[3,3];case 2:t[a]=l,m.label=3;case 3:return[2]}}))},r=0,_.label=1;case 1:return r<a?[5,n(r)]:[3,4];case 2:_.sent(),_.label=3;case 3:return++r,[3,1];case 4:return p.current=t.map((function(e){return e.length})),[2,t.flat()]}}))}))}})}),i.__spreadArray(i.__spreadArray([],t||[],!0),[E()],!1)),S=(0,o.useCallback)((function(e){return i.__awaiter(a,void 0,void 0,(function(){var t,a,o,n,r,s,c,l,m,h,y;return i.__generator(this,(function(i){switch(i.label){case 0:if(t=p.current,a=w.data||[],o=0,n=e,(0,_.isFunction)(n))try{n=n(a)}catch(f){}return n&&(0,_.isFunction)(n.then)?[4,n.catch((function(e){}))]:[3,2];case 1:n=i.sent(),i.label=2;case 2:for(r=0;r<t.length;r++)s=t[r],c=a.slice(o,o+s),l=n.slice(o,o+s),m="".concat(g).concat(r),h=u(m),y=h[1],(0,d.compare)(c,l)||y({data:l}),o+=s;return w.mutate(n),[2]}}))}))}),[g,w.data,w.mutate]);return i.__assign(i.__assign({},w),{mutate:S,setSize:C,size:E()})}},9850:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.useAxonQuery=void 0;var i=a(5410),o=a(3804),n=a(1094),r=a(8326);t.useAxonQuery=function(e,t){var a=(0,o.useContext)(n.AxonTaskContext);return(0,r.useAxonTask)((function(){var t=e(),o=t.ssrTimeout,n=void 0===o?1/0:o,r=t.query,s=t.keyMaker,d=i.__rest(t,["ssrTimeout","query","keyMaker"]),_="function"==typeof s?s():s;return i.__assign({keyMaker:_,task:function(){var e=a.service;return r(e)},onSSRTaskTimeout:function(){a.onSSRTaskTimeout&&a.onSSRTaskTimeout({type:"Query",metadata:{uid:_,ssrTimeout:n}})},ssrTimeout:n},d)}),t)}},8326:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.useAxonTask=void 0;var i=a(5410),o=a(3804),n=a(1895),r=a(1094),s=a(7374),d=a(3673),_=0,c=function(){};function l(e){return i.__awaiter(this,void 0,void 0,(function(){return i.__generator(this,(function(t){return[2,new Promise((function(t){setTimeout((function(){return t(null)}),e)}))]}))}))}t.useAxonTask=function(e,t){var a=this;void 0===t&&(t=[]);var p,u=(p=(0,o.useState)(0)[1],function(){p((function(e){return 255&++e}))}),m=(0,o.useMemo)(e,t),g=m.task,h=m.cache,y=m.keyMaker,f=m.loop,v=m.onComplete,b=m.onError,E=m.onSSRTaskTimeout,C=m.ssrTimeout,w=m.retain,S=m.ssr,R=m.disabled,k=void 0!==R&&R,N=(0,o.useContext)(r.AxonTaskContext).taskMng,M=(0,o.useContext)(r.CollectedSSRTaskResultContext),O=(0,s.useAxonStackSSRTask)(),T=O.getSSRTask,I=O.stackSSRTask,L=(0,o.useState)((function(){return{unsub:c,reset:function(){this.unsub(),this.unsub=c}}}))[0],A="function"==typeof y?y():y||String(255&_++);(0,o.useMemo)((function(){if(S&&n.IS_RUNNING_IN_SERVER){var e=null;if(M)e=M[A];else{var t=T(A);if(t&&0===t.status&&(e=t._v),!t){var a=function(e,t){return t?function(){return new Promise((function(a,i){a(e()),setTimeout((function(){i(n.TASK_TIMEOUT_EXCEPTION)}),t)}))}:e}(g,C),i=a();I(i.catch((function(e){throw E&&E(),b&&b(e),e})),A)}}e?(v&&(e.pending||v(e)),N.add({task:null,id:A,cachePolicy:h,currentValue:e,inActive:k})):N.add({task:null,id:A,inActive:k,cachePolicy:h,currentValue:{pending:!0,data:null,err:null,staled:!1,uid:A}})}else L.reset(),N.add({task:g,id:A,cachePolicy:h,inActive:k})}),[A]);var x=(0,o.useMemo)((function(){if(!f)return!1;var e={count:1/0,interval:1e3,mode:"exhaust"};return"object"==typeof f&&Object.assign(e,f),e}),[f]),D=(0,o.useRef)(!1),B=(0,o.useRef)(c),j=(0,o.useRef)(c);(0,o.useEffect)((function(){if(f&&x&&!k){D.current=!1;var e=x.interval,t=x.mode,o=x.count,n=0;return i.__awaiter(a,void 0,void 0,(function(){return i.__generator(this,(function(r){switch(r.label){case 0:return n++<=o?D.current?[3,2]:[4,i.__awaiter(a,void 0,void 0,(function(){return i.__generator(this,(function(a){switch(a.label){case 0:switch(t){case"exhaust":return[3,1];case"switch":return[3,4]}return[3,6];case 1:return[4,N.add({task:g,id:A,cachePolicy:"cache-first",isLooping:!0,inActive:!1})];case 2:return a.sent(),[4,l(e)];case 3:case 5:return a.sent(),[3,6];case 4:return[4,Promise.race([N.add({task:g,id:A,cachePolicy:"cache-first",isLooping:!0,inActive:!1}),l(e)])];case 6:return[2]}}))}))]:[3,5];case 1:return r.sent(),[3,4];case 2:return[4,i.__awaiter(a,void 0,void 0,(function(){var e;return i.__generator(this,(function(t){return e=new d.Defer,B.current=function(){e.resolve(),B.current=c,D.current=!1,L.unsub(),L.unsub=N.subscribeTaskById(A,u)},[2,e]}))}))];case 3:r.sent(),r.label=4;case 4:return[3,0];case 5:return[2]}}))})),j.current=function(){n=0,D.current=!0,L.unsub(),L.unsub=c},function(){B.current=j.current=c,D.current=!0}}}),[f,k]);var P=N.getTaskStateById(A),q=(0,o.useRef)(null);(0,o.useEffect)((function(){var e=N.getTaskStateById(A);return(null==P?void 0:P.uid)===(null==e?void 0:e.uid)&&["data","pending"].some((function(t){return(null==P?void 0:P[t])!==(null==e?void 0:e[t])}))&&u(),L.unsub=N.subscribeTaskById(A,u),function(){L.reset()}}),[A]),(0,o.useEffect)((function(){!w||!1!==(null==P?void 0:P.pending)||P.staled||P.err||(q.current=null==P?void 0:P.data)}),[P,w]),(0,o.useDebugValue)(P),(0,o.useEffect)((function(){v&&!k&&P&&P.data&&!P.pending&&!P.staled&&v(P)}),[P,k,v]);var U=(0,o.useCallback)((function(){N.add({task:g,id:A,cachePolicy:h,refresh:!0,inActive:!1})}),[N,g,A,h]),W=function(e){N.mutate({id:A,data:e})};return(0,o.useMemo)((function(){var e=i.__assign({},P);return w&&e.pending&&(e.data=q.current,e.staled=!0),i.__assign(i.__assign({},e),{refresh:U,mutate:W})}),[P])}},1416:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.useAxonTimeout=void 0;var i=a(5410),o=a(8326);t.useAxonTimeout=function(e,t){return(0,o.useAxonTask)((function(){var t=e(),a=t.timeInMs,o=void 0===a?0:a,n=i.__rest(t,["timeInMs"]);return i.__assign({task:function(){return new Promise((function(e){setTimeout((function(){return e(null)}),null!=o?o:0)}))}},n)}),t)}},1999:(e,t,a)=>{"use strict";t.sY=t.AU=void 0;a(8120),a(9667),a(3744);var i=a(9631);Object.defineProperty(t,"AU",{enumerable:!0,get:function(){return i.AxonTaskProvider}});a(2517),a(7795),a(3673),a(315),a(9189);var o=a(9850);Object.defineProperty(t,"sY",{enumerable:!0,get:function(){return o.useAxonQuery}});a(7290),a(579),a(1094),a(1416)},7374:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.useAxonStackSSRTask=void 0;var i=a(1094);function o(e,t){var a={id:t,status:2,value:e.then((function(e){a.status=0;var t=a._v;return t.data=e,t.err=null,t.pending=!1,t.staled=!1,e}),(function(e){a.status=1;var t=a._v;throw t.err=e,t.pending=!1,t.staled=!1,e})),_v:{pending:!0,staled:!1,data:null,uid:t,err:null}};(0,i.getCurrentRenderContext)().taskStack.push(a)}function n(e){return(0,i.getCurrentRenderContext)().taskStack.filter((function(t){return t.id===e}))[0]}t.useAxonStackSSRTask=function(){return{stackSSRTask:o,getSSRTask:n}}},1016:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TaskMngImpl=void 0;var i=a(5410),o=a(1895),n=a(8699),r=Object.freeze({}),s=function(){function e(e){void 0===e&&(e={});var t=this;this._updateQueue=new Set,this._cache={},this.createCacheHelper=function(e){return[function(){return t._cache[e]},function(a){var i=a.data,o=a.l;t._cache[e]={data:i,l:o,t:Date.now()}},function(a){return t.subscribeTaskById(e,a)}]},this._defaultTaskResult=i.__assign({},e.defaultTaskResult||{}),this._taskStateMap={},this._observerMap={},Object.keys(this._taskStateMap).forEach((function(e){t._observerMap[e]=[]}))}return e.prototype.taskIsRunning=function(e){var t=this.getTaskStateById(e);return!!t&&(t.pending||t.staled)},e.prototype.exist=function(e){return void 0!==this._taskStateMap[e]},e.prototype.getTaskStateById=function(e){return this._taskStateMap[e]},e.prototype.add=function(e){var t;return i.__awaiter(this,void 0,void 0,(function(){var a,n,r,s,d,_,c,l,p,u,m,g,h=this;return i.__generator(this,(function(y){return a=e.task,n=e.id,r=e.cachePolicy,s=e.currentValue,d=e.inActive,_=e.isLooping,c=void 0!==_&&_,l=this.getTaskStateById(n),this.taskIsRunning(n)?[2,null!==(t=null==l?void 0:l._p)&&void 0!==t?t:o.RESOLVED_PROMISE]:(null==(p=this._defaultTaskResult[n])?void 0:p.data)?(this._taskStateMap[n]=p,"number"!=typeof r&&"cache"!==r&&"cache-first"!==r||this._addCache(n,p.data),c&&this._commitUpdate(n),[2,o.RESOLVED_PROMISE]):s?(this._taskStateMap[n]=s,[2,o.RESOLVED_PROMISE]):(u={err:null,staled:!1,pending:!d,data:null,uid:n,_p:o.RESOLVED_PROMISE},this._taskStateMap[n]=u,m=null,this._existCache(n)&&(g=this._cache[n],"number"==typeof r&&Date.now()-g.t<r||"cache"===r?m=g.data:"cache-first"===r&&(m=g.data,u.staled=!0)),m&&(u.data=m,u.pending=!1),this._commitUpdate(n),u.pending||u.staled?(u._p=a().then((function(e){var t=h.getTaskStateById(n),a=h._observerMap[n];t&&(t=i.__assign({},t),h._taskStateMap[n]=t,t.data=e,t.staled=t.pending=!1,t.err=null,t._t=Date.now()),a&&a.length&&(h._commitUpdate(n),r&&h._addCache(n,e))}),(function(e){var t=h.getTaskStateById(n),a=h._observerMap[n];t&&(t=i.__assign({},t),h._taskStateMap[n]=t,t.data=m,t.staled=t.pending=!1,t.err=e,t._t=Date.now(),e===o.TASK_TIMEOUT_EXCEPTION&&o.IS_RUNNING_IN_BROWSER&&(t.pending=!0,t.err=null)),a&&a.length&&h._commitUpdate(n)})),[2,u._p]):[2,o.RESOLVED_PROMISE])}))}))},e.prototype.mutate=function(e){var t;return i.__awaiter(this,void 0,void 0,(function(){var a,r,s,d,_;return i.__generator(this,(function(i){switch(i.label){case 0:if(a=e.id,r=e.data,s=this.getTaskStateById(a),this.taskIsRunning(a))return[2,null!==(t=null==s?void 0:s._p)&&void 0!==t?t:o.RESOLVED_PROMISE];if(d=r,_={err:null,staled:!1,pending:!1,data:null,uid:a},(0,n.isFunction)(d))try{d=d(null==s?void 0:s.data)}catch(c){_.err=c}return d&&(0,n.isFunction)(d.then)?[4,d.catch((function(e){_.err=e}))]:[3,2];case 1:d=i.sent(),i.label=2;case 2:return _.data=d,this._taskStateMap[a]=_,this._commitUpdate(a),[2,o.RESOLVED_PROMISE]}}))}))},e.prototype.del=function(e){delete this._taskStateMap[e],delete this._observerMap[e],delete this._cache[e]},e.prototype.subscribeTaskById=function(e,t){var a=this;return this._observerMap[e]=this._observerMap[e]||[],this._observerMap[e].push(t),function(){var i=a._observerMap[e];if(i){for(var o=i.length,n=0;n<o;n++)if(i[n]===t)return void i.splice(n,1);0===a._observerMap[e].length&&delete a._observerMap[e]}}},e.prototype.destroy=function(){this._taskStateMap=this._observerMap=this._defaultTaskResult=this._cache=this._updateQueue=null},e.prototype._commitUpdate=function(e){var t=this.getTaskStateById(e);t&&!this._updateQueue.has(e)&&(this._updateQueue.add(e),this._taskStateMap[e]=i.__assign({},t),this._flushUpdateQueue())},e.prototype._flushUpdateQueue=function(){var e=this;o.IS_RUNNING_IN_SERVER||setTimeout((function(){e._updateQueue.forEach((function(t){e._observerMap[t]&&e._observerMap[t].forEach((function(e){e()}))})),e._defaultTaskResult=r,e._updateQueue.clear()}),4)},e.prototype._existCache=function(e){return!!this._cache[e]},e.prototype._addCache=function(e,t){t&&(this._cache[e]={data:t,t:Date.now()})},e}();t.TaskMngImpl=s},315:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isCanceledException=t.CancelException=void 0,t.CancelException=Object.freeze(new Error("DeferCancelled")),t.isCanceledException=function(e){return t.CancelException===e}},3673:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Defer=void 0;var i=a(5410),o=a(315),n=Object.freeze({afterCancel:"pending"});t.Defer=function(e){void 0===e&&(e=n);var t=this;this.options=e,this.status="pending",this._promise=new Promise((function(e,a){t.resolve=function(i){var n;"pending"===t.status?(n=i)&&"function"==typeof n.then?i.then(t.resolve,t.reject):(t.status="resolved",e(i)):"canceled"===t.status&&("reject"===t.options.afterCancel?a(o.CancelException):"resolve"===t.options.afterCancel&&e(o.CancelException))},t.reject=function(e){"pending"===t.status&&(t.status="rejected",a(e))}})),this.then=function(e,a){return t._promise.then((function(a){return"resolved"===t.status?e(a):a}),(function(e){if(a&&("canceled"===t.status||"rejected"===t.status))return a(e);throw e}))},this.catch=function(e){return i.__awaiter(t,void 0,void 0,(function(){var t;return i.__generator(this,(function(a){switch(a.label){case 0:return a.trys.push([0,2,,3]),[4,this._promise];case 1:return[2,a.sent()];case 2:if(t=a.sent(),this.status="resolved",e)return[2,e(t)];throw t;case 3:return[2]}}))}))},this.cancel=function(){t.status="canceled",t.resolve(null)},this.finally=function(e){return t._promise=t._promise.then((function(t){return e(),t}),(function(t){throw e(),t})),t}}},63:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.compare=t.stableHash=t.isUndefined=void 0;var a=new WeakMap,i=0;t.isUndefined=function(e){return void 0===e},t.stableHash=function(e){var o,n,r=typeof e,s=e&&e.constructor,d=s==Date;if(Object(e)!==e||d||s==RegExp)o=d?e.toJSON():"symbol"==r?e.toString():"string"==r?JSON.stringify(e):String(e);else{if(o=a.get(e))return o;if(o=++i+"~",a.set(e,o),s==Array){for(o="@",n=0;n<e.length;n++)o+=(0,t.stableHash)(e[n])+",";a.set(e,o)}if(s==Object){o="#";for(var _=Object.keys(e).sort();!(0,t.isUndefined)(n=_.pop());)(0,t.isUndefined)(e[n])||(o+=n+":"+(0,t.stableHash)(e[n])+",");a.set(e,o)}}return o},t.compare=function(e,a){return(0,t.stableHash)(e)==(0,t.stableHash)(a)}},9189:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Emitter=void 0;var a=function(){function e(e){void 0===e&&(e=1/0),this.maxLength=e,this._removeMarks=[],this._eventList={}}return e.create=function(){return new e},e.prototype.emit=function(e,t){var a,i=this._eventList[e],o=null;for(i&&i.length>0&&i.forEach((function(e){try{e.call(null,t)}catch(a){o=a}}),this);a=this._removeMarks.pop();)a();"error"!==e&&o&&this.emit("error",o)},e.prototype.on=function(e,t){var a=this,i=this._getOrRegisterEvent(e);if(i.length>=this.maxLength)throw new Error("emitter listener count is greater than ".concat(this.maxLength,"."));return i.push(t),function(){a.off(e,t)}},e.prototype.off=function(e,t){if(t){var a=this._getOrRegisterEvent(e),i=a.indexOf(t);a.splice(i,1)}else try{delete this._eventList[e]}catch(o){return}},e.prototype.once=function(e,t){var a=this,i=this._getOrRegisterEvent(e),o=function i(){for(var o=[],n=0;n<arguments.length;n++)o[n]=arguments[n];return a._delayOff(e,i),t.apply(null,o)};return i.push(o),function(){a.off(e,o)}},e.prototype._getOrRegisterEvent=function(e){var t=this._eventList[e];return t||(t=[],this._eventList[e]=t),t},e.prototype._delayOff=function(e,t){var a=this;this._removeMarks.push((function(){a.off(e,t)}))},e}();t.Emitter=a},8699:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isFunction=void 0,t.isFunction=function(e){return"function"==typeof e}},6070:(e,t,a)=>{"use strict";a.d(t,{$3:()=>b,tD:()=>l,jP:()=>v,mx:()=>s,wl:()=>I,ge:()=>S,wr:()=>w,q3:()=>T,aJ:()=>E,e5:()=>O,h4:()=>R,te:()=>k,SQ:()=>M,wc:()=>C,N5:()=>N});var i=a(6704),o=a(3804),n=a.n(o);const r=`{{${Date.now()}}}`;function s(e,t){if(!t)return{comments:"",tmpTagsComments:{}};if(!e||!e.length)return{comments:t,tmpTagsComments:{}};const a=t.indexOf("\n\n"),i=Object.create(null);let o="",n="";if(a<0)o=t;else{const e=t.replace(/\n\n/,r).split(r);o=e[0]||"",n=e[1]||""}return o&&o.split("\n").forEach((t=>{const a=t.replace(":",r).split(r),o=a[0],n=a[1];o&&n&&e.includes(o)&&Object.assign(i,{[o]:n.replace(/\n/g,"")})})),{comments:n,tmpTagsComments:i}}const d="Rk6V+3",_="XgpZlY";function c(e){return e/16+"rem"}const l=function({isDeleted:e,isHidden:t,comment:a,templateTags:n,hasTemplateTag:r}){if(!a)return null;let l;if(e)l=i.I18n.t("pr_review_deleted");else{if(t)return null;if(r){const{tmpTagsComments:e,comments:t}=s(n,a),i=[];n.forEach(((t,a)=>{const n=e[t];n&&i.push(o.createElement("div",{key:a,style:{marginTop:a?c(6):0}},o.createElement("span",{className:_},t,": "),n))})),t&&i.push(o.createElement("div",{key:100,style:{marginTop:c(12)}},t)),l=i}else l=a}return o.createElement("div",{className:d},l)};var p=a(672),u=a(26),m=a(8683);const g=["thumbnail","id","alt"];function h(){return h=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(e[i]=a[i])}return e},h.apply(this,arguments)}const y=4103,f=new p.ENDPOINT({biz:y,country:(0,m.Kd)(),uid:0,env:(0,m.dU)()});function v(e,t=!1){if(e&&(e.startsWith("https://")||e.startsWith("http://")||e.startsWith("file://")))return e;try{const{url:a}=f.getImgHttpsUrl(y,e,t?"_tn":"");return a}catch(a){return(0,u.Jn)(e,t)}}function b(e){let{thumbnail:t=!1,id:a,alt:i}=e,o=function(e,t){if(null==e)return{};var a,i,o={},n=Object.keys(e);for(i=0;i<n.length;i++)a=n[i],t.indexOf(a)>=0||(o[a]=e[a]);return o}(e,g);const r=v(a,t);return n().createElement("img",h({src:r,alt:i},o))}const E="5ae7a873244d8d6bc7b1fb4a452a5043660c6ea86718c7c2295b0a0862dcdd22",C="240250d341f7bbe8d81c08c6997ccc34765823b371e4962942f42699317415b6",w="b75ec9bfd0d07f044edb0f896d6b6d1804058e4aac11ca49cd9c7c68ad47e286",S="2384644a6b18e635dc58a2ba51c0ffced0f61bfafb5ae8aa841323ec1ddb8929",R="884b6e0ddffd87cf9bee32011bf8f6a69beefe31fc227a145d136bad8f2a25c5",k="0a771b5912c20216eb22922338eef601bb23d3a5b9adf84e82e97010e11eed22",N={my:"Malaysia",sg:"Singapore",tw:"Taiwan",th:"Thailand",br:"Brazil",mx:"Mexico",id:"Indonesia",co:"Colombia",cl:"Chile",vn:"Vietnam",ph:"Philippines"},M="70ea67ac6c484880784e7fed2e6037f98ce4151cb0e00ebc20855fada94ddead",O="afd10421c1cc0f5bd6336078f9ead3bdba5dcd8818e3c95da9f546f33d1b4bed",T="2e75a774de75f21e804948753322bbeda335ae321efe6772d6bbccdcc5e1feb3";function I(e){return i.I18n.withI18nCollections([178])(e)}},4074:(e,t,a)=>{"use strict";a.d(t,{Z:()=>S});var i=a(3804),o=a.n(i),n=a(2168),r=a.n(n),s=a(6070),d=a(3290);function _({url:e,needThumb:t,className:a,isVideoCover:i}){return o().createElement("div",{className:r()("shopee-rating-media-list-image__wrapper",a)},o().createElement("div",{className:"shopee-rating-media-list-image__place-holder"},o().createElement(d.Z,null)),o().createElement("div",{className:"shopee-rating-media-list-image__content",style:e&&e.length>0?{backgroundImage:i?`url("${e}")`:`url("${(0,s.jP)(e,t)}")`}:{}},o().createElement("div",{className:"shopee-rating-media-list-image__content--blur"}," ")))}var c=a(2589),l=a(9180);function p(){return p=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(e[i]=a[i])}return e},p.apply(this,arguments)}function u({direction:e,showArrowOnHover:t,isShown:a,handleClick:o,showArrowHint:n,isVisible:s,padding:d,IconArrow:_,style:u}){const m=t&&n&&!a;return d=d||"0px",i.createElement("div",{className:r()("rating-media-list-carousel-arrow rating-media-list-carousel-arrow--"+(e<0?"prev":"next"),m&&"rating-media-list-carousel-arrow--hint",!s&&"rating-media-list-carousel-arrow--hidden"),role:"button",tabIndex:0,style:p({opacity:!t||a||m?"1":"0",visibility:s?"visible":"hidden",transform:`translateX(calc(${e<0?"-50% + "+d:"50% - "+d}))`},u),onClick:o},_?i.createElement(_,null):e<0?i.createElement(c.Z,null):i.createElement(l.Z,null))}var m=a(7940);function g(){return g=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(e[i]=a[i])}return e},g.apply(this,arguments)}class h extends i.Component{constructor(e){super(e),this._carousel=null,this.handlePrevArrowClick=()=>{const e=this.state.position;let t=0;this.props.keepPreviousItemOnSlide&&(t=1);const a=this.props.slidesByOne?Math.max(e-1,0):Math.max(e-Math.ceil(this.props.numItemsPerRow)+t,0);this.slideTo(a)},this.handleNextArrowClick=()=>{const{items:e,numItemsPerRow:t,slidesByOne:a}=this.props,i=e.length-Math.floor(t),o=this.state.position;let n=0;this.props.keepPreviousItemOnSlide&&(n=1);const r=a?Math.min(o+1,i):Math.min(o+Math.ceil(t)-n,i);this.slideTo(r)},this.slideTo=e=>{if(this.state.isSliding&&!this.props.isOverrideSliding)return;this._finishSlidingTimeout&&window.clearTimeout(this._finishSlidingTimeout);const{transitionTime:t}=this.props;this.setState({isSliding:!0});const{_carousel:a}=this;a&&Object.assign(a.style,g({transition:`${t}ms`},this.getCurrentCarouselTransform(e))),"function"==typeof this.props.onSlide&&this.props.onSlide(e),this.props.isOverrideSliding&&this.setState({position:e}),this._finishSlidingTimeout=window.setTimeout((()=>{this.finishSliding(e)}),t)},this.finishSliding=e=>{this.setState({isSliding:!1,position:e}),this._finishSlidingTimeout&&window.clearTimeout(this._finishSlidingTimeout)},this.showArrows=()=>{this.setState({isShowArrows:!0})},this.hideArrows=()=>{this.setState({isShowArrows:!1})},this.state={position:0,isSliding:!1,isShowArrows:!1},this._carouselItems=[]}componentWillUnmount(){this._carousel=null,this._carouselItems=[]}componentDidMount(){const{numItemsPerRow:e,focusIndex:t}=this.props,a=this.props.items?this.props.items.length:0;if("number"==typeof t){const i=Math.floor(t/e)*e,o=Math.min(i,Math.max(a-Math.floor(e),0));this.setState({position:o},(()=>{const{_carousel:e}=this;e&&Object.assign(e.style,this.getCurrentCarouselTransform(o))}))}}renderDisplayedItems(){const{items:e,isFluid:t,padding:a,distributeCardWidthWhenFewerItems:o,numItemsPerRow:n}=this.props,s=e.length,d=o&&s<n?100/s:100/n;return e.map(((e,o)=>i.createElement("li",{key:o,className:r()("rating-media-list-image-carousel__item",t&&"rating-media-list-image-carousel__item--fluid"),style:{padding:`0 ${a}`,width:t?void 0:`${d}%`},ref:e=>{e&&(this._carouselItems[o]=e)}},e)))}render(){const{items:e,numItemsPerRow:t,showArrowOnHover:a,showArrowHint:o,isFluid:n,distributeCardWidthWhenFewerItems:s,itemPadding:d,className:_,IconArrowLeft:c,IconArrowRight:l,arrowStyle:p}=this.props,{isShowArrows:m,position:h}=this.state,y=e.length,f=y>t?(s&&y<t?100/y:100/t)*y:100,v=this._carouselItems&&this._carouselItems[this.state.position]?`${this._carouselItems[this.state.position].getBoundingClientRect().width}px`:void 0;return i.createElement("div",{className:r()("rating-media-list-image-carousel",_),onMouseEnter:this.showArrows,onMouseLeave:this.hideArrows,style:n?{width:v,transition:`${this.props.transitionTime}ms`}:{}},i.createElement("div",{className:"rating-media-list-image-carousel__item-list-wrapper"},i.createElement("ul",{className:"rating-media-list-image-carousel__item-list",style:g({width:n?void 0:`${f}%`},this.getCurrentCarouselTransform(h)),ref:e=>this._carousel=e},this.renderDisplayedItems())),i.createElement(u,{direction:-1,showArrowOnHover:a,isVisible:y>t&&h>0,isShown:m,handleClick:this.handlePrevArrowClick,showArrowHint:o,padding:d,IconArrow:c,style:p}),i.createElement(u,{direction:1,showArrowOnHover:a,isVisible:y>t&&h+t<y,isShown:m,handleClick:this.handleNextArrowClick,showArrowHint:o,padding:d,IconArrow:l,style:p}))}getCurrentCarouselTransform(e){const{_carousel:t,_carouselItems:a}=this;if(!t)return{};let i=0;return this.props.isFluid&&a?(i=a.map(((t,a)=>t&&a<e?t.getBoundingClientRect().width:0)).reduce(((e,t)=>e+t),0),{marginLeft:-i,marginTop:0}):(t.firstElementChild&&(i=t.firstElementChild.getBoundingClientRect().width),{marginLeft:-e*i,marginTop:0})}}function y(){return y=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(e[i]=a[i])}return e},y.apply(this,arguments)}h.defaultProps={transitionTime:500,showArrowOnHover:!1,padding:(0,m.Z)(10),keepPreviousItemOnSlide:!0,showArrowHint:!1,isFluid:!1,isOverrideSliding:!1,slidesByOne:!1};const f=function(e){return o().createElement("svg",y({width:"23",height:"18",viewBox:"0 0 23 18",fill:"none"},e),o().createElement("g",{filter:"url(#filter0_d)"},o().createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M5 4C4.44772 4 4 4.44772 4 5V13C4 13.5523 4.44772 14 5 14H13C13.5523 14 14 13.5523 14 13V5C14 4.44772 13.5523 4 13 4H5ZM11.5 9C11.5 10.3807 10.3807 11.5 9 11.5C7.61929 11.5 6.5 10.3807 6.5 9C6.5 7.61929 7.61929 6.5 9 6.5C10.3807 6.5 11.5 7.61929 11.5 9ZM9 10.6667C9.92047 10.6667 10.6667 9.92047 10.6667 9C10.6667 8.07952 9.92047 7.33333 9 7.33333C8.07953 7.33333 7.33333 8.07952 7.33333 9C7.33333 9.92047 8.07953 10.6667 9 10.6667ZM18.1667 4.83333L14.8333 7.33306V10.6667L18.1667 13.1667V4.83333Z",fill:"white"})),o().createElement("defs",null,o().createElement("filter",{id:"filter0_d",x:"0",y:"0",width:"22.1667",height:"18",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB"},o().createElement("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),o().createElement("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0"}),o().createElement("feOffset",null),o().createElement("feGaussianBlur",{stdDeviation:"2"}),o().createElement("feColorMatrix",{type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.26 0"}),o().createElement("feBlend",{mode:"normal",in2:"BackgroundImageFix",result:"effect1_dropShadow"}),o().createElement("feBlend",{mode:"normal",in:"SourceGraphic",in2:"effect1_dropShadow",result:"shape"}))))};var v=a(2393),b=a(4244);const E=["className","cover"];function C(){return C=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(e[i]=a[i])}return e},C.apply(this,arguments)}class w extends i.PureComponent{constructor(...e){super(...e),this.state={pausing:!1,ended:!1},this.player=null,this.handleEnded=()=>{this.setState({ended:!0,pausing:!1})},this.handlePlay=()=>{this.setState({ended:!1,pausing:!1})},this.handlePause=()=>{this.setState({pausing:!0})},this.setVideoDomRef=e=>{e&&(this.player=e,this.player.addEventListener("ended",this.handleEnded,!1),this.player.addEventListener("play",this.handlePlay,!1),this.player.addEventListener("pause",this.handlePause,!1))}}UNSAFE_componentWillReceiveProps(e){this.player&&(!this.props.autoPlay&&e.autoPlay?this.player.play():this.props.autoPlay&&!e.autoPlay&&this.player.pause())}render(){const e=this.props,{className:t,cover:a}=e,o=function(e,t){if(null==e)return{};var a,i,o={},n=Object.keys(e);for(i=0;i<n.length;i++)a=n[i],t.indexOf(a)>=0||(o[a]=e[a]);return o}(e,E);return i.createElement("div",{className:"_7vELmB"},i.createElement("video",C({},o,{poster:a,className:r()("FUfYhl",t),ref:this.setVideoDomRef,controlsList:"nodownload"})),this.state.pausing?i.createElement(v.Z,{className:"CPwWRk"}):this.state.ended&&i.createElement(b.Z,{className:"m38bzp"}))}}class S extends i.Component{constructor(e){super(e),this._carousel=null,this.onCarouselSlide=e=>{e>=0&&e<this.props.urlList.length&&this.setState({zoomedIndex:e})},this.state={zoomedIndex:-1,carouselTransitionTime:0,expanded:!1}}handleImageClick(e){const{zoomedIndex:t,expanded:a}=this.state;a&&t===e?this.setState({expanded:!1,zoomedIndex:0,carouselTransitionTime:0}):this.setState({expanded:!0,zoomedIndex:e,carouselTransitionTime:500},(()=>{this._carousel&&this._carousel.slideTo(e)}))}render(){const{urlList:e}=this.props;if(!e||!e.length)return null;const{zoomedIndex:t,expanded:a}=this.state,o=e.map(((e,a)=>"string"==typeof e?i.createElement(s.$3,{alt:"rating",key:a,className:"rating-media-list__zoomed-image-item",id:e}):i.createElement(w,{src:e.url,key:a,className:"rating-media-list__zoomed-video-item",controls:!0,muted:!0,autoPlay:t===a})));return i.createElement("div",{className:"rating-media-list"},i.createElement("div",{className:"rating-media-list__container"},e.map(((e,o)=>i.createElement("div",{key:o,className:r()("rating-media-list__image-wrapper",a&&t===o?"rating-media-list__image-wrapper--active":"rating-media-list__image-wrapper--inactive"),onClick:this.handleImageClick.bind(this,o)},"string"==typeof e?i.createElement(_,{url:e,needThumb:!0}):i.createElement(i.Fragment,null,i.createElement(_,{url:e.cover,needThumb:!1,isVideoCover:!0}),i.createElement("div",{className:"rating-media-list__video-cover"},i.createElement(f,null),i.createElement("span",null,((e=0,t="m:ss")=>{const a=Math.ceil(e/1e3),i=Math.floor(a/60),o=a%60,n={mm:`0${i}`.substr(-2),m:i,ss:`0${o}`.substr(-2),s:o};return Object.keys(n).reduce(((e,t)=>e.replace(t,`${n[t]}`)),t)})(e.duration||0)))))))),i.createElement("div",{className:r()("rating-media-list__zoomed-image",a&&"rating-media-list__zoomed-image--active")},i.createElement(h,{items:o,showArrowOnHover:!0,numItemsPerRow:1,showArrowHint:!0,ref:e=>this._carousel=e,onSlide:this.onCarouselSlide,keepPreviousItemOnSlide:!1,transitionTime:this.state.carouselTransitionTime,isFluid:!0,isOverrideSliding:!0})))}}},2360:(e,t,a)=>{"use strict";a.d(t,{Z:()=>c});var i=a(3804),o=a.n(i),n=a(2168),r=a.n(n),s=a(6704);const d={response:"fwJamt",title:"CaoTou",content:"_2kece8"},{t:_}=s.I18n;function c({response:e,titleText:t,className:a,isHidden:i}){return o().createElement("div",{className:r()(d.response,a)},o().createElement("div",{className:d.title},t||_("label_seller_response")),o().createElement("div",{className:d.content},i?`***${_("seller_reply_hidden")}***`:e))}},1750:(e,t,a)=>{"use strict";a.d(t,{DU:()=>M,kG:()=>w,TE:()=>v});var i=a(3804),o=a.n(i),n=a(5580),r=a(6351),s=a(2168),d=a.n(s);function _(){return _=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(e[i]=a[i])}return e},_.apply(this,arguments)}const c=function(e){return i.createElement("svg",_({viewBox:"0 0 30 30"},e),i.createElement("defs",null,i.createElement("linearGradient",{id:"star__solid",x1:"50%",x2:"50%",y1:"0%",y2:"100%"},i.createElement("stop",{offset:"0%",stopColor:"#FFCA11"}),i.createElement("stop",{offset:"100%",stopColor:"#FFAD27"}))),i.createElement("path",{fill:"url(#star__solid)",fillRule:"evenodd",d:"M14.9988798 25.032153l-8.522024 4.7551739c-.4785069.2670004-.7939037.0347448-.7072938-.5012115l1.6339124-10.1109185-6.8944622-7.1327607c-.3871203-.4005006-.2499178-.7947292.2865507-.8774654l9.5090982-1.46652789L14.5740199.51703028c.2346436-.50460972.6146928-.50543408.8497197 0l4.2693588 9.18141263 9.5090986 1.46652789c.545377.0841102.680337.4700675.28655.8774654l-6.894462 7.1327607 1.633912 10.1109185c.08788.5438118-.232337.7662309-.707293.5012115l-8.5220242-4.7551739z"}))};function l(){return l=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(e[i]=a[i])}return e},l.apply(this,arguments)}const p=function(e){return i.createElement("svg",l({viewBox:"0 0 30 30"},e),i.createElement("defs",null,i.createElement("linearGradient",{id:"star__hollow",x1:"50%",x2:"50%",y1:"0%",y2:"99.0177926%"},i.createElement("stop",{offset:"0%",stopColor:"#FFD211"}),i.createElement("stop",{offset:"100%",stopColor:"#FFAD27"}))),i.createElement("path",{fill:"none",fillRule:"evenodd",stroke:"url(#star__hollow)",strokeWidth:"2",d:"M23.226809 28.390899l-1.543364-9.5505903 6.600997-6.8291523-9.116272-1.4059447-4.01304-8.63019038-4.013041 8.63019038-9.116271 1.4059447 6.600997 6.8291523-1.543364 9.5505903 8.071679-4.5038874 8.071679 4.5038874z"}))},u={rating:"Hdwpes",icon:"Q3JZ62",starsContainer:"dmvG7c",title:"jcQ0KT",stars:"lmnPj6",definition:"_6m3yfK"};function m(){return m=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(e[i]=a[i])}return e},m.apply(this,arguments)}const g=({onClick:e,value:t,size:a,classNames:i})=>o().createElement("div",{className:d()(i,u.rating),style:{width:a,height:a},onClick:e},o().createElement(p,{className:u.icon}),o().createElement(c,{className:u.icon,style:{width:100*t+"%"}}));function h(e){return o().createElement(g,m({},e,{value:1}))}function y(e){return o().createElement(g,m({},e,{value:0}))}g.defaultProps={size:"1.875rem"};const f=5;function v({rating:e=5,maxRating:t=f,onRatingChange:a,StarUIHollow:i=y,StarUISolid:s=h,size:d}){const _=t=>{t!==e&&a&&a(t)},c=["rating-stars__star"];a&&c.push("rating-stars__star--clickable");const l=[];for(let o=1;o<=t;o++)l.push(e>=o?"icon-rating-solid":"icon-rating");return o().createElement("div",{className:"rating-stars__container"},l.map(((t,a)=>a<=e-1?s?o().createElement(s,{key:a,size:d,classNames:c,onClick:_.bind(null,a+1)}):o().createElement(n.Z,{key:a,classNames:c,onClick:_.bind(null,a+1)}):i?o().createElement(i,{key:a,classNames:c,onClick:_.bind(null,a+1),size:d}):o().createElement(r.Z,{key:a,classNames:c,onClick:_.bind(null,a+1)}))))}var b=a(6704);const{t:E}=b.I18n,C=5;function w({title:e,rating:t=5,maxRating:a=C,onRatingChange:i,StarUIHollow:n=y,StarUISolid:r=h,size:s=26,space:d=5}){const _=e=>{e!==t&&i&&i(e)},c=[];i&&c.push("rating-stars__star--clickable");const l=[];for(let o=1;o<=a;o++)l.push(t>=o?"icon-rating-solid":"icon-rating");return o().createElement("div",{className:u.starsContainer},e?o().createElement("div",{className:u.title},o().createElement("span",null,e)):null,l.map(((e,a)=>{const i=a<t?r:n;return o().createElement("div",{key:a,style:{paddingLeft:`${d}px`}},o().createElement(i,{size:s,classNames:c,onClick:_.bind(null,a+1)}))})),o().createElement("span",{className:u.definition,style:{color:t>=4?"#eda500":"rgba(0, 0, 0, 0.54)"}},t>0?E(`star_definition_${t}`):""))}function S(){return S=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(e[i]=a[i])}return e},S.apply(this,arguments)}const R=function(e){return i.createElement("svg",S({width:"22",height:"21",viewBox:"0 0 22 21",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e,{style:{color:"#ffffff",display:"block",stroke:"currentcolor"}}),i.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M11 16.9084L6.17879 19.5663C5.44805 19.9691 4.57443 19.3526 4.70912 18.5291L5.6419 12.8262L1.64766 8.74345C1.0779 8.16107 1.4064 7.17827 2.21184 7.05554L7.68852 6.22104L10.0952 1.1074C10.4555 0.341849 11.5445 0.341848 11.9048 1.1074L14.3115 6.22104L19.7882 7.05554C20.5937 7.17827 20.9222 8.16107 20.3524 8.74345L16.3582 12.8262L17.2909 18.5291C17.4256 19.3526 16.552 19.9691 15.8213 19.5663L11 16.9084Z",stroke:"#FFA727"}))};function k(){return k=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(e[i]=a[i])}return e},k.apply(this,arguments)}const N=function(e){const t=`${Math.random()}_linear_gradient`;return i.createElement("svg",k({width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),i.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M10 16.9084L5.17879 19.5663C4.44805 19.9691 3.57443 19.3526 3.70912 18.5291L4.6419 12.8262L0.647663 8.74345C0.077903 8.16107 0.406397 7.17827 1.21184 7.05554L6.68852 6.22104L9.09523 1.1074C9.45553 0.341849 10.5445 0.341848 10.9048 1.1074L13.3115 6.22104L18.7882 7.05554C19.5937 7.17827 19.9222 8.16107 19.3524 8.74345L15.3582 12.8262L16.2909 18.5291C16.4256 19.3526 15.552 19.9691 14.8213 19.5663L10 16.9084Z",fill:`url(#${t})`}),i.createElement("defs",null,i.createElement("linearGradient",{id:t,x1:"0",y1:"0",x2:"0",y2:"20",gradientUnits:"userSpaceOnUse"},i.createElement("stop",{stopColor:"#FFCA11"}),i.createElement("stop",{offset:"1",stopColor:"#FFAD27"}))))};function M({rating:e,className:t,useNew:a}){return o().createElement("div",{className:d()("shopee-rating-stars",t)},o().createElement("div",{className:"shopee-rating-stars__stars"},[1,2,3,4,5].map((t=>{const i=Math.max(0,Math.min(100*(e-t+1),100));return o().createElement("div",{className:"shopee-rating-stars__star-wrapper",key:t},o().createElement("div",{className:"shopee-rating-stars__lit",style:{width:`${i}%`}},a?o().createElement(N,null):o().createElement(n.Z,{classNames:["shopee-rating-stars__primary-star"]})),a?o().createElement(R,null):o().createElement(r.Z,{classNames:["shopee-rating-stars__hollow-star"]}))}))))}},2637:()=>{},3436:(e,t,a)=>{"use strict";a.d(t,{ZP:()=>fi,S7:()=>hi,hR:()=>yi,mW:()=>gi});var i=a(3804),o=a.n(i),n=a(6704),r=a(870),s=a(5462),d=a.n(s),_=a(5325),c=a(4857),l=a(4691),p=a(7762),u=a(2954),m=a(9151),g=a(5776),h=a(9069),y=a(4887),f=a(9154),v=a(6070),b=a(9424);function E(e,t,a=!1){const i=(0,l.Z)(e,["toggles"],{});return void 0===i[t]?a:i[t]}var C=a(1806),w=a(5774);const S={mask:"znDU3g",popup:"_4pD4ke",popup_title:"nTNZdo",popup_message:"aLdjUS",action_group:"qIUcy-","stardust-button":"GCXFdm","stardust-button--primary":"tvVPpE"},{t:R}=n.I18n;function k({onSubmit:e,onCancel:t,title:a,message:i,showCancel:n=!0,cancelText:r,submitText:s}){return o().createElement("div",{className:S.mask},o().createElement("div",{className:S.popup},o().createElement("div",{className:S.popup_title},a||null),o().createElement("div",{className:S.popup_message},i),o().createElement("div",{className:S.action_group},o().createElement("div",{style:{display:n?"block":"none"}},o().createElement(w.Lw,{onClick:t,label:r||R("pr_order_purchase_label_cancel"),targetType:"CancelButton"})),o().createElement(C.nQ,{onClick:e,targetType:"SubmitButton"},s||R("pr_order_purchase_label_submit")))))}const N={mask:"X3MKeC",popup:"qbbH2a",popup_title:"FYCQpC",popup_message:"D0j3M5",action_group:"Ex9Xy9","stardust-button":"_7wIxgs","stardust-button--primary":"vWptg4"},{t:M}=n.I18n;function O({onSubmit:e,onCancel:t}){return o().createElement("div",{className:N.mask},o().createElement("div",{className:N.popup},o().createElement("div",{className:N.popup_title},M("pr_alert_submit_rating")),o().createElement("div",{className:N.popup_message},M("pr_alert_submit_rating_description")),o().createElement("div",{className:N.action_group},o().createElement(w.Lw,{onClick:t,label:M("pr_order_purchase_label_cancel"),targetType:"CancelButton"}),o().createElement(C.nQ,{onClick:e,targetType:"SubmitButton"},M("pr_order_purchase_label_submit")))))}const T={mask:"Gc6Qfo",popup:"AHVDeU",popup_title:"vr9nPu",popup_message:"_0bVi2F",action_group:"AEe7R0","stardust-button":"nRY52P","stardust-button--primary":"le+0nP"},{t:I}=n.I18n;function L({goRating:e,warningState:t}){return o().createElement("div",{className:T.mask},o().createElement("div",{className:T.popup},o().createElement("div",{className:T.popup_message},I("label_please_enter_rating","seller_service"===t?{label:I("low_rating_detail_seller_service")}:"delivery_service"===t?{label:I("low_rating_detail_logistic_service")}:{label:`${I("low_rating_detail_seller_service")} & ${I("low_rating_detail_logistic_service")}`})),o().createElement("div",{className:T.action_group},o().createElement(C.nQ,{onClick:e,targetType:"SubmitButton"},I("label_go_rating")))))}var A=a(7289),x=a(1750),D=a(2360),B=a(4074),j=a(1256),P=a(26),q=a(2437);const U=e=>{var t,a;const{followUp:i}=e,r=[...i.videos||[],...(null==(t=i.images)?void 0:t.map((e=>e.image_id)))||[]],s=i.after_days,d=null==i||null==(a=i.follow_up_reply)?void 0:a.comment;return o().createElement("div",null,o().createElement("div",{className:"shopee-product-rating__follow_up_content_title"},1===s?n.I18n.t("one_day_update",{period:s}):n.I18n.t("some_days_update",{period:s})),o().createElement(v.tD,{isHidden:!1,comment:i.comment||"",templateTags:[],hasTemplateTag:!1}),r.length?o().createElement("div",{className:"shopee-product-rating__medias"},o().createElement(B.Z,{urlList:r})):null,d?o().createElement(D.Z,{titleText:n.I18n.t("pr_order_purchase_label_seller_response"),response:d,isHidden:!1}):null)};var W=a(2028);function F(){return F=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(e[i]=a[i])}return e},F.apply(this,arguments)}const $=function(e){return o().createElement("svg",F({width:"16",height:"16",viewBox:"0 0 16 16",fill:"none"},e),o().createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8 15C11.866 15 15 11.866 15 8C15 4.13401 11.866 1 8 1C4.13401 1 1 4.13401 1 8C1 11.866 4.13401 15 8 15Z",stroke:"#66CC00"}),o().createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M11.6208 6.40579L7.64139 10.4646C7.37512 10.7308 6.92183 10.7093 6.62894 10.4164C6.33605 10.1235 6.31446 9.67018 6.58073 9.40391L10.5601 5.34513C10.8264 5.07887 11.2797 5.10045 11.5725 5.39335C11.8654 5.68624 11.887 6.13953 11.6208 6.40579Z",fill:"#66CC00"}),o().createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M3.80292 7.99725L6.61371 10.5292C6.87998 10.7955 7.33327 10.7739 7.62616 10.481C7.91905 10.1881 7.94064 9.73484 7.67437 9.46858L4.86358 6.93659C4.59731 6.67033 4.14402 6.69191 3.85113 6.98481C3.55824 7.2777 3.53665 7.73099 3.80292 7.99725Z",fill:"#66CC00"}))},V="lf+2Hr";var J=a(5523);const{t:H}=n.I18n;class G extends i.Component{constructor(e){var t;super(e),t=this,this._nodeReportMenuButton=null,this.canClick=!0,this.clickOutsideToCloseReportMenu=e=>{this._nodeReportMenuButton&&!this._nodeReportMenuButton.contains(e.target)&&this.setState({toggle:!1})},this.handleSetAnonymous=async function(){if(t.setState({toggle:!1}),!t.canClick)return;t.canClick=!1;const e=await J.Cm.postRatingAnonymous({cmtid:t.props.cmtid,shopid:t.props.shopid,anonymous:!t.props.anonymous});if(t.canClick=!0,e.error){const e=H("oops_content").replace(/\\n/g,"\n");window.alert(e)}else t.props.updateRatingAfterSetAnonymous(),t.setState({shownTips:!0}),t.timer=window.setTimeout((()=>{t.setState({shownTips:!1})}),2e3)},this.openAnonymousMenu=()=>{this.setState({toggle:!0})},this.state={toggle:!1,shownTips:!1}}componentDidMount(){window.document.addEventListener("click",this.clickOutsideToCloseReportMenu)}componentWillUnmount(){window.clearTimeout(this.timer),window.document.removeEventListener("click",this.clickOutsideToCloseReportMenu)}render(){const{anonymous:e}=this.props;return i.createElement(i.Fragment,null,i.createElement("div",{className:"gBsA8O",ref:e=>{this._nodeReportMenuButton=e}},i.createElement(W.Z,{body:i.createElement("div",{className:"pOSzcd",onClick:this.handleSetAnonymous},H("old_rating_anonymous_toggle_"+(e?"off":"on"))),header:i.createElement("div",{className:"_3NIBBa",onClick:this.openAnonymousMenu},i.createElement(X,null)),open:this.state.toggle})),this.state.shownTips&&i.createElement("div",{className:"H1k4rR"},i.createElement($,null),i.createElement("span",{className:"ZFIPH8"},H(`old_rating_anonymous_toggle_${e?"on":"off"}_toast`))))}}const X=()=>i.createElement("svg",{width:"4px",height:"16px",viewBox:"0 0 4 16",version:"1.1",xmlns:"http://www.w3.org/2000/svg"},i.createElement("defs",null),i.createElement("g",{stroke:"none",strokeWidth:"1",fillRule:"evenodd"},i.createElement("g",{transform:"translate(-1301.000000, -550.000000)",fill:"#CCCCCC"},i.createElement("g",{transform:"translate(155.000000, 92.000000)"},i.createElement("g",{transform:"translate(40.000000, 184.000000)"},i.createElement("g",{transform:"translate(0.000000, 161.000000)"},i.createElement("g",null,i.createElement("g",{transform:"translate(50.000000, 2.000000)"},i.createElement("path",{d:"M1058,122.2 C1056.895,122.2 1056,123.096 1056,124.2 C1056,125.306 1056.895,126.202 1058,126.202 C1059.104,126.202 1060,125.306 1060,124.2 C1060,123.096 1059.104,122.2 1058,122.2 M1058,116.6 C1056.895,116.6 1056,117.496 1056,118.6 C1056,119.706 1056.895,120.602 1058,120.602 C1059.104,120.602 1060,119.706 1060,118.6 C1060,117.496 1059.104,116.6 1058,116.6 M1058,111 C1056.895,111 1056,111.896 1056,113 C1056,114.106 1056.895,115.002 1058,115.002 C1059.104,115.002 1060,114.106 1060,113 C1060,111.896 1059.104,111 1058,111"}))))))))),Q={tag:"Xmd0A5",tags:"NARdYq"};function Z({tags:e}){return i.createElement("div",{className:Q.tags},e.map((e=>i.createElement("span",{key:e.tag_id,className:Q.tag},e.tag_description))))}var z=a(2168),Y=a.n(z),K=a(6205),ee=a(6160);const te={link:"PinpOp",imageWrapper:"tJpxcs",detail:"U2w1su",itemName:"D7LjRB",modelName:"q7YFPv"},{t:ae}=n.I18n;function ie({item:e,className:t,bottomNode:a}){if(!e)return null;const i=e.model_name||e.model_names&&e.model_names.join(" , ");return o().createElement("div",{className:Y()(te.link,t),onClick:()=>{var t,a,i;window.open((t=e.shopid,a=e.itemid,(i=e.name)?ee.Z.getUrl({seoName:i,shopId:t,itemId:a}):ee.O.getUrl({shopId:t,itemId:a})))}},o().createElement(K.Ee,{url:e.image,needThumb:!0,className:te.imageWrapper}),o().createElement("div",{className:te.detail},o().createElement("div",{className:te.itemName},e.name),i?o().createElement("div",{className:te.modelName},`${ae("pr_order_purchase_label_variation")}: ${i}`):null,a||null))}var oe=a(5519),ne=a.n(oe),re=a(8683);function se(){return se=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(e[i]=a[i])}return e},se.apply(this,arguments)}const de=self.__LOCALE__||"SG",_e=self.__ENV__||"test",ce=ne().mall,le=ne().env,pe=le[_e]+ce[de],ue=e=>`${e[0]}*****${e[e.length-1]}`,me=e=>{const t={};return e.forEach((e=>{const a=e.itemid;if(t[a]){const i=`${t[a].model_name||""} , ${e.model_name||""}`;t[a].model_name=i}else t[a]=se({},e)})),Object.keys(t).map((e=>t[e]))};var ge=function(e){return e[e.EX_LOW=-2]="EX_LOW",e[e.LOW=-1]="LOW",e[e.NORMAL=0]="NORMAL",e}(ge||{});const{t:he}=n.I18n;function ye(e){const{type:t=0,videos:a=0,photos:i=0}=e;let o="";if(t===ge.EX_LOW||t===ge.LOW){const{collectObj:n}=e,{blur:r,blank:s,dark:d}=n;let _=[r?"blur":void 0,s?"blank":void 0,d?"dark":void 0];_=_.filter((e=>void 0!==e)),a&&i?1===_.length?_.includes("blur")?o=t===ge.EX_LOW?he("tips_medias_quality_ex_3_1"):he("tips_medias_quality_low_3_1"):_.includes("blank")?o=t===ge.EX_LOW?he("tips_medias_quality_ex_3_2"):he("tips_medias_quality_low_3_2"):_.includes("dark")&&(o=t===ge.EX_LOW?he("tips_medias_quality_ex_3_3"):he("tips_medias_quality_low_3_3")):2===_.length?_.includes("blur")&&_.includes("blank")?o=t===ge.EX_LOW?he("tips_medias_quality_ex_3_4"):he("tips_medias_quality_low_3_4"):_.includes("blur")&&_.includes("dark")?o=t===ge.EX_LOW?he("tips_medias_quality_ex_3_5"):he("tips_medias_quality_low_3_5"):_.includes("blank")&&_.includes("dark")&&(o=t===ge.EX_LOW?he("tips_medias_quality_ex_3_6"):he("tips_medias_quality_low_3_6")):3===_.length&&(o=t===ge.EX_LOW?he("tips_medias_quality_ex_3_7"):he("tips_medias_quality_low_3_7")):a&&!i?1===_.length?_.includes("blur")?o=t===ge.EX_LOW?he("tips_medias_quality_ex_2_1"):he("tips_medias_quality_low_2_1"):_.includes("blank")?o=t===ge.EX_LOW?he("tips_medias_quality_ex_2_2"):he("tips_medias_quality_low_2_2"):_.includes("dark")&&(o=t===ge.EX_LOW?he("tips_medias_quality_ex_2_3"):he("tips_medias_quality_low_2_3")):2===_.length?_.includes("blur")&&_.includes("blank")?o=t===ge.EX_LOW?he("tips_medias_quality_ex_2_4"):he("tips_medias_quality_low_2_4"):_.includes("blur")&&_.includes("dark")?o=t===ge.EX_LOW?he("tips_medias_quality_ex_2_5"):he("tips_medias_quality_low_2_5"):_.includes("blank")&&_.includes("dark")&&(o=t===ge.EX_LOW?he("tips_medias_quality_ex_2_6"):he("tips_medias_quality_low_2_6")):3===_.length&&(o=t===ge.EX_LOW?he("tips_medias_quality_ex_2_7"):he("tips_medias_quality_low_2_7")):!a&&i&&(1===_.length?_.includes("blur")?o=t===ge.EX_LOW?he("tips_medias_quality_ex_1_1"):he("tips_medias_quality_low_1_1"):_.includes("blank")?o=t===ge.EX_LOW?he("tips_medias_quality_ex_1_2"):he("tips_medias_quality_low_1_2"):_.includes("dark")&&(o=t===ge.EX_LOW?he("tips_medias_quality_ex_1_3"):he("tips_medias_quality_low_1_3")):2===_.length?_.includes("blur")&&_.includes("blank")?o=t===ge.EX_LOW?he("tips_medias_quality_ex_1_4"):he("tips_medias_quality_low_1_4"):_.includes("blur")&&_.includes("dark")?o=t===ge.EX_LOW?he("tips_medias_quality_ex_1_5"):he("tips_medias_quality_low_1_5"):_.includes("blank")&&_.includes("dark")&&(o=t===ge.EX_LOW?he("tips_medias_quality_ex_1_6"):he("tips_medias_quality_low_1_6")):3===_.length&&(o=t===ge.EX_LOW?he("tips_medias_quality_ex_1_7"):he("tips_medias_quality_low_1_7")))}return o}async function fe(e){return await J.Cm.ratingCommentCheck(e)}function ve(e,t,a){const i=[];let o="";return e.includes("blur")&&i.push("blur"),e.includes("blank")&&i.push("blank"),e.includes("dark")&&i.push("dark"),a||t!==ge.LOW?(1===i.length?i.includes("blank")?o=he("tips_media_check_new_1_"+(t===ge.EX_LOW?"exlow":"low")):i.includes("blur")?o=he("tips_media_check_new_2_"+(t===ge.EX_LOW?"exlow":"low")):i.includes("dark")&&(o=he("tips_media_check_new_3_"+(t===ge.EX_LOW?"exlow":"low"))):2===i.length?i.includes("blank")&&i.includes("blur")?o=he("tips_media_check_new_4_"+(t===ge.EX_LOW?"exlow":"low")):i.includes("blank")&&i.includes("dark")?o=he("tips_media_check_new_5_"+(t===ge.EX_LOW?"exlow":"low")):i.includes("blur")&&i.includes("dark")&&(o=he("tips_media_check_new_6_"+(t===ge.EX_LOW?"exlow":"low"))):o=he("tips_media_check_new_7_"+(t===ge.EX_LOW?"exlow":"low")),o):he("tips_media_content_7_edit_low")}const be=(e,t,a)=>{let i=0,o=0;t&&(a&&a.length>0&&Object.keys(t).forEach((e=>{a.includes(e)||delete t[e]})),Object.values(t).forEach((e=>{i=Math.max((null==e?void 0:e.coins_earned_with_pictures_and_videos)||0,i),o=Math.max(e.coins_earned_with_pictures_or_videos||0,o)})));const n=i||0,r=o||0;return{show_pic_and_video:n>0,show_pic_or_video:r>0,pic_and_video:n,pic_or_video:r}};function Ee(){return Ee=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(e[i]=a[i])}return e},Ee.apply(this,arguments)}const{t:Ce}=n.I18n,we=({ratings:e,handleOpenEditRating:t,updateRatingAfterSetAnonymous:a,defaultRatingReviewTemplate:o,defaultRatingShowEditButton:n,isFollowUp:r})=>{if(!e)return null;const s=e.filter((e=>0!==e.status));if(0===s.length)return i.createElement("div",null,i.createElement("p",{className:V},Ce("pr_review_deleted")));const d=s.map(((e,s)=>{var d,_;const c=[...e.videos||[],...e.images||[]],l=e.ItemRatingReply?e.ItemRatingReply.comment:null,p=(0,q.mr)(e.ctime);return i.createElement(i.Fragment,{key:s},i.createElement("div",{className:"qR3ynI"},i.createElement(ie,{item:me(e.product_items||[])[0],className:"UG4U2O"}),(()=>{if(e.is_hidden||0===e.status)return null;if(r){var o;if(null!=(o=e.follow_up)&&o.ctime)return null;if(null!=e&&e.can_follow_up)return i.createElement(w.Ig,{onClick:()=>t(s)},i.createElement("span",null,Ce("add_updates")," "))}return(0,j.y9)(e)&&n?i.createElement(w.Ig,{onClick:()=>t(s)},i.createElement("span",null,Ce("pr_order_purchase_label_edit")," ")):i.createElement(G,Ee({},e,{updateRatingAfterSetAnonymous:()=>{a(s)}}))})()),i.createElement("div",{className:"Ntzeq2"},i.createElement("div",{className:"lyRpxK"},i.createElement(A.Z,{className:"qcik5Y",imgSrc:(0,P.Jn)(e.author_portrait,!0)})),i.createElement("div",{className:"tIJkhK"},i.createElement("div",{className:"YsiKM+"},e.author_username),i.createElement(x.TE,{rating:null==(d=e.detailed_rating)?void 0:d.product_quality,size:14}),i.createElement("div",{className:"_9FCPuX"},o?i.createElement(v.tD,{isDeleted:0===e.status,isHidden:e.is_hidden,comment:e.comment,templateTags:e.template_tags||[],hasTemplateTag:!!e.has_template_tag}):e.comment?e.is_hidden?null:i.createElement("p",{className:V},0===e.status?Ce("pr_review_deleted"):e.comment):null,e.tags?i.createElement(Z,{tags:e.tags}):null),c.length&&!e.is_hidden?i.createElement("div",{className:"f3niRM"},i.createElement("div",{className:"rating-modal__image-list-wrapper"},i.createElement(B.Z,{urlList:c}))):null,i.createElement("div",{className:"P0s0Dl"},p),l?i.createElement(D.Z,{className:"Qtmnou",titleText:Ce("pr_order_purchase_label_seller_response"),response:l,isHidden:e.ItemRatingReply&&e.ItemRatingReply.is_hidden}):null,!e.is_hidden&&r&&null!=(_=e.follow_up)&&_.ctime?i.createElement(U,{followUp:e.follow_up}):null)))}));return i.createElement(i.Fragment,null,d)};var Se=a(9305);const{t:Re}=n.I18n;class ke extends o().Component{constructor(e){super(e),this.state={reply:""}}onChange(e){this.setState({reply:e})}render(){const{placeholder:e=Re("label_seller_response"),memo:t=Re("label_seller_can_only_reply_once"),onClickSave:a,onClickCancel:i,error:n,textSave:r,textCancel:s}=this.props;return o().createElement("div",{className:"product-rating-reply"},o().createElement("div",{className:Y()("product-rating-reply__input",{"product-rating-reply__input--error":n})},o().createElement(Se.Z,{maxLength:500,placeholder:e,onChange:this.onChange.bind(this),errorT:Re})),n&&o().createElement("div",{className:"product-rating-reply__error"},Re(n)),o().createElement("div",{className:"product-rating-reply__actions"},o().createElement(w.oe,{modifiers:["primary"],classnames:["product-rating-reply__button","product-rating-reply__button--save"],onClick:a&&a.bind(this,this.state.reply)},r||Re("label_save")),o().createElement(w.Ig,{classnames:["product-rating-reply__button","product-rating-reply__button--cancel"],onClick:i},s||Re("label_cancel")),o().createElement("div",{className:"product-rating-reply__fatty"}),o().createElement("div",{className:"product-rating-reply__memo"},t)))}}const Ne=ke,Me="wAkLXf",Oe="ji2WwG",{t:Te}=n.I18n;class Ie extends i.Component{constructor(e){var t;super(e),t=this,this.onClickReplyButton=()=>{this.setState({inReplyMode:!0})},this.onClickCancelReplyButton=()=>{this.setState({inReplyMode:!1})},this.onClickSaveReplyButton=async function(e){const a=t.props.rating,{orderid:i,cmtid:o,shopid:r}=a,s=await n.FetchUtils.post("/api/v2/reply_buyer_rating",{cmtid:o,orderid:i,shopid:r,comment:e});s.error?t.onSaveReplyError(s.err_msg):t.onSaveReplySuccess(e)},this.onSaveReplyError=e=>{this.setState({replyError:e})},this.onSaveReplySuccess=e=>{this.setState({responseText:e})},this.state={inReplyMode:!1,responseText:"",replyError:"",rating:e.rating}}render(){const{rating:e}=this.state;if(0===Object.keys(e).length)return o().createElement("div",null,o().createElement("p",{className:Me},Te("pr_review_deleted")));const t=[...e.videos||[],...e.images||[]],a=e.UserRatingReply,i=a&&a.comment||this.state.responseText,n=(0,q.mr)(e.ctime);return o().createElement(o().Fragment,null,o().createElement("div",{className:"NIsN22"},o().createElement(A.Z,{imgSrc:(0,P.Jn)(e.author_pic,!0)}),o().createElement("div",{className:"H3kky5"},e.author_name),i||this.state.inReplyMode?null:o().createElement("div",{onClick:this.onClickReplyButton,className:"trpyqn"},Te("pr_label_reply"))),o().createElement("div",{className:"-NCXfU"},o().createElement(x.TE,{rating:e.rating_star,size:14}),e.comment?o().createElement("div",{className:Me},e.comment):null,t.length?o().createElement("div",{className:"feD7OV"},o().createElement("div",{className:"rating-modal__image-list-wrapper"},o().createElement(B.Z,{urlList:t}))):null,o().createElement("div",{className:"_68aZKU"},n),!i&&this.state.inReplyMode?o().createElement("div",{className:Oe},o().createElement(Ne,{placeholder:Te("pr_order_purchase_label_buyer_response"),memo:Te("pr_text_you_can_only_reply_rating_once"),onClickSave:this.onClickSaveReplyButton,onClickCancel:this.onClickCancelReplyButton,textSave:Te("pr_order_purchase_label_save"),textCancel:Te("pr_order_purchase_label_cancel"),error:this.state.replyError})):null,i?o().createElement("div",{className:Oe},o().createElement(D.Z,{titleText:Te("pr_label_your_response"),response:i})):null))}}const Le=Ie;var Ae=a(1668),xe=a(6385);const{t:De,tNode:Be}=n.I18n;class je extends i.PureComponent{constructor(...e){super(...e),this.renderText=(e,t)=>{const{requirement:a}=this.props,i=e||t?["pr_label_rating_hint",e>0&&"X_word"+(e>1?"s":""),t>0&&"Y_picture"+(t>1?"s":""),"Z_coin"].filter(Boolean).join("_"):"pr_label_rating_hint_submit_to_win";return a.coins_earned?De(i,{word:e,picture:t,coins_earned:a.coins_earned}):""},this.keywordColorful=e=>{const{enableRatingCreationUIRevamp:t}=this.props,a="en"===(0,re.of)();return t?i.createElement("span",{className:"bMPOc7"},`${e} ${De("coins")}`):a?`${e} ${De("coins")}`:e},this.renderReviewText=({wordOk:e,imageOK:t,videoOk:a,imageToGo:i,videoToGo:o,wordToGo:n})=>{const{categoryCoin:r,enableRatingCreationUIRevamp:s}=this.props,d=s?Be:De;let _;const c=(null==r?void 0:r.coins_earned_with_pictures_and_videos)||0,l=(null==r?void 0:r.coins_earned_with_pictures_or_videos)||0;if(!l&&!c)return"";if(!c)return _;const p=this.keywordColorful(l),u=this.keywordColorful(c);return _=e&&t&&a?d("new_msg_submit_rating_to_earn_coins",{coins_earned:u}):e&&t?!l&&c?d("msg_add_video_to_earn_coins_two",{needed_video:o,coins_earned_with_video:u}):d("msg_add_video_to_earn_coins",{coins_earned:p,needed_video:o,coins_earned_with_video:u}):e&&a?!l&&c?d("msg_add_pics_to_earn_coins_two",{needed_pictures:i,coins_earned_with_pics:u}):d("msg_add_pics_to_earn_coins",{coins_earned:p,needed_pictures:i,coins_earned_with_pics:u}):e?d("msg_add_pics_and_video_to_earn_coins",{needed_video:o,needed_pictures:i,coins_earned_with_pics_and_videos:u}):t&&a?d("msg_add_words_to_earn_coins",{needed_characters:n,coins_earned_with_pics_and_videos:u}):t?d("msg_add_words_and_video_to_earn_coins",{needed_characters:n,needed_video:o,coins_earned_with_pics_and_videos:u}):a?d("msg_add_words_and_pics_to_earn_coins",{needed_characters:n,needed_pictures:i,coins_earned_with_pics_and_videos:u}):d("msg_add_words_and_medias_to_earn_coins",{needed_characters:n,needed_pictures:i,needed_video:o,coins_earned_with_pics_and_videos:u}),_}}render(){const{requirement:e,characterCount:t,imageCount:a,videoCount:o=0,defaultVideoReview:n}=this.props,r=Math.max(0,e.minimum_characters-t),s=Math.max(0,e.minimum_pictures-a),d=Math.max(0,(e.minimum_videos||0)-o),_=!r,c=!s,l=!d;let p;return p=n?this.renderReviewText({wordOk:_,imageOK:c,videoOk:l,imageToGo:s,videoToGo:d,wordToGo:r}):this.renderText(r,s),i.createElement("div",{className:"p9mPpj"},p)}}function Pe(){return Pe=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(e[i]=a[i])}return e},Pe.apply(this,arguments)}const qe=function(e){return o().createElement("svg",Pe({width:"20",height:"15",viewBox:"0 0 20 15",fill:"none"},e),o().createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M1 0.0769043C0.447715 0.0769043 0 0.524619 0 1.0769V13.1945C0 13.7468 0.447715 14.1945 1 14.1945H13.1176C13.6699 14.1945 14.1176 13.7468 14.1176 13.1945V1.0769C14.1176 0.52462 13.6699 0.0769043 13.1176 0.0769043H1ZM10.5883 7.1356C10.5883 9.08484 9.00811 10.665 7.05887 10.665C5.10963 10.665 3.52946 9.08484 3.52946 7.1356C3.52946 5.18636 5.10963 3.60619 7.05887 3.60619C9.00811 3.60619 10.5883 5.18636 10.5883 7.1356ZM7.05916 9.48862C8.35865 9.48862 9.4121 8.43517 9.4121 7.13568C9.4121 5.83619 8.35865 4.78274 7.05916 4.78274C5.75966 4.78274 4.70622 5.83619 4.70622 7.13568C4.70622 8.43517 5.75966 9.48862 7.05916 9.48862ZM20.0003 1.25341L15.2944 4.78244V9.4887L20.0003 13.0181V1.25341Z",fill:"#EE4D2D"}))};function Ue(){return Ue=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(e[i]=a[i])}return e},Ue.apply(this,arguments)}const We=function(e){return o().createElement("svg",Ue({width:"20",height:"15",viewBox:"0 0 20 15",fill:"none"},e),o().createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M1 0.0769348C0.447715 0.0769348 0 0.52465 0 1.07693V13.1946C0 13.7469 0.447715 14.1946 1 14.1946H13.1176C13.6699 14.1946 14.1176 13.7469 14.1176 13.1946V1.07693C14.1176 0.52465 13.6699 0.0769348 13.1176 0.0769348H1ZM10.5883 7.13563C10.5883 9.08487 9.00811 10.665 7.05887 10.665C5.10963 10.665 3.52946 9.08487 3.52946 7.13563C3.52946 5.18639 5.10963 3.60622 7.05887 3.60622C9.00811 3.60622 10.5883 5.18639 10.5883 7.13563ZM7.05916 9.48865C8.35865 9.48865 9.4121 8.4352 9.4121 7.13571C9.4121 5.83622 8.35865 4.78277 7.05916 4.78277C5.75966 4.78277 4.70622 5.83622 4.70622 7.13571C4.70622 8.4352 5.75966 9.48865 7.05916 9.48865ZM20.0003 1.25344L15.2944 4.78247V9.48873L20.0003 13.0181V1.25344Z",fill:"black",fillOpacity:"0.26"}))};function Fe(){return Fe=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(e[i]=a[i])}return e},Fe.apply(this,arguments)}const $e=function(e){return o().createElement("svg",Fe({width:"20",height:"18",viewBox:"0 0 20 18",fill:"none"},e),o().createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M6.15377 9.76895C6.15377 11.8927 7.87492 13.6151 9.99992 13.6151C12.1236 13.6151 13.8461 11.8927 13.8461 9.76895C13.8461 7.6446 12.1236 5.9228 9.99992 5.9228C7.87492 5.9228 6.15377 7.6446 6.15377 9.76895ZM5 9.76896C5 7.00771 7.23813 4.76896 10 4.76896C12.7613 4.76896 15 7.00771 15 9.76896C15 12.5296 12.7613 14.769 10 14.769C7.23813 14.769 5 12.5296 5 9.76896ZM1.15385 17.2606C0.489784 17.2606 0 16.7249 0 16.0662V4.12218C0 3.46224 0.489784 2.8459 1.15385 2.8459H4.61538L5.21635 1.73267C5.21635 1.73267 5.75421 0.538208 6.41827 0.538208H13.5817C14.2452 0.538208 14.7837 1.73267 14.7837 1.73267L15.3846 2.8459H18.8462C19.5096 2.8459 20 3.46224 20 4.12218V16.0662C20 16.7249 19.5096 17.2606 18.8462 17.2606H1.15385Z",fill:"#EE4D2D"}))};function Ve(){return Ve=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(e[i]=a[i])}return e},Ve.apply(this,arguments)}const Je=function(e){return o().createElement("svg",Ve({width:"20",height:"18",viewBox:"0 0 20 18",fill:"none"},e),o().createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M6.15377 9.76902C6.15377 11.8927 7.87492 13.6152 9.99992 13.6152C12.1236 13.6152 13.8461 11.8927 13.8461 9.76902C13.8461 7.64466 12.1236 5.92286 9.99992 5.92286C7.87492 5.92286 6.15377 7.64466 6.15377 9.76902ZM5 9.76902C5 7.00777 7.23813 4.76902 10 4.76902C12.7613 4.76902 15 7.00777 15 9.76902C15 12.5296 12.7613 14.769 10 14.769C7.23813 14.769 5 12.5296 5 9.76902ZM1.15385 17.2607C0.489784 17.2607 0 16.725 0 16.0662V4.12224C0 3.4623 0.489784 2.84596 1.15385 2.84596H4.61538L5.21635 1.73273C5.21635 1.73273 5.75421 0.538269 6.41827 0.538269H13.5817C14.2452 0.538269 14.7837 1.73273 14.7837 1.73273L15.3846 2.84596H18.8462C19.5096 2.84596 20 3.4623 20 4.12224V16.0662C20 16.725 19.5096 17.2607 18.8462 17.2607H1.15385Z",fill:"black",fillOpacity:"0.26"}))};function He(){return He=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(e[i]=a[i])}return e},He.apply(this,arguments)}const Ge=function(e){return o().createElement("svg",He({width:"10",height:"10",viewBox:"0 0 10 10",fill:"none"},e),o().createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8.28268 0.908882C8.47794 0.71362 8.79452 0.71362 8.98978 0.908882L9.0908 1.0099C9.28606 1.20516 9.28606 1.52174 9.0908 1.717L1.71669 9.09112C1.52142 9.28638 1.20484 9.28638 1.00958 9.09112L0.908564 8.9901C0.713301 8.79484 0.713301 8.47826 0.908563 8.283L8.28268 0.908882Z",fill:"#F6F6F6"}),o().createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M1.00973 0.908882C1.20499 0.71362 1.52157 0.71362 1.71683 0.908882L9.09095 8.28299C9.28621 8.47826 9.28621 8.79484 9.09095 8.9901L8.98993 9.09112C8.79467 9.28638 8.47809 9.28638 8.28283 9.09112L0.908713 1.717C0.713451 1.52174 0.71345 1.20516 0.908713 1.0099L1.00973 0.908882Z",fill:"#F6F6F6"}))};function Xe(){return Xe=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(e[i]=a[i])}return e},Xe.apply(this,arguments)}const Qe=function(e){return o().createElement("svg",Xe({width:"18",height:"18",viewBox:"0 0 18 18",fill:"none"},e),o().createElement("g",{filter:"url(#filter0_d)"},o().createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M5 4C4.44772 4 4 4.44772 4 5V13C4 13.5523 4.44772 14 5 14H13C13.5523 14 14 13.5523 14 13V5C14 4.44772 13.5523 4 13 4H5ZM11.5 9C11.5 10.3807 10.3807 11.5 9 11.5C7.61929 11.5 6.5 10.3807 6.5 9C6.5 7.61929 7.61929 6.5 9 6.5C10.3807 6.5 11.5 7.61929 11.5 9ZM9 10.6667C9.92047 10.6667 10.6667 9.92047 10.6667 9C10.6667 8.07952 9.92047 7.33333 9 7.33333C8.07953 7.33333 7.33333 8.07952 7.33333 9C7.33333 9.92047 8.07953 10.6667 9 10.6667ZM18.1667 4.83333L14.8333 7.33306V10.6667L18.1667 13.1667V4.83333Z",fill:"white"})),o().createElement("defs",null,o().createElement("filter",{id:"filter0_d",x:"0",y:"0",width:"22.1667",height:"18",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB"},o().createElement("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),o().createElement("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0"}),o().createElement("feOffset",null),o().createElement("feGaussianBlur",{stdDeviation:"2"}),o().createElement("feColorMatrix",{type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.26 0"}),o().createElement("feBlend",{mode:"normal",in2:"BackgroundImageFix",result:"effect1_dropShadow"}),o().createElement("feBlend",{mode:"normal",in:"SourceGraphic",in2:"effect1_dropShadow",result:"shape"}))))},Ze="HGMOn+",ze=({width:e,height:t,duration:a=1e3})=>{const[i,n]=o().useState(0),r=Math.sqrt(e*e+t*t);return o().useEffect((()=>{const e=Math.max(1e3,a/6);let t=0;const i=setInterval((()=>{t+=20,t>e-50&&clearInterval(i),n(Math.floor(100*t/e))}),20);return()=>clearInterval(i)}),[a]),o().createElement("div",{className:"WHgrSs"},i<100?o().createElement("div",{style:{width:r,height:r,top:(t-r)/2},className:Y()(Ze,"_2Od7PB")},o().createElement("div",{style:i>50?{transform:`rotate(${Math.PI*((i-50)/50)}rad)`}:{}})):null,i<50?o().createElement("div",{style:{width:r,height:r,top:(t-r)/2},className:Y()(Ze,"w6xXks")},o().createElement("div",{style:{transform:`rotate(${Math.PI*(i/50)}rad)`}})):null,o().createElement("div",null,i,"%"))};a(3740);var Ye=a(6563),Ke=a.n(Ye);function et(){return et=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(e[i]=a[i])}return e},et.apply(this,arguments)}const tt=self.__LOCALE__||"SG",at=self.__ENV__||"test",it=132.5,ot=1080,nt=ne().mall,rt=ne().env,st=rt[at]+nt[tt];function dt(e,t,a){const i={};e<a||t<a?e/t>1?(i.height=t,i.width=1*t):(i.width=e,i.height=e/1):(i.width=a,i.height=a);const o=Math.min(e/i.width,t/i.height);return i.srcHeight=t/o,i.srcWidth=e/o,i.y=(i.srcHeight-i.width)/2,i.x=(i.srcWidth-i.height)/2,i}function _t(e,t,a){const i=Math.max(e,t);if(i>a){const o=i/a;e/=o,t/=o}return{width:e,height:t,x:0,y:0,srcWidth:e,srcHeight:t}}function ct(e){return new Promise((function(t){const a=document.createElement("canvas"),i=new FileReader;i.onload=e=>{const i=new Image,o=e.target.result;i.onload=()=>{const e=[it,ot].map(((e,t)=>{const o=(0===t?dt:_t)(i.width,i.height,e);a.width=o.width,a.height=o.height;const n=a.getContext("2d");return n&&n.drawImage(i,-o.x,-o.y,o.srcWidth,o.srcHeight),a.toDataURL("image/jpeg",.6)}));var o;t({key:(o=e[0],o.substr(20+Math.floor(80*Math.random()),50)),thumbnail:e[0],image:e[1]})},i.src=o},i.readAsDataURL(e)}))}const lt=e=>new Promise(((t,a)=>{const i=document.createElement("video"),o=URL.createObjectURL(e),n={url:o,size:e.size},r=()=>{n.cover&&n.duration&&t(n)};i.addEventListener("timeupdate",(e=>{n.cover||(n.cover=((e,t)=>{const a=document.createElement("canvas"),i=a.getContext("2d");a.width=e.videoWidth,a.height=e.videoHeight,i&&i.drawImage(e,0,0),a.toBlob((e=>{if(!e)return;const t=e;t.lastModifiedDate=new Date,t.name="cover.jpg",(({cover:e,coverFile:t})=>{n.cover=e,n.coverFile=t,r()})({cover:URL.createObjectURL(e),coverFile:t})}),"image/jpeg"),e.pause()})(e.target))}),!1),i.addEventListener("error",(()=>{a(et({type:"VIDEO_PLAY_ERROR"},i.error))})),i.addEventListener("loadedmetadata",(e=>{n.duration=Math.ceil(1e3*e.target.duration),r()}),!1),i.src=o,i.muted=!0,i.play()})),pt=async({file:e,coverFile:t,duration:a})=>{var i,o;const n=await fetch(`https://rating.${"AR"!==tt?st:rt[at]+"shopee.com.ar"}/api/v1/video/video_preupload`,{method:"POST",credentials:"include"}).then((e=>e.json())).catch((e=>Promise.reject(e)));if(!n)return Promise.reject("service is empty");const{vid:r,services:s}=n.data,{serviceid:d,token:_,upload_domain:c,bucket:l,domain:p,slicesize:u}=s[0],m=new(Ke())([{serviceID:d,authorization:_,sliceSize:u,uploadDomain:c.replace(/^https?/,"https"),domain:p.replace(/^https?/,"https"),bucket:l,vid:r,env:at,country:tt,serviceIndex:0,biz:103}]),g=(new Date).getTime(),h=await m.upload({mediaFile:e,coverFile:t,mediaType:Ye.MediaType.video}),y=await h.done().catch((e=>Promise.reject(e))),f={vid:r,serviceid:d,extendid:null==y||null==(i=y.video)?void 0:i.extendId,fsize:e.size,md5:null==y||null==(o=y.video)?void 0:o.md5,videourl:null==y?void 0:y.video.url,cover:null==y?void 0:y.cover.url,code:0,reportdata:{cost:Date.now()-g},fileinfos:{duration:a}};return await fetch(`https://rating.${"AR"!==tt?st:rt[at]+"shopee.com.ar"}/api/v1/video/video_reportupload`,{method:"POST",credentials:"include",headers:{"content-type":"application/json; charset=utf-8"},body:JSON.stringify(f)}),Promise.resolve({id:r,url:null==y?void 0:y.video.url,cover:null==y?void 0:y.cover.url,duration:a,upload_time:Date.now()-g})},ut=async(e,t)=>{const a={image_ids:e,video_ids:t},i=await fetch(`https://rating.${"AR"!==tt?st:rt[at]+"shopee.com.ar"}/api/v1/comment/media_quality_detection`,{method:"POST",credentials:"include",headers:{"content-type":"application/json; charset=utf-8"},body:JSON.stringify(a)});return await i.json()},mt="C7VJzu",gt="JiUFY3",ht="zcGDMl",yt="r-KiXX",ft=["type","key"];function vt(){return vt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(e[i]=a[i])}return e},vt.apply(this,arguments)}const{t:bt}=n.I18n;let Et=function(e){return e[e.IMAGE=0]="IMAGE",e[e.VIDEO=1]="VIDEO",e}({});const Ct=({type:e,onChange:t,fileKey:a})=>{const i=e===Et.IMAGE?"image/*":"video/mp4";return o().createElement("label",{className:"Vad+7d"},e===Et.IMAGE?o().createElement($e,null):o().createElement(qe,null),o().createElement("span",{className:mt},e===Et.IMAGE?bt("label_add_photo"):bt("rating_entrance_name_video")),o().createElement("input",{key:a,className:gt,type:"file",onChange:t,accept:i}))},wt=({type:e,onChange:t,currentLength:a,fileKey:i})=>{const n=e===Et.IMAGE?St:Rt,r=n-a;if(!r)return null;const s=e===Et.IMAGE?"image/*":"video/mp4";return o().createElement("label",{className:"--ENop"},e===Et.IMAGE?o().createElement(Je,null):o().createElement(We,null),o().createElement("span",{className:mt},r,"/",n),o().createElement("input",{key:i,className:gt,type:"file",onChange:t,accept:s}))};let St=6;const Rt=1,kt=(0,_.connect)(null,{})((({images:e=[],videos:t=[],pendingImagesLength:a=0,pendingVideosLength:n=0,orderId:r,onMediaChange:s,onUploadSuccess:d,defaultVideoReview:_})=>{const c=e.length+a,l=t.length+n,[p,u]=(0,i.useState)(Math.random());if(c>=St&&l>=Rt)return null;const m=e=>t=>{u(Math.random());const a=`${Date.now()}`,i=t.target.files[0];if(e===Et.IMAGE)ct(i).then((t=>{s({type:e,key:a,media:t.image},1),(async(t,i,o)=>{const n={};try{const e=new Ye.MMSImg({env:at,country:tt,biz:4103});e.base64Upload([t]);const a=await e.done();n.response=a[0]}catch(r){n.error=r}var r,_;r=n.error,_=n.response,s({type:e,key:a},-1),_&&!r&&d(e,a,_.img_id)})(t.image,i.name)}));else{const i=t.target.files[0];lt(i).then((t=>{if(!(t.duration>=3e3&&t.duration<=6e4))throw new Error("duration");if(t.size>1e7)throw new Error("filesize");return s({type:e,key:a,media:t.cover,duration:t.duration},1),vt({file:i,orderid:r},t)})).then(pt).then((t=>{s({type:e,key:a},-1),d(e,a,t)})).catch((t=>{"VIDEO_PLAY_ERROR"===t.type?window.alert(bt("rating_upload_video_fail_toast")):"filesize"===t.message?window.alert(bt("rating_toast_video_upload_size_limit")):"duration"===t.message?window.alert(bt("rating_toast_video_uploadlimit",{min:3,max:60})):s({type:e,key:a},-1)}))}};return c||l?o().createElement(i.Fragment,null,o().createElement(wt,{type:Et.IMAGE,onChange:m(Et.IMAGE),fileKey:`${Et.IMAGE}_${p}`,currentLength:c}),_?o().createElement(wt,{type:Et.VIDEO,onChange:m(Et.VIDEO),fileKey:`${Et.VIDEO}_${p}`,currentLength:l}):null):o().createElement(i.Fragment,null,o().createElement(Ct,{type:Et.IMAGE,onChange:m(Et.IMAGE),fileKey:`${Et.IMAGE}_${p}`}),_?o().createElement(Ct,{type:Et.VIDEO,onChange:m(Et.VIDEO),fileKey:`${Et.IMAGE}_${p}`}):null)})),Nt=e=>({media:e,type:Et.IMAGE,key:e}),Mt=e=>({media:e,type:Et.VIDEO,key:e.url}),Ot=({videos:e=[],images:t=[],onRemove:a,pendingVideos:n,pendingImages:r,cannotRedShow:s})=>o().createElement(i.Fragment,null,e.map((({media:e,key:t,type:i,quality:n})=>o().createElement("div",{key:t,className:ht,style:{backgroundImage:`url(${e.cover})`,border:s?"none":n?"string"==typeof n?"none":Object.values(n).includes(-2)||Object.values(n).includes(-1)?"2px solid #EE2C4A":"none":"none"}},o().createElement("button",{onClick:()=>a({type:i,key:t})},o().createElement(Ge,null)),o().createElement("div",{className:"_83XIDF"},o().createElement(Qe,null),o().createElement("span",null,e.duration?((e=0,t="m:ss")=>{const a=Math.ceil(e/1e3),i=Math.floor(a/60),o=a%60,n={mm:`0${i}`.substr(-2),m:i,ss:`0${o}`.substr(-2),s:o};return Object.keys(n).reduce(((e,t)=>e.replace(t,`${n[t]}`)),t)})(e.duration):null))))),n.map(((e,t)=>o().createElement("div",{key:t,className:Y()(ht,yt)},o().createElement("img",{src:e.media}),o().createElement(ze,{width:54,height:54,duration:e.duration})))),t.map((({media:e,key:t,type:i,quality:n})=>o().createElement("div",{key:t,className:ht,style:{backgroundImage:`url(${(0,v.jP)(e)})`,border:s?"none":n?"string"==typeof n?"none":Object.values(n).includes(-2)||Object.values(n).includes(-1)?"2px solid #EE2C4A":"none":"none"}},o().createElement("button",{onClick:()=>a({type:i,key:t})},o().createElement(Ge,null))))),r.map(((e,t)=>o().createElement("div",{key:t,className:Y()(ht,yt)},o().createElement("img",{src:e.media}),o().createElement(ze,{width:54,height:54})))));class Tt extends i.Component{constructor(e){var t;super(e),t=this,this.timeoutTag=!1,this.currentImages=[],this.currentVideos=[],this.currentPendingImages=[],this.currentPendingVideos=[],this.handleRemoveMedia=({type:e,key:t})=>{const{defaultRatingMediaQualityCheck:a}=this.props,{images:i,videos:o}=this.state;e===Et.IMAGE?this.setState({images:i.filter((e=>e.key!==t))},(()=>{this.handleMediasChange(),a&&this.reportMediaCheck()})):this.setState({videos:o.filter((e=>e.key!==t))},(()=>{this.handleMediasChange(),a&&this.reportMediaCheck()}))},this.handleUploadSuccess=(e,t,a)=>{const{images:i,videos:o}=this.state,{defaultRatingMediaQualityCheck:n}=this.props;e===Et.IMAGE?this.setState({images:[...i,{key:t,type:e,media:a}]},(()=>{this.handleMediasChange(),n&&(this.timeoutTag=!1,this.uploadCheck(e,t,a))})):this.setState({videos:[...o,{key:t,type:e,media:a}]},(()=>{this.handleMediasChange(),n&&(this.timeoutTag=!1,this.uploadCheck(e,t,a))}))},this.clearMediaTimeout=()=>{},this.uploadCheck=async function(e,a,i,o=1){let n;const r=[],s=[],{collectAllMedia:d,itemId:_,cancelCollectMedia:c}=t.props;if(e===Et.IMAGE?(n=i,r.push(n)):(n=i.id,s.push(n)),o>10){if(e===Et.IMAGE){const e=t.state.images;e.forEach((e=>{e.media===i&&(e.quality={blur:0,blank:0,dark:0})})),t.setState({images:e},(()=>{clearTimeout(t.timeoutCheckMedia),c&&c(`${_}_${n}`),t.reportMediaCheck()}))}else if(e===Et.VIDEO){const e=t.state.videos;e.forEach((e=>{e.media.id===i.id&&(e.quality={blur:0,blank:0,dark:0})})),t.setState({videos:e},(()=>{clearTimeout(t.timeoutVideo),c&&c(`${_}_${n}`),t.reportMediaCheck()}))}return}if(t.timeoutTag)return;let l;d&&d(`${_}_${n}`);try{l=await ut(r,s)}catch(p){l={code:1e4}}if(0!==l.code)if(e===Et.VIDEO){const n=t.state.videos;t.setState({videos:n},(()=>{clearTimeout(t.timeoutVideo),t.timeoutVideo=setTimeout((()=>{t.uploadCheck(e,a,i,o+1)}),1e3)}))}else{const n=t.state.images;t.setState({images:n},(()=>{clearTimeout(t.timeoutCheckMedia),t.timeoutCheckMedia=setTimeout((()=>{t.uploadCheck(e,a,i,o+1)}),1e3)}))}else if(0===l.code)if(e===Et.IMAGE){const e=t.state.images;e.forEach((e=>{e.media===i&&(e.quality=l.data.image[0].quality)})),t.setState({images:e},(()=>{clearTimeout(t.timeoutCheckMedia),c&&c(`${_}_${n}`),t.reportMediaCheck()}))}else if(e===Et.VIDEO){const e=t.state.videos;e.forEach((e=>{e.media.id===i.id&&(e.quality=l.data.video[0].quality)})),t.setState({videos:e},(()=>{clearTimeout(t.timeoutVideo),c&&c(`${_}_${n}`),t.reportMediaCheck()}))}},this.reportMediaCheck=()=>{const{images:e,videos:t}=this.state,{isShowMediaCheckErr:a,itemId:i,collectMediaCheck:o}=this.props,n=[],r=[],s=[],d=[],_=[];let c;if(e.forEach((e=>{if(e.quality){const{blur:t,blank:a,dark:i}=e.quality,o=[],s=[];-2===t?o.push("blur"):-1===t&&s.push("blur"),-2===a?o.push("blank"):-1===a&&s.push("blank"),-2===i?o.push("dark"):-1===i&&s.push("dark"),o.length&&n.push(o),s.length&&r.push(s)}})),t.forEach((e=>{if(e.quality)if("string"==typeof e.quality)_.push(e.media.id);else{const{blur:t,blank:a,dark:i}=e.quality,o=[],n=[];-2===t?o.push("blur"):-1===t&&n.push("blur"),-2===a?o.push("blank"):-1===a&&n.push("blank"),-2===i?o.push("dark"):-1===i&&n.push("dark"),o.length&&s.push(o),n.length&&d.push(n)}})),_.length)if(n.length+s.length>0){let e=[];n.forEach((t=>{e=e.concat(t)})),s.forEach((t=>{e=e.concat(t)})),e=Array.from(new Set(e));const t={blur:e.includes("blur"),blank:e.includes("blank"),dark:e.includes("dark")};c={type:-3,videos:s.length,photos:n.length,collectObj:t}}else if(r.length+d.length>0){let e=[];r.forEach((t=>{e=e.concat(t)})),d.forEach((t=>{e=e.concat(t)})),e=Array.from(new Set(e));const t={blur:e.includes("blur"),blank:e.includes("blank"),dark:e.includes("dark")};c={type:-3,videos:d.length,photos:r.length,collectObj:t}}else c={type:-3,videos:0,photos:0,collectObj:{blur:!1,blank:!1,dark:!1}};else if(n.length+s.length>0){let e=[];n.forEach((t=>{e=e.concat(t)})),s.forEach((t=>{e=e.concat(t)})),e=Array.from(new Set(e));const t={blur:e.includes("blur"),blank:e.includes("blank"),dark:e.includes("dark")};c={type:-2,videos:s.length,photos:n.length,collectObj:t}}else if(r.length+d.length>0){let e=[];r.forEach((t=>{e=e.concat(t)})),d.forEach((t=>{e=e.concat(t)})),e=Array.from(new Set(e));const t={blur:e.includes("blur"),blank:e.includes("blank"),dark:e.includes("dark")};c={type:-1,videos:d.length,photos:r.length,collectObj:t}}else c={type:0,videos:0,photos:0,collectObj:{blur:!1,blank:!1,dark:!1}};a&&a(c),o&&o(i,c)},this.handleMediasChange=()=>{const{images:e,videos:t}=this.state;this.props.onMediasChange({images:e.map((({media:e})=>e)),videos:t.map((({media:e})=>e))})},this.isWebUrl=(e="")=>!!e.startsWith("http://")||!!e.startsWith("https://"),this.getValue=()=>{const{images:e,videos:t}=this.state;return[void 0,{photos:e.map((({media:e})=>e)),videos:t.map((({media:e})=>({url:e.url,id:e.id,cover:e.cover,duration:e.duration,upload_time:e.upload_time,cover_image_id:e.cover})))}]},this.handleMediaChange=(e,t=0)=>{let{type:a,key:i}=e,o=function(e,t){if(null==e)return{};var a,i,o={},n=Object.keys(e);for(i=0;i<n.length;i++)a=n[i],t.indexOf(a)>=0||(o[a]=e[a]);return o}(e,ft);const n=a===Et.IMAGE?"pendingImages":"pendingVideos",r=this.state[n];t>0?this.setState(vt({},this.state,{[n]:[...r,vt({key:i},o)]}),this.handleReadyStateChange):t<0&&this.setState(vt({},this.state,{[n]:r.filter((e=>e.key!==i))}),this.handleReadyStateChange)},this.handleReadyStateChange=()=>{const{pendingImages:e,pendingVideos:t}=this.state;this.props.onStateChange({ready:!(e.length||t.length)})},this.initCheckMedia=async function(e=1){if(e>10)return;if(t.timeoutTag)return;const{images:a,videos:i}=t.state;if(a.length+i.length===0)return;const o=[],n=[];let r;a.forEach((e=>o.push(e.media))),i.forEach((e=>n.push(e.media.id)));try{r=await ut(o,n)}catch(s){r={code:1e4}}0===r.code?(r.data&&r.data.image.forEach((e=>{a.forEach((t=>{t.media===e.image_id&&(t.quality=e.quality)}))})),r.data&&r.data.video.forEach((e=>{i.forEach((t=>{t.media.id===e.video_id&&(t.quality=e.quality)}))})),t.setState({images:a,videos:i},(()=>{t.reportMediaCheck()}))):(clearTimeout(t.initTimeoutCheck),t.initTimeoutCheck=setTimeout((()=>{t.initCheckMedia(e+1)}),1e3))},this.UNSAFE_componentWillReceiveProps=e=>{const{showDialogNow:t,cannotRedShow:a}=this.props;e.showDialogNow!==t&&this.setState({showDialogNow:e.showDialogNow}),(null==e?void 0:e.cannotRedShow)!==a&&this.setState({})},this.state={images:(e.images||[]).map(Nt),videos:(e.videos||[]).map(Mt),pendingImages:[],pendingVideos:[],showDialogNow:!1},e.defaultVideoReview&&(St=5)}componentDidMount(){const{defaultRatingMediaQualityCheck:e}=this.props;e&&(this.timeoutTag=!1,this.initCheckMedia())}componentWillUnmount(){this.clearMediaTimeout()}render(){const{images:e,videos:t,pendingImages:a,pendingVideos:i,showDialogNow:n}=this.state,{defaultRatingCommentCheck:r,cannotRedShow:s}=this.props;return n||(this.currentImages=e,this.currentVideos=t,this.currentPendingImages=a,this.currentPendingVideos=i),o().createElement("div",{className:"_46Yt1i"},r?o().createElement(o().Fragment,null,o().createElement(Ot,{pendingImages:a,pendingVideos:i,images:e,videos:t,onRemove:this.handleRemoveMedia,cannotRedShow:s}),o().createElement(kt,{images:e,videos:t,pendingImagesLength:a.length,pendingVideosLength:i.length,orderId:this.props.orderId,onMediaChange:this.handleMediaChange,onUploadSuccess:this.handleUploadSuccess,defaultVideoReview:this.props.defaultVideoReview,defaultRatingMediaQualityCheck:this.props.defaultRatingMediaQualityCheck})):o().createElement(o().Fragment,null,o().createElement(Ot,{pendingImages:this.currentPendingImages,pendingVideos:this.currentPendingVideos,images:this.currentImages,videos:this.currentVideos,onRemove:this.handleRemoveMedia,cannotRedShow:s}),o().createElement(kt,{images:this.currentImages,videos:this.currentVideos,pendingImagesLength:this.currentPendingImages.length,pendingVideosLength:this.currentPendingVideos.length,orderId:this.props.orderId,onMediaChange:this.handleMediaChange,onUploadSuccess:this.handleUploadSuccess,defaultVideoReview:this.props.defaultVideoReview,defaultRatingMediaQualityCheck:this.props.defaultRatingMediaQualityCheck})))}}const It="_2LhMgE",{t:Lt}=n.I18n;function At(e){return e/16+"rem"}const xt=/(\r\n)|\r|\n/g;class Dt extends i.Component{constructor(e){super(e),this.textareaRef=null,this.handleChange=e=>{this.textareaRef&&(this.textareaRef.style.height="auto",this.textareaRef.style.height=At(this.textareaRef.scrollHeight)),this.setState({value:e}),this.props.onTemplateChange(this.props.template,e.replace(xt," "))},this.handleKeydown=e=>{13===e.keyCode&&e.preventDefault()},this.handleSelect=e=>{e.preventDefault();const{template:t}=this.state;if(this.textareaRef){const e=this.textareaRef.selectionStart,a=this.textareaRef.selectionEnd;e<=t.length&&this.textareaRef.setSelectionRange(t.length,a)}},this.handleMouseMove=e=>{e.preventDefault()};const{value:t,index:a}=e;this.holderText=0===a?`${Lt("label_review_template_hint")}`:"",this.state={template:"",value:`${t||""}`}}shouldComponentUpdate(e,t){return t!==this.state}componentDidMount(){this.props.onTemplateChange(this.props.template,this.state.value),window.document.body.style.userSelect="none",this.textareaRef&&this.state.value&&(this.textareaRef.style.height="auto",this.textareaRef.style.height=At(this.textareaRef.scrollHeight))}render(){const{value:e}=this.state;return i.createElement("div",{className:"UzvaFO"},i.createElement("div",{className:"ej4ckG",style:{fontWeight:e?600:"normal"}},this.props.template.trim(),":"),i.createElement("textarea",{className:It,value:e,onChange:e=>{let t=e.target.value;this.handleChange(t)},onKeyDown:this.handleKeydown,onMouseMove:this.handleMouseMove,rows:1,placeholder:this.holderText,ref:e=>{this.textareaRef=e}}))}componentWillUnmount(){window.document.body.style.userSelect="auto"}}const Bt=Dt;function jt(){return jt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(e[i]=a[i])}return e},jt.apply(this,arguments)}const{t:Pt}=n.I18n;var qt=function(e){return e[e.normal=0]="normal",e[e.low=-1]="low",e[e.exLow=-2]="exLow",e}(qt||{});class Ut extends i.Component{constructor(e){super(e),this.textareaRef=null,this.text=`${Pt("label_review_template_newhint")}`,this.onChangeTemplateText=(e,t)=>{const{value:a,templateMap:i}=this.state,{onTemplateChange:o}=this.props,n=jt({},i,{[e]:t});this.setState({templateMap:n,ratingComments:Object.values(n).join("")+a}),"function"==typeof o&&o(e,t)},this.handleChange=e=>{const{templateMap:t}=this.state;this.textareaRef&&(this.textareaRef.style.height="auto",this.textareaRef.style.height=this.textareaRef.scrollHeight/16+"rem"),this.setState({value:e,ratingComments:Object.values(t).join("")+e}),this.props.onCommentChange(e)},this.handleFocus=()=>{},this.handleBlur=()=>{},this.handleMouseMove=e=>{e.preventDefault()},this.state={value:e.value||"",placeholder:this.text,templateMap:{},ratingComments:""}}shouldComponentUpdate(e,t){return t!==this.state||e!==this.props}render(){const{value:e,placeholder:t,ratingComments:a}=this.state,{templateTags:o,templateTagComments:n,commentQuality:r,canGetCoin:s,mediaQuantity:d,minimum_characters:_}=this.props;return i.createElement("div",{className:r===qt.exLow||d===ea.EX_LOW&&r!==qt.normal||r!==qt.normal&&s?"BKScP5":"X3Qjvs"},o.map(((e,t)=>i.createElement(Bt,{template:e,onTemplateChange:this.onChangeTemplateText,key:e,value:n[e],index:t}))),i.createElement("div",{className:"CLFTQP"}),i.createElement("div",{style:{position:"relative"}},i.createElement("textarea",{className:It,value:e,onChange:e=>{let t=e.target.value;this.handleChange(t)},onFocus:this.handleFocus,onBlur:this.handleBlur,onMouseMove:this.handleMouseMove,style:{minHeight:"100px",color:"rgba(0, 0, 0, 0.87)"},rows:3,placeholder:t,ref:e=>{this.textareaRef=e}})))}}Ut.defaultProps={templateTagComments:{}};const Wt=Ut,Ft=(0,a(7250).Z)(),$t="text",Vt=(e="")=>{let t=0;const a=((e="")=>{const t=[];let a=e.replace(/\s+|\t|\n|\v|\r|\f|[\ufe00-\ufe0f]/g,"");for(;a.length>0;){var i;const e=null==(i=a.match(Ft))?void 0:i[0];if(e){const i=a.indexOf(e);i>0&&t.push({text:a.slice(0,i).replace(/\u200d/,""),type:$t}),t.push({text:e,type:"other"}),a=a.slice(i+e.length)}else t.push({text:a.replace(/\u200d/,""),type:$t}),a=""}return t})(e);for(let i=0;i<a.length;i++)a[i].type===$t?t+=a[i].text.length:t+=1;return t};function Jt(e){return e?Vt(e):0}var Ht=function(e){return e[e.normal=0]="normal",e[e.elow=-2]="elow",e[e.low=-1]="low",e[e.notready=-3]="notready",e}(Ht||{}),Gt=function(e){return e[e.normal=0]="normal",e[e.low=-1]="low",e[e.exLow=-2]="exLow",e}(Gt||{});const{t:Xt}=n.I18n;function Qt(e,t,a,i,o,n,r){let s="",d=0,_=0;return!t&&a?d=1:t&&!a?d=2:t&&a&&(d=3),n===o&&r!==o?_=1:n!==o&&r===o?_=2:n===o&&r===o&&(_=3),o===Gt.normal?1===i.length?i.includes("blur")?s=e===Ht.elow?Xt(`tips_medias_quality_ex_${d}_1`):Xt(`tips_medias_quality_low_${d}_1`):i.includes("blank")?s=e===Ht.elow?Xt(`tips_medias_quality_ex_${d}_2`):Xt(`tips_medias_quality_low_${d}_2`):i.includes("dark")&&(s=e===Ht.elow?Xt(`tips_medias_quality_ex_${d}_3`):Xt(`tips_medias_quality_low_${d}_3`)):2===i.length?i.includes("blur")&&i.includes("blank")?s=e===Ht.elow?Xt(`tips_medias_quality_ex_${d}_4`):Xt(`tips_medias_quality_low_${d}_4`):i.includes("blur")&&i.includes("dark")?s=e===Ht.elow?Xt(`tips_medias_quality_ex_${d}_5`):Xt(`tips_medias_quality_low_${d}_5`):i.includes("blank")&&i.includes("dark")&&(s=e===Ht.elow?Xt(`tips_medias_quality_ex_${d}_6`):Xt(`tips_medias_quality_low_${d}_6`)):3===i.length&&(s=e===Ht.elow?Xt(`tips_medias_quality_ex_${d}_7`):Xt(`tips_medias_quality_low_${d}_7`)):o===Gt.low?e===Ht.normal||e===Ht.notready?s=Xt(`tips_comment_check_low_1_${_}`):e===Ht.low?1===i.length?i.includes("blur")?s=Xt(`tips_media_comment_check_low_${d}_1_${_}`):i.includes("blank")?s=Xt(`tips_media_comment_check_low_${d}_2_${_}`):i.includes("dark")&&(s=Xt(`tips_media_comment_check_low_${d}_3_${_}`)):2===i.length?i.includes("blur")&&i.includes("blank")?s=Xt(`tips_media_comment_check_low_${d}_4_${_}`):i.includes("blur")&&i.includes("dark")?s=Xt(`tips_media_comment_check_low_${d}_5_${_}`):i.includes("blank")&&i.includes("dark")&&(s=Xt(`tips_media_comment_check_low_${d}_6_${_}`)):3===i.length&&(s=Xt(`tips_media_comment_check_low_${d}_7_${_}`)):e===Ht.elow&&(1===i.length?i.includes("blur")?s=Xt(`tips_media_comment_check_ex_${d}_1_${_}`):i.includes("blank")?s=Xt(`tips_media_comment_check_ex_${d}_2_${_}`):i.includes("dark")&&(s=Xt(`tips_media_comment_check_ex_${d}_3_${_}`)):2===i.length?i.includes("blur")&&i.includes("blank")?s=Xt(`tips_media_comment_check_ex_${d}_4_${_}`):i.includes("blur")&&i.includes("dark")?s=Xt(`tips_media_comment_check_ex_${d}_5_${_}`):i.includes("blank")&&i.includes("dark")&&(s=Xt(`tips_media_comment_check_ex_${d}_6_${_}`)):3===i.length&&(s=Xt(`tips_media_comment_check_ex_${d}_7_${_}`))):o===Gt.exLow&&(e===Ht.elow||e===Ht.low?1===i.length?i.includes("blur")?s=Xt(`tips_media_comment_check_ex_${d}_1_${_}`):i.includes("blank")?s=Xt(`tips_media_comment_check_ex_${d}_2_${_}`):i.includes("dark")&&(s=Xt(`tips_media_comment_check_ex_${d}_3_${_}`)):2===i.length?i.includes("blur")&&i.includes("blank")?s=Xt(`tips_media_comment_check_ex_${d}_4_${_}`):i.includes("blur")&&i.includes("dark")?s=Xt(`tips_media_comment_check_ex_${d}_5_${_}`):i.includes("blank")&&i.includes("dark")&&(s=Xt(`tips_media_comment_check_ex_${d}_6_${_}`)):3===i.length&&(s=Xt(`tips_media_comment_check_ex_${d}_7_${_}`)):s=Xt("tips_comment_check_dialog_exlow")),s}function Zt(e,t,a,i,o,n,r){let s="",d=0,_=0;return!t&&a?d=1:t&&!a?d=2:t&&a&&(d=3),n===o&&r!==o?_=1:n!==o&&r===o?_=2:n===o&&r===o&&(_=3),o===Gt.normal?1===i.length?i.includes("blur")?s=e===Ht.elow?Xt(`tips_medias_quality_ex_${d}_1`):Xt(`tips_medias_quality_low_edit_${d}_1`):i.includes("blank")?s=e===Ht.elow?Xt(`tips_medias_quality_ex_${d}_2`):Xt(`tips_medias_quality_low_edit_${d}_2`):i.includes("dark")&&(s=e===Ht.elow?Xt(`tips_medias_quality_ex_${d}_3`):Xt(`tips_medias_quality_low_edit_${d}_3`)):2===i.length?i.includes("blur")&&i.includes("blank")?s=e===Ht.elow?Xt(`tips_medias_quality_ex_${d}_4`):Xt(`tips_medias_quality_low_edit_${d}_4`):i.includes("blur")&&i.includes("dark")?s=e===Ht.elow?Xt(`tips_medias_quality_ex_${d}_5`):Xt(`tips_medias_quality_low_edit_${d}_5`):i.includes("blank")&&i.includes("dark")&&(s=e===Ht.elow?Xt(`tips_medias_quality_ex_${d}_6`):Xt(`tips_medias_quality_low_edit_${d}_6`)):3===i.length&&(s=e===Ht.elow?Xt(`tips_medias_quality_ex_${d}_7`):Xt(`tips_medias_quality_low_edit_${d}_7`)):o===Gt.low?e===Ht.normal||e===Ht.notready?s=Xt(`tips_comment_check_low_edit_1_${_}`):e===Ht.low?1===i.length?i.includes("blur")?s=Xt(`tips_media_comment_check_low_edit_${d}_1_${_}`):i.includes("blank")?s=Xt(`tips_media_comment_check_low_edit_${d}_2_${_}`):i.includes("dark")&&(s=Xt(`tips_media_comment_check_low_edit_${d}_3_${_}`)):2===i.length?i.includes("blur")&&i.includes("blank")?s=Xt(`tips_media_comment_check_low_edit_${d}_4_${_}`):i.includes("blur")&&i.includes("dark")?s=Xt(`tips_media_comment_check_low_edit_${d}_5_${_}`):i.includes("blank")&&i.includes("dark")&&(s=Xt(`tips_media_comment_check_low_edit_${d}_6_${_}`)):3===i.length&&(s=Xt(`tips_media_comment_check_low_edit_${d}_7_${_}`)):e===Ht.elow&&(1===i.length?i.includes("blur")?s=Xt(`tips_media_comment_check_ex_${d}_1_${_}`):i.includes("blank")?s=Xt(`tips_media_comment_check_ex_${d}_2_${_}`):i.includes("dark")&&(s=Xt(`tips_media_comment_check_ex_${d}_3_${_}`)):2===i.length?i.includes("blur")&&i.includes("blank")?s=Xt(`tips_media_comment_check_ex_${d}_4_${_}`):i.includes("blur")&&i.includes("dark")?s=Xt(`tips_media_comment_check_ex_${d}_5_${_}`):i.includes("blank")&&i.includes("dark")&&(s=Xt(`tips_media_comment_check_ex_${d}_6_${_}`)):3===i.length&&(s=Xt(`tips_media_comment_check_ex_${d}_7_${_}`))):o===Gt.exLow&&(e===Ht.elow||e===Ht.low?1===i.length?i.includes("blur")?s=Xt(`tips_media_comment_check_ex_${d}_1_${_}`):i.includes("blank")?s=Xt(`tips_media_comment_check_ex_${d}_2_${_}`):i.includes("dark")&&(s=Xt(`tips_media_comment_check_ex_${d}_3_${_}`)):2===i.length?i.includes("blur")&&i.includes("blank")?s=Xt(`tips_media_comment_check_ex_${d}_4_${_}`):i.includes("blur")&&i.includes("dark")?s=Xt(`tips_media_comment_check_ex_${d}_5_${_}`):i.includes("blank")&&i.includes("dark")&&(s=Xt(`tips_media_comment_check_ex_${d}_6_${_}`)):3===i.length&&(s=Xt(`tips_media_comment_check_ex_${d}_7_${_}`)):s=Xt("tips_comment_check_dialog_exlow")),s}function zt(e){return e.replace(/(^\s*)|(\s*$)/g,"")}function Yt(){return Yt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(e[i]=a[i])}return e},Yt.apply(this,arguments)}const{t:Kt}=n.I18n;let ea=function(e){return e[e.NO_READY=-3]="NO_READY",e[e.EX_LOW=-2]="EX_LOW",e[e.LOW=-1]="LOW",e[e.NORMAL=0]="NORMAL",e}({});var ta=function(e){return e[e.normal=0]="normal",e[e.low=-1]="low",e[e.exLow=-2]="exLow",e}(ta||{});const aa=[];class ia extends i.Component{constructor(e){var t,a;super(e),this.mediaRef=null,this.useReviewTemplate=!1,this.templateTagComments={},this.commentQuality=ta.normal,this.showErrContentForCheckResult=!1,this.showErrMsgForCheckResult="",this.canGetCoin=!1,this.initMedias=()=>{const{rating:e,isFollowUp:t}=this.props;return t?{videos:aa,images:aa}:{images:e&&e.images?e.images:aa,videos:e&&e.videos?e.videos:aa}},this.initComments=()=>{const{isUpdating:e,rating:t,originTemplateTags:a,isFollowUp:i}=this.props,o=t?t.comment:"",n=!!t&&!!t.has_template_tag;if(i)return{comment:""};if(!e||!this.useReviewTemplate||!n)return{comment:o};const{tmpTagsComments:r,comments:s}=(0,v.mx)(a||[],o);return this.templateTagComments=Yt({},r),{comment:s}},this.toggleRatingAnonymous=()=>{this.setState({ratingAnonymous:!this.state.ratingAnonymous},(()=>{this.handleReadyStateChange()}))},this.handleMediasChange=({images:e,videos:t})=>{this.setState({images:e,videos:t},(()=>{this.canGetCoins(),this.handleReadyStateChange()}))},this.onCommentChange=e=>{const{deleteCommentCheckItemId:t,item:a}=this.props;this.setState({comment:e},(()=>{this.canGetCoins(),this.handleReadyStateChange()})),t&&t(a.itemid)},this.onTemplateChange=(e,t)=>{const{deleteCommentCheckItemId:a,item:i}=this.props;this.templateTagComments=Yt({},this.templateTagComments,{[e]:t}),Object.keys(this.templateTagComments).forEach((e=>{this.templateTagComments[e]=zt(this.templateTagComments[e])})),this.setState({},(()=>{this.handleReadyStateChange()})),this.canGetCoins(),a&&a(i.itemid)},this.getRatingComments=()=>{if(!this.useReviewTemplate)return this.state.comment;let e=this.state.comment;return Object.values(this.templateTagComments).forEach((t=>{e+=t})),e},this.isShowMediaCheckErr=e=>{const{type:t=0,videos:a=0,photos:i=0}=e,{isUpdating:o,isItemValidationCheckPass:n}=this.props;let r="";if(t===ea.EX_LOW||t===ea.LOW||t===ea.NO_READY){const{defaultRatingCommentCheck:s}=this.props,{collectObj:d}=e,{blur:_,blank:c,dark:l}=d;let p=[_?"blur":void 0,c?"blank":void 0,l?"dark":void 0];p=p.filter((e=>void 0!==e)),s?1===p.length?p.includes("blank")?r=Kt("tips_media_content_1_"+(t===ea.EX_LOW?"exlow":o||!n?"edit_low":"low")):p.includes("blur")?r=Kt("tips_media_content_2_"+(t===ea.EX_LOW?"exlow":o||!n?"edit_low":"low")):p.includes("dark")&&(r=Kt("tips_media_content_3_"+(t===ea.EX_LOW?"exlow":o||!n?"edit_low":"low"))):2===p.length?p.includes("blank")&&p.includes("blur")?r=Kt("tips_media_content_4_"+(t===ea.EX_LOW?"exlow":o||!n?"edit_low":"low")):p.includes("blank")&&p.includes("dark")?r=Kt("tips_media_content_5_"+(t===ea.EX_LOW?"exlow":o||!n?"edit_low":"low")):p.includes("blur")&&p.includes("dark")&&(r=Kt("tips_media_content_6_"+(t===ea.EX_LOW?"exlow":o||!n?"edit_low":"low"))):r=Kt("tips_media_content_7_"+(t===ea.EX_LOW?"exlow":o||!n?"edit_low":"low")):a&&i?1===p.length?p.includes("blur")?r=t===ea.EX_LOW?Kt("tips_medias_quality_ex_3_1"):Kt(o||!n?"tips_medias_quality_low_edit_3_1":"tips_medias_quality_low_3_1"):p.includes("blank")?r=t===ea.EX_LOW?Kt("tips_medias_quality_ex_3_2"):Kt(o||!n?"tips_medias_quality_low_edit_3_2":"tips_medias_quality_low_3_2"):p.includes("dark")&&(r=t===ea.EX_LOW?Kt("tips_medias_quality_ex_3_3"):Kt(o||!n?"tips_medias_quality_low_edit_3_3":"tips_medias_quality_low_3_3")):2===p.length?p.includes("blur")&&p.includes("blank")?r=t===ea.EX_LOW?Kt("tips_medias_quality_ex_3_4"):Kt(o||!n?"tips_medias_quality_low_edit_3_4":"tips_medias_quality_low_3_4"):p.includes("blur")&&p.includes("dark")?r=t===ea.EX_LOW?Kt("tips_medias_quality_ex_3_5"):Kt(o||!n?"tips_medias_quality_low_edit_3_5":"tips_medias_quality_low_3_5"):p.includes("blank")&&p.includes("dark")&&(r=t===ea.EX_LOW?Kt("tips_medias_quality_ex_3_6"):Kt(o||!n?"tips_medias_quality_low_edit_3_6":"tips_medias_quality_low_3_6")):3===p.length&&(r=t===ea.EX_LOW?Kt("tips_medias_quality_ex_3_7"):Kt(o||!n?"tips_medias_quality_low_edit_3_7":"tips_medias_quality_low_3_7")):a&&!i?1===p.length?p.includes("blur")?r=t===ea.EX_LOW?Kt("tips_medias_quality_ex_2_1"):Kt(o||!n?"tips_medias_quality_low_edit_2_1":"tips_medias_quality_low_2_1"):p.includes("blank")?r=t===ea.EX_LOW?Kt("tips_medias_quality_ex_2_2"):Kt(o||!n?"tips_medias_quality_low_edit_2_2":"tips_medias_quality_low_2_2"):p.includes("dark")&&(r=t===ea.EX_LOW?Kt("tips_medias_quality_ex_2_3"):Kt(o||!n?"tips_medias_quality_low_edit_2_3":"tips_medias_quality_low_2_3")):2===p.length?p.includes("blur")&&p.includes("blank")?r=t===ea.EX_LOW?Kt("tips_medias_quality_ex_2_4"):Kt(o||!n?"tips_medias_quality_low_edit_2_4":"tips_medias_quality_low_2_4"):p.includes("blur")&&p.includes("dark")?r=t===ea.EX_LOW?Kt("tips_medias_quality_ex_2_5"):Kt(o||!n?"tips_medias_quality_low_edit_2_5":"tips_medias_quality_low_2_5"):p.includes("blank")&&p.includes("dark")&&(r=t===ea.EX_LOW?Kt("tips_medias_quality_ex_2_6"):Kt(o||!n?"tips_medias_quality_low_edit_2_6":"tips_medias_quality_low_2_6")):3===p.length&&(r=t===ea.EX_LOW?Kt("tips_medias_quality_ex_2_7"):Kt(o||!n?"tips_medias_quality_low_edit_2_7":"tips_medias_quality_low_2_7")):!a&&i&&(1===p.length?p.includes("blur")?r=t===ea.EX_LOW?Kt("tips_medias_quality_ex_1_1"):Kt(o||!n?"tips_medias_quality_low_edit_1_1":"tips_medias_quality_low_1_1"):p.includes("blank")?r=t===ea.EX_LOW?Kt("tips_medias_quality_ex_1_2"):Kt(o||!n?"tips_medias_quality_low_edit_1_2":"tips_medias_quality_low_1_2"):p.includes("dark")&&(r=t===ea.EX_LOW?Kt("tips_medias_quality_ex_1_3"):Kt(o||!n?"tips_medias_quality_low_edit_1_3":"tips_medias_quality_low_1_3")):2===p.length?p.includes("blur")&&p.includes("blank")?r=t===ea.EX_LOW?Kt("tips_medias_quality_ex_1_4"):Kt(o||!n?"tips_medias_quality_low_edit_1_4":"tips_medias_quality_low_1_4"):p.includes("blur")&&p.includes("dark")?r=t===ea.EX_LOW?Kt("tips_medias_quality_ex_1_5"):Kt(o||!n?"tips_medias_quality_low_edit_1_5":"tips_medias_quality_low_1_5"):p.includes("blank")&&p.includes("dark")&&(r=t===ea.EX_LOW?Kt("tips_medias_quality_ex_1_6"):Kt(o||!n?"tips_medias_quality_low_edit_1_6":"tips_medias_quality_low_1_6")):3===p.length&&(r=t===ea.EX_LOW?Kt("tips_medias_quality_ex_1_7"):Kt(o||!n?"tips_medias_quality_low_edit_1_7":"tips_medias_quality_low_1_7"))),this.setState({showMediaCheckErrContent:!!r,showMediaErrContent:r,mediaQualityType:t,photosCheckLength:i,videosCheckLength:a,badTypeArr:p},(()=>{const{defaultRatingCommentCheck:e}=this.props;e&&this.controlContent(),this.canGetCoins()}))}else this.setState({showMediaCheckErrContent:!1,mediaQualityType:ea.NORMAL,photosCheckLength:0,videosCheckLength:0,badTypeArr:[]},(()=>{const{defaultRatingCommentCheck:e}=this.props;e&&this.controlContent(),this.canGetCoins()}))},this.canGetCoins=()=>{const{ratingMeta:e,defaultVideoReview:t,categoryCoin:a,isUpdating:i,collectCoinItem:o,item:n,isFollowUp:r}=this.props,{videos:s,images:d}=this.state,_=Jt(this.getRatingComments());if(r)this.canGetCoin=!1;else if(!i)if(e&&e.coins_earned>=0){const i=Math.max(0,(null==e?void 0:e.minimum_characters)-_),r=Math.max(0,(null==e?void 0:e.minimum_pictures)-d.length),c=!i,l=!r,p=!Math.max(0,((null==e?void 0:e.minimum_videos)||0)-s.length);if(t){const t=(null==a?void 0:a.coins_earned_with_pictures_and_videos)||(null==e?void 0:e.coins_earned_with_pics_and_videos)||0,i=(null==a?void 0:a.coins_earned_with_pictures_or_videos)||(null==e?void 0:e.coins_earned)||0;if(!t&&!i)return o&&o(n.itemid,!1),void(this.canGetCoin=!1);c&&l&&p?t||i?(o&&o(n.itemid,!0),this.canGetCoin=!0):(o&&o(n.itemid,!1),this.canGetCoin=!1):c&&l?i?(o&&o(n.itemid,!0),this.canGetCoin=!0):(o&&o(n.itemid,!1),this.canGetCoin=!1):c&&p&&i?(o&&o(n.itemid,!0),this.canGetCoin=!0):(o&&o(n.itemid,!1),this.canGetCoin=!1)}else null!=e&&e.coins_earned?i||r?(o&&o(n.itemid,!1),this.canGetCoin=!1):(o&&o(n.itemid,!0),this.canGetCoin=!0):(o&&o(n.itemid,!1),this.canGetCoin=!1)}else o&&o(n.itemid,!1),this.canGetCoin=!0},this.clearMediaTimeout=()=>{var e;null==(e=this.mediaRef)||e.clearMediaTimeout()},this.getCommentCheck=()=>{const{commentCheckMap:e,item:t}=this.props,{itemid:a}=t,i=e&&e[Number(a)]?e[Number(a)]:{text:0,emoji:0,total:0};return this.commentQuality=i.total,i},this.renderTipsForComment=()=>{const{isUpdating:e,isItemValidationCheckPass:t}=this.props;this.getCommentCheck(),this.commentQuality===ta.normal?(this.showErrContentForCheckResult=!1,this.showErrMsgForCheckResult=""):this.commentQuality===ta.low?(this.showErrContentForCheckResult=!0,this.showErrMsgForCheckResult=Kt(e||!t?"tips_comment_content_edit_low":"tips_comment_content_low")):this.commentQuality===ta.exLow&&(this.showErrContentForCheckResult=!0,this.showErrMsgForCheckResult=Kt("tips_comment_content_exlow"))},this.renderTipsForMediaCheckAndComment=()=>{const{mediaQualityType:e,photosCheckLength:t,videosCheckLength:a,badTypeArr:i}=this.state,{isUpdating:o}=this.props,n=this.getCommentCheck();this.commentQuality===ta.normal?e===ea.NORMAL||e===ea.NO_READY?(this.showErrContentForCheckResult=!1,this.showErrMsgForCheckResult=""):(this.showErrContentForCheckResult=!0,this.showErrMsgForCheckResult=o?Zt(e,a,t,i,this.commentQuality,(null==n?void 0:n.text)||0,(null==n?void 0:n.emoji)||0):Qt(e,a,t,i,this.commentQuality,(null==n?void 0:n.text)||0,(null==n?void 0:n.emoji)||0)):(this.commentQuality===ta.low||this.commentQuality===ta.exLow)&&(this.showErrContentForCheckResult=!0,this.showErrMsgForCheckResult=o?Zt(e,a,t,i,this.commentQuality,(null==n?void 0:n.text)||0,(null==n?void 0:n.emoji)||0):Qt(e,a,t,i,this.commentQuality,(null==n?void 0:n.text)||0,(null==n?void 0:n.emoji)||0))},this.getHeight=()=>{var e;if(this.ratingHandlerDivRef)return null==(e=this.ratingHandlerDivRef)?void 0:e.offsetHeight},this.controlContent=(e="useTag")=>{if("useTag"===e){const{showDialogNow:e}=this.props;e||this.setState({currentMediaErrStatus:this.state.showMediaCheckErrContent,currentMediaErrContent:this.state.showMediaErrContent})}else e||this.setState({currentMediaErrStatus:this.state.showMediaCheckErrContent,currentMediaErrContent:this.state.showMediaErrContent})},this.handleRatingCommentChange=e=>{const{deleteCommentCheckItemId:t,item:a}=this.props;this.setState({comment:e},(()=>{this.canGetCoins(),this.handleReadyStateChange()})),t&&t(a.itemid)},this.onTagsChanged=e=>{this.setState({tags:e},(()=>{this.handleReadyStateChange()}))},this.handleRatingChange=e=>{if(e!==this.state.ratingStar){let t={ratingStar:e,tags:{},ratingReady:this.state.ratingReady};this.state.ratingReady||(t=Yt({},t,{ratingReady:!0})),this.setState(t,(()=>{this.handleReadyStateChange()}))}},this.handleReadyStateChange=()=>{this.props.onReadyStateChange&&this.props.onReadyStateChange()};const{rating:i,defaultRatingAnonymous:o,defaultRatingReviewTemplate:n,item:r,isUpdating:s,ratingMeta:d,isFollowUp:_}=e;this.templateTags=s?i?i.template_tags:[]:r.template_tags;const c=!(!this.templateTags||!this.templateTags.length);this.useReviewTemplate=n&&c,this.isExclude=["TW","MY","CO","CL"].includes((0,re.Kd)()),this.state=Yt({ratingReady:!!(_||(i?null!=(t=i.detailed_rating)&&t.product_quality?i.detailed_rating.product_quality:i.rating_star:null!=d&&d.default_rating_star&&null!=d&&d.default_rating_star)),ratingStar:(null==i||null==(a=i.detailed_rating)?void 0:a.product_quality)||(null==i?void 0:i.rating_star)||(null==d?void 0:d.default_rating_star)||0,ratingAnonymous:o||!1,tags:_?{}:i&&i.tags?i.tags.reduce(((e,t)=>(e[t.tag_id]=!0,e)),{}):{}},this.initMedias(),this.initComments(),{showMediaCheckErrContent:!1,showMediaErrContent:"",mediaQualityType:ea.NORMAL,videosCheckLength:0,photosCheckLength:0,badTypeArr:[],currentMediaErrContent:"",currentMediaErrStatus:!1})}convertUrlsToImageData(e){return e.map((e=>({image:e,thumbnail:e})))}renderName(){const{ratingAnonymous:e}=this.state,{username:t}=this.props,a=e?ue(t):t;return i.createElement(i.Fragment,null,i.createElement("div",{className:"rating-modal-handler__rating-anonymous-hint"},Kt(this.isExclude?"pr_label_rate_anonymously":"label_show_username_on_your_review")),i.createElement("div",{className:"rating-modal-handler__rating-anonymous-username"},Kt("pr_label_rate_anonymous_preview",{name:a})))}UNSAFE_componentWillReceiveProps(e){const{showDialogNow:t,defaultRatingCommentCheck:a,isUpdating:i,cannotRedShow:o}=this.props;a&&e.showDialogNow!==t&&this.controlContent(e.showDialogNow),i||(null==e?void 0:e.cannotRedShow)!==o&&this.setState({})}render(){const{ratingMeta:e,isItemValidationCheckPass:t,isUpdating:a,rating:o,defaultVideoReview:r,enableRatingCreationUIRevamp:s,defaultRatingCommentCheck:d,cannotRedShow:_,isFollowUp:c=!1}=this.props,{comment:l,showMediaCheckErrContent:p,showMediaErrContent:u,currentMediaErrContent:m,currentMediaErrStatus:g,mediaQualityType:h}=this.state,y=o||{images:[],videos:[]},f=this.getRatingComments();return d&&this.renderTipsForComment(),i.createElement("div",{className:Y()("rating-modal-handler__container",!this.props.showBottomBorder&&"rating-modal-handler__container--last"),ref:e=>{this.ratingHandlerDivRef=e}},i.createElement(ie,{item:c?Yt({},this.props.item,{name:n.I18n.t("product_quality_rating"),model_name:"",model_names:[]}):this.props.item,className:"UYED6+",bottomNode:c?i.createElement("div",{style:{marginLeft:-5,marginTop:"8px"},onClick:e=>{e.stopPropagation()}},i.createElement(x.kG,{size:29,rating:this.state.ratingStar,onRatingChange:this.handleRatingChange})):void 0}),i.createElement("div",{style:{margin:"20px 0"}},c?null:i.createElement(x.kG,{title:Kt("low_rating_detail_product_quality"),rating:this.state.ratingStar,onRatingChange:this.handleRatingChange})),this.state.ratingReady?i.createElement(i.Fragment,null,i.createElement("div",{className:"jz-Ezz"},this.useReviewTemplate?i.createElement(Wt,{templateTags:this.templateTags||[],onCommentChange:this.onCommentChange,onTemplateChange:this.onTemplateChange,value:l,templateTagComments:this.templateTagComments,commentQuality:this.commentQuality,canGetCoin:this.canGetCoin,mediaQuantity:h,minimum_characters:(null==e?void 0:e.minimum_characters)||0}):i.createElement("div",{style:{position:"relative"}},i.createElement(Ae.Z,{value:l,onChange:e=>{const t=e.target.value;this.handleRatingCommentChange(t)},placeholder:Kt("label_review_template_newhint"),style:this.commentQuality===ta.exLow||h===ea.EX_LOW&&this.commentQuality!==ta.normal||this.commentQuality!==ta.normal&&this.canGetCoin?{border:"2px solid #EE2C4A",transition:"none"}:{}})),i.createElement(Tt,{ref:e=>{this.mediaRef=e},orderId:this.props.orderId,images:c?[]:y.images||[],videos:c?[]:y.videos||[],onStateChange:this.props.onImageReadyStateChange,defaultVideoReview:r,onMediasChange:this.handleMediasChange,itemId:this.props.item.itemid,isShowMediaCheckErr:this.isShowMediaCheckErr,collectMediaCheck:this.props.collectMediaCheck,defaultRatingMediaQualityCheck:this.props.defaultRatingMediaQualityCheck,collectAllMedia:this.props.collectAllMedia,cancelCollectMedia:this.props.cancelCollectMedia,showDialogNow:this.props.showDialogNow,defaultRatingCommentCheck:this.props.defaultRatingCommentCheck,cannotRedShow:!a&&_}),_?t?i.createElement(je,{classname:"rating-hint-text-coin",requirement:e,imageCount:this.state.images.length,videoCount:this.state.videos.length,defaultVideoReview:r,enableRatingCreationUIRevamp:s,categoryCoin:this.props.categoryCoin,characterCount:Jt(f)}):null:(d?g:p)||this.showErrContentForCheckResult?i.createElement("div",{className:"rating-modal-handler_media-err-content"},d&&this.showErrContentForCheckResult?i.createElement("div",null,this.showErrMsgForCheckResult):null,d?g?i.createElement("div",{className:this.showErrContentForCheckResult?"rating-comment-check-with-media-check":""},m):null:p?i.createElement("div",{className:this.showErrContentForCheckResult?"rating-comment-check-with-media-check":""},u):null):t?i.createElement(je,{classname:"rating-hint-text-coin",requirement:e,imageCount:this.state.images.length,videoCount:this.state.videos.length,defaultVideoReview:r,enableRatingCreationUIRevamp:s,categoryCoin:this.props.categoryCoin,characterCount:Jt(f)}):null),c?null:i.createElement("div",{className:"rating-modal-handler__rating-anonymous-wrapper"},i.createElement(xe.Z,{checked:this.isExclude?this.state.ratingAnonymous:!this.state.ratingAnonymous,onClick:this.toggleRatingAnonymous}),i.createElement("div",{style:{marginLeft:4},onClick:this.toggleRatingAnonymous},this.renderName()))):null)}getData(){if(!this.mediaRef)return null;const[e,t]=this.mediaRef.getValue();return e?null:Yt({itemid:this.props.item.itemid,product_quality:this.state.ratingStar,comment:this.state.comment},t,{tagids:Object.keys(this.state.tags).map(Number).filter((e=>this.state.tags[e])),anonymous:this.state.ratingAnonymous,template_tag_comments:Yt({},this.templateTagComments)})}getEditData(){if(!this.mediaRef)return null;const[e,t]=this.mediaRef.getValue();return e?null:Yt({itemid:this.props.item.itemid,comment:this.state.comment},t,{tagids:Object.keys(this.state.tags).map(Number).filter((e=>this.state.tags[e])),anonymous:this.state.ratingAnonymous,detailed_rating:{product_quality:this.state.ratingStar,seller_service:this.props.detailedRating.seller_service,delivery_service:this.props.detailedRating.delivery_service},template_tag_comments:Yt({},this.templateTagComments)})}}ia.defaultProps={showBottomBorder:!1};const oa=ia;var na=a(1048);const ra="vTGJzu",sa="izk1hM",da="_1oVQkX";var _a=a(5999),ca=a(667),la=a(3091),pa=a(1720);const ua="K21XuF",ma="-i3zLJ",{t:ga}=n.I18n,ha=e=>{const{direction:t,meta:a,categoryCoinList:n,coinLimitSetting:r}=e,s=(()=>{let e;switch((0,re.Kd)()){case"MX":case"CL":case"CO":e="";break;case"SG":e="https://help.shopee.sg/s/article/How-to-write-a-high-quality-product-review-0222";break;case"ID":e="https://help.shopee.co.id/s/article/Bagaimana-cara-menulis-ulasan-yang-baik";break;case"VN":e="https://help.shopee.vn/s/article/Lam-The-Nao-De-Co-1-Bai-Viet-Danh-Gia-Chat-Luong";break;case"MY":e="https://help.shopee.com.my/my/s/article/How-to-write-a-high-quality-product-review";break;case"TW":e="https://help.shopee.tw/tw/s/article/%E5%A6%82%E4%BD%95%E6%92%B0%E5%AF%AB%E6%9C%89%E5%B9%AB%E5%8A%A9%E7%9A%84%E5%95%86%E5%93%81%E8%A9%95%E5%83%B";break;case"TH":e="https://help.shopee.co.th/s/article/%E0%B8%81%E0%B8%B2%E0%B8%A3%E0%B8%A3%E0%B8%B5%E0%B8%A7%E0%B8%B4%E0%B8%A7%E0%B8%AA%E0%B8%B4%E0%B8%99%E0%B8%84%E0%B9%89%E0%B8%B2%E0%B9%83%E0%B8%AB%E0%B9%89%E0%B8%A1%E0%B8%B5%E0%B8%9B%E0%B8%A3%E0%B8%B0%E0%B8%AA%E0%B8%B4%E0%B8%97%E0%B8%98%E0%B8%B4%E0%B8%A0%E0%B8%B2%E0%B8%9E";break;case"BR":e="https://help.shopee.com.br/s/article/Como-ajudar-os-compradores-dando-avalia%C3%A7%C3%B5es-de-qualidade";break;case"PH":e="https://help.shopee.ph/ph/s/article/How-to-write-a-high-quality-product-review-ph";break;case"PL":e="https://help.shopee.pl/portal/article/183";break;case"ES":e="https://help.shopee.es/portal/article/69241-%C2%BFC%C3%B3mo-escribir-una-rese%C3%B1a-de-producto-de-alta-calidad?previousPage=secondary%20category&previousPage=other%20articles";break;case"AR":e="https://help.shopee.com.ar/portal/article/86827 "}return e})(),{show_pic_and_video:d,pic_and_video:_,show_pic_or_video:c,pic_or_video:l}=be(0,n),p=r&&r.threshold>0,u=r&&r.max_times>0&&r.duration>0,m={shopid:null==a?void 0:a.shopId,orderid:null==a?void 0:a.orderId},g=(0,i.useRef)(null),h=(0,la.Z)("RATING.imprReviewRewardCriteriaPanel",m),y=(0,pa.Z)("RATING.clickReviewRewardCriteriaPanel",{});return(0,i.useEffect)((()=>{h(g.current)}),[h]),o().createElement(ca.Z,{arrowWidth:28,arrowHeight:10,margin:0,arrowBackgroundColor:"#fff",position:"top"===t?ca.I.BOTTOM_RIGHT:ca.I.TOP_LEFT,fixedPosition:!0,showArrow:!0,showBorder:!0,useSafeMargin:!1,target:o().createElement("span",{onClick:()=>{y({targetData:m})}},"top"===t?o().createElement("span",{className:"V-sGOI"},o().createElement("span",{className:"ej1BZw"})):o().createElement("span",{className:"_6-3Yc3"},"?")),popover:o().createElement("div",{className:"MENgN5",ref:g},o().createElement("div",{className:"KCnyCs"},o().createElement("div",{className:"_2xgmwo"},ga("coins_panel_title")),o().createElement("div",{className:"mmBt8Y"},ga("coins_panel_tip",{minimum_characters:null==a?void 0:a.minimum_characters}))),o().createElement("div",{className:"sfB8We",style:{display:c||d?void 0:"none"}},o().createElement("div",{className:"HXri3i"},ga("coins_content_title")),c?o().createElement("div",{className:ua},o().createElement("div",null,ga("coins_review_least_media",{minimum_pictures:(null==a?void 0:a.minimum_pictures)||1,minimum_videos:(null==a?void 0:a.minimum_videos)||1})),o().createElement("div",{className:ma},l," ",ga("coins"))):null,d?o().createElement("div",{className:ua},o().createElement("div",null,ga("coins_review_media")),o().createElement("div",{className:ma},_," ",ga("coins"))):null),o().createElement("div",{className:"AyEyx4"},o().createElement("div",null,ga("coins_panel_footer_tips_one")),o().createElement("div",null,ga("coins_panel_footer_tips_two")),o().createElement("div",null,ga("coins_panel_footer_tips_three")),o().createElement("div",null,ga("coins_panel_footer_tips_four")),p?o().createElement("div",null,ga("coins_panel_footer_tips_six",{threshold:(0,_a.JL)((null==r?void 0:r.threshold)||0)})):null,u?o().createElement("div",null,ga("coins_panel_footer_tips_seven",{duration:null==r?void 0:r.duration,max_times:null==r?void 0:r.max_times})):null,o().createElement("div",null,ga("coins_panel_footer_tips_five"),o().createElement("a",{href:s,target:"_blank",rel:"noopener noreferrer",style:s?{color:"#3789f7",marginLeft:(4,"0.25rem")}:{display:"none"}},ga("tips_see_examples"))),"max_coins_varies_depending_on_item"===ga("max_coins_varies_depending_on_item")?null:o().createElement("div",null,ga("max_coins_varies_depending_on_item"))))})},{t:ya,tNode:fa}=n.I18n;class va extends i.PureComponent{constructor(e){super(e),this.node=null,this.corner=null,this.renderText=e=>{const{enableRatingCreationUIRevamp:t}=this.props;return t?fa("coins_earned_tip",{coins_earned:o().createElement("span",{className:"_5c1DB5"},`${e} ${ya("coins")}`)}):ya("prev_old_coins_earned_tip",{coins_earned:e})},this.state={shown:!1,top:0}}componentDidMount(){const{getBannerHeight:e}=this.props;e&&e(this.node&&Number(this.node.clientHeight)||0)}render(){const{meta:e,isMultiple:t,defaultVideoReview:a,categoryCoinList:i,coinLimitSetting:n}=this.props,{pic_and_video:r}=be(0,i);return a?o().createElement("div",{className:ra,ref:e=>{this.node=e}},o().createElement(na.Z,{className:sa}),o().createElement("span",{className:da},this.renderText(r)),o().createElement(ha,{direction:"top",meta:e,categoryCoinList:i,coinLimitSetting:n})):o().createElement("div",{className:ra},o().createElement(na.Z,{className:sa}),o().createElement("span",{className:da},ya(t?"label_rating_banner_multiple_copy":"pr_label_rating_banner",e)))}}const ba="u-INmW";function Ea(){return Ea=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(e[i]=a[i])}return e},Ea.apply(this,arguments)}const{t:Ca}=n.I18n,wa={product_quality:0,seller_service:0,delivery_service:0};class Sa extends i.Component{constructor(e){super(e),this.handleRatingChange=(e,t)=>{const a=this.props.detailed_rating;switch(e){case"SELLER":this.props.onRatingChange(Ea({},a,{seller_service:t}));break;case"DELIVERY":this.props.onRatingChange(Ea({},a,{delivery_service:t}))}}}render(){const{detailed_rating:e=wa}=this.props;return i.createElement("div",null,i.createElement("div",{className:"wQt6l3"},Ca("label_about_service")),i.createElement("div",{className:"HiyfuD"},i.createElement("div",{className:ba},i.createElement(x.kG,{title:Ca("low_rating_detail_seller_service"),rating:e.seller_service,onRatingChange:this.handleRatingChange.bind(this,"SELLER"),size:26})),i.createElement("div",{className:ba},i.createElement(x.kG,{title:Ca("low_rating_detail_logistic_service"),rating:e.delivery_service,onRatingChange:this.handleRatingChange.bind(this,"DELIVERY"),size:26}))))}}const Ra=Sa,ka="_3C1aoU",Na="U-g0QB",Ma="bZja-w";function Oa(){return Oa=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(e[i]=a[i])}return e},Oa.apply(this,arguments)}const{t:Ta}=n.I18n,Ia=[],La={product_quality:0,seller_service:0,delivery_service:0};class Aa extends i.PureComponent{constructor(e){super(e),this._ratingHandlers=[],this.bannerHeight=0,this.handleImageReadyStateChange=e=>{this.setState({isImageReady:e.ready},this.props.forceFormUpdate)},this.handleReadyStateChange=()=>{this.props.forceFormUpdate()},this.getFilteredItems=()=>this.props.items||Ia,this.getRatingTemplateTags=()=>[],this.getData=()=>{const e=this.props.items.length,t=[];for(let a=0;a<e;a++)if(this._ratingHandlers[a]){const e=this._ratingHandlers[a].getData();e&&t.push(e)}return{seller_service:this.state.detailed_rating.seller_service,delivery_service:this.state.detailed_rating.delivery_service,rate_items_data:t}},this.handleRatingDetailChangeService=e=>{this.props.updateSellerService(e),this.props.forceFormUpdate(),this.setState({detailed_rating:e})},this.isReady=()=>{const{rate_items_data:e}=this.getData();return this.props.items.length===e.length&&this.state.isImageReady},this.clearMediaTimeout=()=>{Object.values(this._ratingHandlers).forEach((e=>{null==e||e.clearMediaTimeout()}))},this.isShowCriteriaBottom=()=>{const{limitValidationMap:e}=this.props,t=e&&Object.values(e)[0].limits_info;return{passItemArray:e&&Object.keys(e).filter((t=>e[t].passed)),coinLimitSetting:t}},this.isShowBanner=()=>{const{ratingMeta:e,categoryCoinList:t}=this.props,{passItemArray:a}=this.isShowCriteriaBottom(),{pic_and_video:i}=be(0,t,a);return!!((!a||a&&a.length>0)&&i>0)},this.getBannerHeight=e=>{this.bannerHeight=e},this.scrollToBottom=()=>{const e=document.getElementById("wrapper");e&&e.scrollIntoView()};const{ratingMeta:t}=this.props;this.state={isImageReady:!0,detailed_rating:Oa({},null!=t&&t.default_rating_star?{product_quality:t.default_rating_star,seller_service:t.default_rating_star,delivery_service:t.default_rating_star}:La)}}componentDidMount(){const{isShowCoinBanner:e}=this.props;this.props.updateSellerService(this.state.detailed_rating),e&&e(this.isShowBanner(),this.bannerHeight)}render(){const{limitValidationMap:e,shopId:t,orderId:a}=this.props,o=this.getFilteredItems(),{commentCheckMap:n,deleteCommentCheckItemId:r,collectLocationMap:s}=this.props,d=o.length,_=this.isShowBanner(),{coinLimitSetting:c}=this.isShowCriteriaBottom(),l=Oa({},this.props.ratingMeta,{shopId:t,orderId:a});return i.createElement(i.Fragment,null,_?i.createElement(va,{isMultiple:o.length>1,orderLen:o.length,meta:l,categoryCoinList:this.props.categoryCoinList,defaultVideoReview:this.props.defaultVideoReview,getBannerHeight:this.getBannerHeight,coinLimitSetting:c,enableRatingCreationUIRevamp:this.props.enableRatingCreationUIRevamp}):null,o.map(((t,a)=>{var o,_;return s&&s(t.itemid,a+1),i.createElement(oa,{key:a,ref:e=>{this._ratingHandlers[a]=e},item:t,rating:null,ratingMeta:this.props.ratingMeta,detailedRating:this.state.detailed_rating,onReadyStateChange:this.handleReadyStateChange,onImageReadyStateChange:this.handleImageReadyStateChange,showBottomBorder:a<d-1,orderId:this.props.orderId,userId:this.props.userId,categoryCoin:null==(o=this.props.categoryCoinList)?void 0:o[t.itemid],isItemValidationCheckPass:(!e||(null==(_=e[t.itemid])?void 0:_.passed))&&this.props.ratingMeta&&this.props.ratingMeta.coins_earned>0,username:this.props.username,defaultRatingAnonymous:this.props.defaultRatingAnonymous,defaultVideoReview:this.props.defaultVideoReview,enableRatingCreationUIRevamp:this.props.enableRatingCreationUIRevamp,defaultRatingReviewTemplate:this.props.defaultRatingReviewTemplate,collectMediaCheck:this.props.collectMediaCheck,defaultRatingMediaQualityCheck:this.props.defaultRatingMediaQualityCheck,collectAllMedia:this.props.collectAllMedia,cancelCollectMedia:this.props.cancelCollectMedia,commentCheckMap:n,deleteCommentCheckItemId:r,defaultRatingCommentCheck:this.props.defaultRatingCommentCheck,showDialogNow:this.props.showDialogNow,collectCoinItem:this.props.collectCoinItem,cannotRedShow:this.props.cannotRedShow})})),i.createElement("div",{id:"wrapper"},i.createElement(Ra,{detailed_rating:this.state.detailed_rating,onRatingChange:this.handleRatingDetailChangeService})),!_&&i.createElement("div",{className:"EYYqg6"},i.createElement("span",null,Ta("coins_panel_title")),i.createElement(ha,{direction:"bottom",meta:l,categoryCoinList:this.props.categoryCoinList,coinLimitSetting:c})))}}function xa(){return xa=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(e[i]=a[i])}return e},xa.apply(this,arguments)}const{t:Da}=n.I18n,Ba={seller_service:0,delivery_service:0};class ja extends i.Component{constructor(e){var t,a,i,o;super(e),this._ratingHandler=null,this.originTemplateTags=[],this.getLatestTags=()=>{const{rating:e}=this.state;this.props.defaultRatingReviewTemplate&&(this.setState({loading:!0}),J.Cm.getItemRating({cmtid:e.cmtid,is_seller:0,shopid:e.shopid}).then((e=>{const{data:t}=e;this.setState({rating:xa({},this.state.rating,{template_tags:t.template_tags||[]}),loading:!1,error:!1})})).catch((()=>{this.setState({loading:!1,error:!0})})))},this.handleImageReadyStateChange=e=>{this.setState({isImageReady:e.ready},this.props.forceFormUpdate)},this.handleReadyStateChange=()=>{this.props.forceFormUpdate()},this.handleRatingDetailChange=()=>{this.props.forceFormUpdate()},this.handleRatingDetailChangeService=e=>{this.props.updateSellerService(e),this.props.forceFormUpdate(),this.setState({detailed_rating:e})},this.setRatingHandler=e=>{this._ratingHandler=e},this.getData=()=>this._ratingHandler?this._ratingHandler.getEditData():null,this.getRatingTemplateTags=()=>this.state.rating.template_tags||[],this.isReady=()=>this.state.isImageReady,this.scrollToBottom=()=>{const e=document.getElementById("wrapper");e&&e.scrollIntoView()},this.clearMediaTimeout=()=>{var e;null==(e=this._ratingHandler)||e.clearMediaTimeout()};const{ratingMeta:n}=this.props;this.state={isImageReady:!0,loading:!1,error:!1,rating:xa({},e.rating),detailed_rating:xa({},null!=(t=e.rating)&&null!=(a=t.detailed_rating)&&a.delivery_service&&null!=(i=e.rating)&&null!=(o=i.detailed_rating)&&o.seller_service?e.rating.detailed_rating:n?{seller_service:n.default_rating_star,delivery_service:n.default_rating_star}:Ba)},this.originTemplateTags=e.rating.template_tags||[]}componentDidMount(){this.props.forceFormUpdate(),this.getLatestTags(),this.props.updateSellerService(this.state.detailed_rating)}renderNewLoading(){return i.createElement(h.Z,{hideOverlay:!0,show:!0})}renderError(){return i.createElement("div",{className:ka},i.createElement("span",{className:Na},Da("rating_loading_failed")),i.createElement("div",{className:Ma,onClick:this.getLatestTags},Da("rating_btn_name_retry")))}render(){const{rating:e,loading:t,error:a}=this.state,{ratingMeta:o,orderId:n,userId:r}=this.props;return t?this.renderNewLoading():a?this.renderError():i.createElement("div",{className:"rating-modal-edit-item__container"},i.createElement(oa,{ref:this.setRatingHandler,item:e.product_items&&e.product_items[0],rating:e,ratingMeta:o,originTemplateTags:this.originTemplateTags,onReadyStateChange:this.handleReadyStateChange,onImageReadyStateChange:this.handleImageReadyStateChange,detailedRating:this.state.detailed_rating,orderId:n,userId:r,username:this.props.username,defaultRatingAnonymous:this.props.defaultRatingAnonymous,defaultVideoReview:this.props.defaultVideoReview,enableRatingCreationUIRevamp:this.props.enableRatingCreationUIRevamp,defaultRatingReviewTemplate:this.props.defaultRatingReviewTemplate,isUpdating:!0,collectMediaCheck:this.props.collectMediaCheck,defaultRatingMediaQualityCheck:this.props.defaultRatingMediaQualityCheck,collectAllMedia:this.props.collectAllMedia,cancelCollectMedia:this.props.cancelCollectMedia,commentCheckMap:this.props.commentCheckMap,deleteCommentCheckItemId:this.props.deleteCommentCheckItemId,defaultRatingCommentCheck:this.props.defaultRatingCommentCheck,showDialogNow:this.props.showDialogNow}),i.createElement("div",{id:"wrapper"},i.createElement(Ra,{detailed_rating:this.state.detailed_rating,onRatingChange:this.handleRatingDetailChangeService})))}}const Pa={popup:"C6b5v1",icon:"Ojnwnu",title:"hBcfMh"},{t:qa}=n.I18n;function Ua({coinsAwarded:e}){return o().createElement("div",{className:Pa.popup},o().createElement(na.Z,{className:Pa.icon}),o().createElement("div",{className:Pa.title},qa("pr_label_rating_coins_awarded",{coins_earned:e})))}function Wa(){return Wa=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(e[i]=a[i])}return e},Wa.apply(this,arguments)}const Fa=function(e){return o().createElement("svg",Wa({width:"54",height:"54",viewBox:"0 0 54 54",fill:"none"},e),o().createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M27 53C41.3594 53 53 41.3594 53 27C53 12.6406 41.3594 1 27 1C12.6406 1 1 12.6406 1 27C1 41.3594 12.6406 53 27 53Z",stroke:"#66CC00",strokeWidth:"2"}),o().createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M26.7985 36.098L40.3628 22.263C41.273 21.3528 41.1992 19.8032 40.198 18.802C39.1968 17.8008 37.6472 17.727 36.737 18.6372L24.7717 30.8413L17.263 24.0774C16.3528 23.1672 14.8032 23.241 13.802 24.2422C12.8008 25.2435 12.727 26.7931 13.6372 27.7033L23.2458 36.3588C24.156 37.269 25.7056 37.1952 26.7069 36.194C26.7383 36.1625 26.7689 36.1305 26.7985 36.098Z",fill:"#66CC00"}))},$a={popup:"NZsEu+",icon:"Jh6p7h",title:"LrAZsY"},{t:Va}=n.I18n;function Ja(e){const{text:t}=e;return o().createElement("div",{className:$a.popup},o().createElement(Fa,{className:$a.icon}),o().createElement("div",{className:$a.title},t||Va("pr_toast_rating_success")))}const Ha=a.p+"a02ade81006a12b6a5c4c2a2002b35bc.png",Ga={mask:"fgUihE",maskIE:"wL5oHJ",popup:"vH0uka",rotating:"LIAsM4"},Xa=48;function Qa(){const e=window.document.documentMode;return o().createElement("div",{className:e?Ga.maskIE:Ga.mask},o().createElement("div",{className:Ga.popup},o().createElement("img",{src:Ha,width:Xa,height:Xa})))}function Za(){return Za=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(e[i]=a[i])}return e},Za.apply(this,arguments)}const{t:za}=n.I18n,Ya={seller_service:0,delivery_service:0,product_quality:0};class Ka extends i.Component{constructor(e){super(e),this._ratingHandler=null,this.handleImageReadyStateChange=e=>{this.setState({isImageReady:e.ready},this.props.forceFormUpdate)},this.handleReadyStateChange=()=>{this.props.forceFormUpdate()},this.handleRatingDetailChange=()=>{this.props.forceFormUpdate()},this.setRatingHandler=e=>{this._ratingHandler=e},this.getRatingTemplateTags=()=>[],this.getData=()=>this._ratingHandler?this._ratingHandler.getEditData():null,this.isReady=()=>{var e,t;const a=this.getData();return this.state.isImageReady&&((null==a?void 0:a.comment)||(null==a||null==(e=a.photos)?void 0:e.length)||(null==a||null==(t=a.videos)?void 0:t.length))},this.scrollToBottom=()=>{const e=document.getElementById("wrapper");e&&e.scrollIntoView()},this.clearMediaTimeout=()=>{var e;null==(e=this._ratingHandler)||e.clearMediaTimeout()},this.handleRatingChange=(e,t)=>{this.setState({detailed_rating:Za({},this.state.detailed_rating,{[e]:t})})},this.state={isImageReady:!0,loading:!1,rating:Za({},e.rating),detailed_rating:e.rating.detailed_rating||Ya}}componentDidMount(){this.props.forceFormUpdate(),this.props.updateSellerService(this.state.detailed_rating)}renderNewLoading(){return i.createElement(h.Z,{hideOverlay:!0,show:!0})}render(){const{rating:e,loading:t}=this.state,{ratingMeta:a,orderId:o,userId:n}=this.props;return t?this.renderNewLoading():i.createElement("div",{className:"rating-modal-edit-item__container"},i.createElement(oa,{ref:this.setRatingHandler,item:e.product_items&&e.product_items[0],rating:e,ratingMeta:a,originTemplateTags:[],onReadyStateChange:this.handleReadyStateChange,onImageReadyStateChange:this.handleImageReadyStateChange,detailedRating:this.state.detailed_rating,orderId:o,userId:n,username:this.props.username,defaultRatingAnonymous:this.props.defaultRatingAnonymous,defaultVideoReview:this.props.defaultVideoReview,enableRatingCreationUIRevamp:this.props.enableRatingCreationUIRevamp,defaultRatingReviewTemplate:this.props.defaultRatingReviewTemplate,isUpdating:!0,collectMediaCheck:this.props.collectMediaCheck,defaultRatingMediaQualityCheck:this.props.defaultRatingMediaQualityCheck,collectAllMedia:this.props.collectAllMedia,cancelCollectMedia:this.props.cancelCollectMedia,commentCheckMap:this.props.commentCheckMap,deleteCommentCheckItemId:this.props.deleteCommentCheckItemId,defaultRatingCommentCheck:this.props.defaultRatingCommentCheck,showDialogNow:this.props.showDialogNow,isFollowUp:!0}))}}var ei=a(1082);function ti(){return ti=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(e[i]=a[i])}return e},ti.apply(this,arguments)}const{t:ai}=n.I18n;let ii=function(e){return e[e.VIEW_MODE=1]="VIEW_MODE",e[e.RATE_MODE=2]="RATE_MODE",e[e.EDIT_MODE=3]="EDIT_MODE",e[e.VIEW_BUYER_RATING_MODE=4]="VIEW_BUYER_RATING_MODE",e[e.FOLLOW_UP=5]="FOLLOW_UP",e}({});var oi=function(e){return e[e.EX_LOW=-2]="EX_LOW",e[e.LOW=-1]="LOW",e[e.NORMAL=0]="NORMAL",e}(oi||{}),ni=function(e){return e[e.EX_LOW=-2]="EX_LOW",e[e.LOW=-1]="LOW",e[e.NORMAL=0]="NORMAL",e}(ni||{}),ri=function(e){return e.SELLER_SERVICE="seller_service",e.DELIVERY_SERVICE="delivery_service",e.BOTH_SERVICE="delivery_service and seller_service",e}(ri||{});const si=[];class di extends i.Component{constructor(e){var t;super(e),t=this,this._contentContainer=null,this._modalRef=null,this._itemToMediasMap={},this._allMediaCheck={},this.loadingNow=!1,this.commentCheckMap={},this.commentQuality=0,this.waitCommentLoading=!1,this.showCoinBanner=!1,this.showCoinHeight=0,this.itemIdLocationMap={},this.getCoinItemList={},this.scrollToBottom=i.createRef(),this.detailed_rating={delivery_service:0,seller_service:0,product_quality:0},this.collectCoinItem=(e,t)=>{this.getCoinItemList[e]=t},this.formattedRatings=e=>(e||[]).map((e=>{const t=e.author_pic||e.user_pic||e.author_portrait||"",a=e.author_name||e.username||e.author_username||"";return ti({},e,{author_portrait:t,author_username:e.anonymous?ue(a):a,author_name:a})})),this.updateDetailedRating=e=>{const{isServiceEvaluationCanEmpty:t,isFollowUp:a}=this.props;this.detailed_rating=e,e.delivery_service&&e.seller_service||t||a?this.setState({scrollBottom:!1}):e.delivery_service&&!e.seller_service?this.setState({warningState:ri.SELLER_SERVICE}):!e.delivery_service&&e.seller_service?this.setState({warningState:ri.DELIVERY_SERVICE}):e.delivery_service||e.seller_service||this.setState({warningState:ri.BOTH_SERVICE})},this.getTime=async function(){const e=await async function(){try{const e=await fetch(`https://rating.${"AR"!==de?pe:le[_e]+"shopee.com.ar"}/api/v1/comment/rating_submit_wait_time`,{credentials:"include"});return await e.json()}catch(e){return{code:-1}}}();0===e.code&&t.setState({mediaCheckWaitTime:e.data.wait_time})},this.setModalRef=e=>{this._modalRef=e},this.renderViewRating=()=>i.createElement(we,{ratings:this.state.ratings||[],handleOpenEditRating:this.handleOpenEditRating,updateRatingAfterSetAnonymous:this.updateRatingAfterSetAnonymous,defaultRatingReviewTemplate:this.props.defaultRatingReviewTemplate,defaultRatingShowEditButton:this.props.defaultRatingShowEdit,isFollowUp:this.props.isFollowUp}),this.updateRatingAfterSetAnonymous=e=>{const t=this.state.ratings[e];if(!t)return;this.reloadOrderAfterRating();const a=[...this.state.ratings],i=t.author_name||t.username||t.author_username||"";a[e]=ti({},t,{anonymous:!t.anonymous,author_username:t.anonymous?i:ue(i)}),this.setState({ratings:a})},this.getTitle=()=>{const{mode:e,isFollowUp:t}=this.props,{editingRatingIndex:a,ratings:i}=this.state,o=i[a];switch(e){case ii.EDIT_MODE:case ii.RATE_MODE:return ai("pr_label_rate_product");case ii.FOLLOW_UP:return ai("add_updates");case ii.VIEW_MODE:return this.state.editing?t&&null!=o&&o.can_follow_up?ai("add_updates"):ai("pr_label_rate_product"):ai("pr_label_shop_rating");case ii.VIEW_BUYER_RATING_MODE:return ai("pr_label_buyer_rating")}return""},this.getModalBody=()=>{const{isFollowUp:e}=this.props,{editingRatingIndex:t,ratings:a}=this.state,i=a[t];let o=null;switch(this.props.mode){case ii.EDIT_MODE:o=this.renderEditing();break;case ii.FOLLOW_UP:o=this.renderAddFollowUp();break;case ii.RATE_MODE:o=this.state.isRatingLoading?this.renderNewLoading():this.state.getEditOrderDetailSucess?this.renderRating():this.renderError();break;case ii.VIEW_MODE:o=this.state.editing?e&&null!=i&&i.can_follow_up?this.renderAddFollowUp():this.renderEditing():this.renderViewRating();break;case ii.VIEW_BUYER_RATING_MODE:o=this.renderViewBuyerRating()}return o},this.handleOpenEditRating=e=>{this.setState({editing:!0,editingRatingIndex:e}),this.scrollToTopContentContainer()},this.backToView=()=>{this.setState({editing:!1}),this.clearTimeoutCheck(),this.scrollToTopContentContainer()},this.handleConfirm=()=>{var e;if(this.state.scrollBottom)return null==(e=this._modalRef)||e.scrollToBottom(),void this.setState({isConfirming:!1,showWaringPop:!0});this.setState({isConfirming:!0})},this.handleConfirmClose=()=>{this.setState({isConfirming:!1})},this.handleGoRating=()=>{this.setState({showWaringPop:!1})},this.getComments=(e,t)=>{const{defaultRatingReviewTemplate:a}=this.props;if(!a)return{comment:e?e.comment:"",template_tags:t};const i=e?e.template_tag_comments:{},o=[],n=e?e.comment:"";let r=!1;t.forEach((e=>{i[e]&&(o.push(`${e}:${i[e]}`),r=!0)}));const s=n?"\n\n":"";return{comment:o.length?[o.join("\n"),n].join(s):n,template_tags:r?t:[],has_template_tag:r}},this.handlePreCommit=()=>{const{mode:e}=this.props;this.setState({isConfirming:!1});const t=[ii.VIEW_MODE,ii.EDIT_MODE,ii.FOLLOW_UP].includes(this.props.mode)?this.props.ratings[this.state.editingRatingIndex]:this.props.rating;let a;const i=this._modalRef?this._modalRef.getData():null;var o,n;return a=e===ii.FOLLOW_UP?[]:this._modalRef?null==(o=(n=this._modalRef).getRatingTemplateTags)?void 0:o.call(n):[],{rating:t,ratingData:i,templateTags:a}},this.handleSubmitEditRating=async function(){const{rating:e,ratingData:a,templateTags:i}=t.handlePreCommit(),o=a;if(o&&o.comment&&"string"==typeof o.comment&&(o.comment=o.comment.trim()),t.setState({isLoading:!0}),!(await J.Cm.editRating({orderid:t.props.orderId,shopid:t.props.shopId,cmtid:e.cmtid,rate_items_data:o?[o]:[],api_version:2})).error&&[ii.VIEW_MODE,ii.EDIT_MODE].includes(t.props.mode)){var n,r,s;t._itemToMediasMap={};const{editingRatingIndex:d,ratings:_}=t.state,c=[..._],l=e.author_pic||e.user_pic||e.author_portrait||"";let p=e.author_name||e.username||e.author_username||"";t.props.mode===ii.EDIT_MODE&&(p=t.props.accountInfo.username);const u=a?o.anonymous:e.anonymous;c[d]=ti({},e,t.getComments(o,i),{detailed_rating:{product_quality:null==o||null==(n=o.detailed_rating)?void 0:n.product_quality,seller_service:(null==o||null==(r=o.detailed_rating)?void 0:r.seller_service)||t.detailed_rating.seller_service,delivery_service:(null==o||null==(s=o.detailed_rating)?void 0:s.delivery_service)||t.detailed_rating.delivery_service},images:o?o.photos:[],videos:o?o.videos:[],editable:2,tags:t.getTagsByIds(o?o.tagids:[]),anonymous:u,author_username:u?ue(p):p,author_portrait:l}),t.setState({ratings:c}),t.reloadOrderAfterRating(),t.setState({isLoading:!1}),t.backToView(),"myRating"===t.props.fromSource&&t.props.rateSuccessCallback&&(t.props.rateSuccessCallback(c[d]),t.closeRating())}else t.closeRating()},this.handleAddFollowUp=async function(){var e;const{rating:a,ratingData:o}=t.handlePreCommit(),n=o;n&&n.comment&&"string"==typeof n.comment&&(n.comment=n.comment.trim()),t.setState({isLoading:!0});const{cmtid:r,orderid:s,shopid:d,detailed_rating:_}=a,c=n.detailed_rating;if(_)for(const t in n.detailed_rating){const e=t;n.detailed_rating[e]===_[e]&&c&&delete c[e]}const l=await J.Cm.addFollowUp({cmt_id:r,order_id:s,shop_id:d,comment:n.comment,photos:null==(e=n.photos)?void 0:e.map((e=>({image_id:e}))),videos:n.videos,detailed_rating:c});if(null!=l&&l.error)t.closeRating();else{var p,u,m,g;t.context.showPopup(i.createElement(Ja,{text:ai("followup_successfully_submitted")}),!1,null,null,!0);const{editingRatingIndex:e,ratings:o}=t.state,r=[...o],s=(null==n||null==(p=n.detailed_rating)?void 0:p.product_quality)||t.detailed_rating.product_quality;r[e]=ti({},a,{detailed_rating:{product_quality:s,seller_service:(null==n||null==(u=n.detailed_rating)?void 0:u.seller_service)||t.detailed_rating.seller_service,delivery_service:(null==n||null==(m=n.detailed_rating)?void 0:m.delivery_service)||t.detailed_rating.delivery_service},follow_up:{comment:null==n?void 0:n.comment,videos:n?n.videos:[],images:n?null==n||null==(g=n.photos)?void 0:g.map((e=>({image_id:e,cover_image_id:e}))):[],after_days:1,ctime:Date.now()},can_follow_up:!1,rating_star:s||0}),t.setState({ratings:r}),t.reloadOrderAfterRating(),t.setState({isLoading:!1}),t.backToView(),t.props.rateSuccessCallback&&t.props.rateSuccessCallback(r[e]),t.closeRating()}},this.getTagsByIds=e=>{let t=[];const a=this.state.ratingMeta?this.state.ratingMeta.tags:[];return a&&a.forEach((a=>{t=t.concat(a.tags.filter((t=>-1!==e.indexOf(t.tag_id))))})),t},this.handleSubmitRating=async function(){if(!t._modalRef)return;const{seller_service:e,delivery_service:a,rate_items_data:o}=t._modalRef.getData();var n;if(t.state.scrollBottom)return null==(n=t._modalRef)||n.scrollToBottom(),void t.setState({showWaringPop:!0});o instanceof Array&&o.forEach((e=>{"string"==typeof e.comment&&(e.comment=e.comment.trim())})),t.setState({isLoading:!0});const r=await J.Cm.addRating({shopid:t.props.shopId,orderid:t.props.orderId,objectid:t.props.useDetect?1:0,seller_service:e,delivery_service:a,rate_items_data:o,is_media_gray_user:t.props.defaultRatingMediaQualityCheck,apply_coin_limits_validate:!0,api_version:2});if(r.error)if(r.error===b.Z.EXIST)t.setState({isLoading:!1}),t.closeRating(),t.context.showPopup(i.createElement(y.OK,{text:ai("pr_alert_please_reload_view_rating_page")}),!0,null,null,!0);else{if(18900004===r.error)return window.alert("The template tags are invalid"),void t.closeRating();t.setState({isLoading:!1})}else{if(r.data.extra_info&&!1===r.data.extra_info.coin_succ)t.setState({isLoading:!1}),t.context.showPopup(i.createElement(y.a$,{message:ai("msg_coins_error"),showCancel:!1,confirmText:"OK"}),!0,null,null,!0);else{t._itemToMediasMap={};const e=r.data.coins_earned;t.reloadOrderAfterRating(),t.setState({isLoading:!1}),t.closeRating();const a=e>0;t.context.showPopup(a?i.createElement(Ua,{coinsAwarded:e}):i.createElement(Ja,null),a,null,null,!0)}"myRating"===t.props.fromSource&&t.props.rateSuccessCallback&&t.props.rateSuccessCallback()}},this.reloadOrderAfterRating=()=>{var e,t;null==(e=(t=this.props).reloadOrder)||e.call(t)},this.checkSubmit=()=>{const{isFollowUp:e}=this.props;this.props.mode===ii.VIEW_MODE?this.state.isShowMediaErr===oi.EX_LOW||this.state.isShowMediaErr===ni.EX_LOW?this.setState({isShowMediaErr:oi.NORMAL,showDialogNow:!1}):this.state.isShowMediaErr!==oi.LOW&&this.state.isShowMediaErr!==ni.LOW||this.setState({isShowMediaErr:oi.NORMAL,showDialogNow:!1},(()=>{this.state.editing?e?this.handleAddFollowUp():this.handleSubmitEditRating():this.closeRating()})):this.props.mode===ii.RATE_MODE&&(this.state.isShowMediaErr===oi.EX_LOW||this.state.isShowMediaErr===ni.EX_LOW?this.setState({isShowMediaErr:oi.NORMAL,showDialogNow:!1}):this.state.isShowMediaErr!==oi.LOW&&this.state.isShowMediaErr!==ni.LOW||this.setState({isShowMediaErr:oi.NORMAL,showDialogNow:!1},(()=>{this.handleSubmitRating()})))},this.collectMediaCheck=(e,t)=>{this._itemToMediasMap[e]=t},this.collectAllMedia=e=>{this._allMediaCheck[e]=!0},this.cancelCollectMedia=e=>{const{defaultRatingCommentCheck:t}=this.props;delete this._allMediaCheck[e];const a=Object.keys(this._allMediaCheck).length,i=Object.keys(this._itemToMediasMap).filter((e=>-3===this._itemToMediasMap[e].type));0===a&&(!t||i.length<=0)&&this.loadingNow&&(this.waitCommentLoading||this.setState({isLoading:!1},(()=>{clearTimeout(this.timeoutCheck),this.loadingNow=!1,t?this.commentMediaCheckShowDialog():this.checkMediaSubmit()})))},this.clearTimeoutCheck=()=>{var e;null==(e=this._modalRef)||e.clearMediaTimeout()},this.preCheck=async function(){Object.keys(t._allMediaCheck).length>0?(t.loadingNow=!0,t.setState({isLoading:!0},(()=>{t.timeoutCheck=setTimeout((()=>{t.setState({isLoading:!1},(()=>{t.loadingNow=!1,t._allMediaCheck={},t.clearTimeoutCheck(),t.checkMediaSubmit()}))}),t.state.mediaCheckWaitTime)}))):(t._allMediaCheck={},t.clearTimeoutCheck(),t.checkMediaSubmit())},this.commentMediaCheckShowDialog=()=>{this.getHeight();const{mode:e}=this.props,{isOrderValidationCheckPass:t}=this.state,a=Object.keys(this._itemToMediasMap),i=a.filter((e=>-2===this._itemToMediasMap[e].type)),o=a.filter((e=>-1===this._itemToMediasMap[e].type)),n=i.length>0?oi.EX_LOW:o.length>0?oi.LOW:oi.NORMAL;this.commentQuality===ni.EX_LOW?n===oi.NORMAL?this.setState({isShowMediaErr:ni.EX_LOW,mediaCheckTitle:"",mediaCheckMessage:ai("tips_comment_only_dialog_elow"),showDialogNow:!0}):this.setState({isShowMediaErr:ni.EX_LOW,mediaCheckTitle:"",mediaCheckMessage:ai("tips_comment_media_check_dialog_exlow"),showDialogNow:!0}):this.commentQuality===ni.LOW?e===ii.VIEW_MODE?n===oi.NORMAL||n===oi.LOW?this.setState({isShowMediaErr:ni.LOW,mediaCheckTitle:ai("title_check_submit"),mediaCheckMessage:ai("tips_comment_check_dialog_low"),showDialogNow:!0}):n===oi.EX_LOW&&this.setState({isShowMediaErr:oi.EX_LOW,mediaCheckTitle:"",mediaCheckMessage:ai("tips_comment_media_check_dialog_exlow"),showDialogNow:!0}):n===oi.NORMAL?Object.values(this.getCoinItemList).filter((e=>!0===e)).length>0?this.setState({isShowMediaErr:ni.LOW,mediaCheckTitle:ai("title_check_submit"),mediaCheckMessage:ai(t?"tips_comment_only_dialog_low":"tips_comment_content_edit_low"),showDialogNow:!0}):this.setState({cannotRedShow:!0},(()=>{this.handleSubmitRating()})):n===oi.LOW?Object.values(this.getCoinItemList).filter((e=>!0===e)).length>0?this.setState({isShowMediaErr:ni.LOW,mediaCheckTitle:ai("title_check_submit"),mediaCheckMessage:ai(t?"tips_comment_media_new_check_dialog_low":"tips_comment_media_check_dialog_exlow"),showDialogNow:!0}):this.setState({cannotRedShow:!0},(()=>{this.handleSubmitRating()})):n===oi.EX_LOW&&this.setState({isShowMediaErr:oi.EX_LOW,mediaCheckTitle:"",mediaCheckMessage:ai("tips_comment_media_check_dialog_exlow"),showDialogNow:!0}):this.checkMediaSubmitNew()},this.checkMediaSubmit=()=>{const e=Object.keys(this._itemToMediasMap),t=e.filter((e=>-2===this._itemToMediasMap[e].type)),a=e.filter((e=>-1===this._itemToMediasMap[e].type));t.length?t.length>1?this.setState({isShowMediaErr:oi.EX_LOW,mediaCheckTitle:"",mediaCheckMessage:ai("msg_medias_quality_ex_more"),showDialogNow:!0}):this.setState({isShowMediaErr:oi.EX_LOW,mediaCheckTitle:"",mediaCheckMessage:ye(this._itemToMediasMap[t[0]]),showDialogNow:!0}):a.length?this.props.mode===ii.VIEW_MODE?this.setState({isShowMediaErr:oi.LOW,mediaCheckTitle:ai("pr_alert_submit_rating"),mediaCheckMessage:ai("msg_medias_quality_low_edit"),showDialogNow:!0}):Object.values(this.getCoinItemList).filter((e=>!0===e)).length>0?this.setState({isShowMediaErr:oi.LOW,mediaCheckTitle:ai("title_check_submit"),mediaCheckMessage:ai("msg_medias_quality_low_more"),showDialogNow:!0}):this.setState({cannotRedShow:!0},(()=>{this.handleSubmitRating()})):this.setState({showDialogNow:!0},(()=>{if(this.props.mode===ii.VIEW_MODE){if(!this.state.editing)return void this.closeRating();this.handleConfirm()}else this.props.mode===ii.RATE_MODE&&this.handleSubmitRating()}))},this.checkMediaSubmitNew=()=>{const e=Object.keys(this._itemToMediasMap),t=e.filter((e=>-2===this._itemToMediasMap[e].type)),a=e.filter((e=>-1===this._itemToMediasMap[e].type));if(t.length>0){const e=[];Object.values(this._itemToMediasMap).forEach((t=>{const a=(null==t?void 0:t.collectObj)||{};-2===(null==t?void 0:t.type)&&Object.keys(a).forEach((t=>{null!=a&&a[t]&&e.push(t)}))})),this.setState({isShowMediaErr:oi.EX_LOW,mediaCheckTitle:"",mediaCheckMessage:ve(e,-2,this.state.isOrderValidationCheckPass),showDialogNow:!0})}else if(a.length)if(this.props.mode===ii.VIEW_MODE)this.setState({isShowMediaErr:oi.LOW,mediaCheckTitle:ai("title_check_submit"),mediaCheckMessage:ai("tips_comment_check_dialog_low"),showDialogNow:!0});else if(Object.values(this.getCoinItemList).filter((e=>!0===e)).length>0){const e=[];Object.values(this._itemToMediasMap).forEach((t=>{const a=(null==t?void 0:t.collectObj)||{};-1===(null==t?void 0:t.type)&&Object.keys(a).forEach((t=>{null!=a&&a[t]&&e.push(t)}))})),this.setState({isShowMediaErr:oi.LOW,mediaCheckTitle:ai("title_check_submit"),mediaCheckMessage:ve(e,-1,this.state.isOrderValidationCheckPass),showDialogNow:!0})}else this.setState({cannotRedShow:!0},(()=>{this.handleSubmitRating()}));else this.setState({isShowMediaErr:oi.NORMAL,showDialogNow:!0},(()=>{if(this.props.mode===ii.VIEW_MODE){if(!this.state.editing)return void this.closeRating();this.handleConfirm()}else this.props.mode===ii.RATE_MODE&&this.handleSubmitRating()}))},this.deleteCommentCheckItemId=e=>{this.commentCheckMap[Number(e)]&&delete this.commentCheckMap[Number(e)]},this.getHeight=()=>{const e=[],t=document.getElementsByClassName("rating-modal-handler__container");for(let n=0;n<t.length;n++)e.push(t[n].clientHeight);const a=document.getElementsByClassName("shopee-popup-form__main"),i=this.getFirstLocation();let o=0;i&&i>1&&e.slice(0,i-1).forEach((e=>{o+=e})),a[0].scrollTo({top:this.showCoinBanner?o+this.showCoinHeight:o,behavior:"smooth"})},this.getFirstLocation=()=>{let e=0;return Object.keys(this._itemToMediasMap).forEach((t=>{var a,i;-2!==this._itemToMediasMap[t].type&&-1!==this._itemToMediasMap[t].type||(e=0===e?(null==(a=this.itemIdLocationMap)?void 0:a[t])||0:Math.min(e,(null==(i=this.itemIdLocationMap)?void 0:i[t])||1))})),Object.keys(this.commentCheckMap).forEach((t=>{var a,i,o,n,r,s;(null==(a=this.commentCheckMap)||null==(i=a[Number(t)])?void 0:i.total)!==ni.EX_LOW&&(null==(o=this.commentCheckMap)||null==(n=o[Number(t)])?void 0:n.total)!==ni.LOW||(e=0===e?(null==(r=this.itemIdLocationMap)?void 0:r[t])||0:Math.min(e,(null==(s=this.itemIdLocationMap)?void 0:s[t])||1))})),e},this.isShowCoinBanner=(e,t)=>{this.showCoinBanner=e,this.showCoinHeight=t},this.collectLocationMap=(e,t)=>{this.itemIdLocationMap[e]=t},this.commentCheckNoWait=()=>{var e,t;const{orderId:a,mode:i}=this.props,o=[];let n,r=[];i===ii.VIEW_MODE?this._modalRef&&null!==this._modalRef.getData()?r.push(this._modalRef.getData()):r=[]:r=this._modalRef&&(null==(e=this._modalRef)||null==(t=e.getData())?void 0:t.rate_items_data)||[],r.length>0&&r.forEach((e=>{(e.comment||Object.values(e.template_tag_comments).length>0)&&(n={itemid:e.itemid,comments:[]},e.comment&&zt(e.comment)&&n.comments.push(zt(e.comment)),n.comments=n.comments.concat(Object.values(e.template_tag_comments).filter((e=>""!==e))),n.comments.length>0&&o.push(n))}));const s=Object.keys(this._allMediaCheck).length,d=Object.keys(this._itemToMediasMap).filter((e=>-3===this._itemToMediasMap[e].type));if(o.length>0||d.length>0){const e={data:o,orderid:a};this.loadingNow=!0,this.waitCommentLoading=!0,this.setState({isLoading:!0},(()=>{this.timeoutCheck=setTimeout((()=>{this.setState({isLoading:!1},(()=>{this.loadingNow=!1,this._allMediaCheck={},this.clearTimeoutCheck(),this.waitCommentLoading&&(this.waitCommentLoading=!1,this.commentCheckMap={},this.commentQuality=ni.NORMAL),this.commentMediaCheckShowDialog()}))}),this.state.mediaCheckWaitTime)})),fe(e).then((e=>{if(this.loadingNow&&this.waitCommentLoading)if(Object.keys(this._allMediaCheck).length>0||d.length>0)if(this.waitCommentLoading=!1,0===(null==e?void 0:e.error)){var t;const a={};let i=0,o=0;null==e||null==(t=e.data)||t.forEach((e=>{a[Number(e.itemid)]=e.score})),this.commentCheckMap=a,Object.keys(this.commentCheckMap).forEach((e=>{var t,a,n,r;(null==(t=this.commentCheckMap)||null==(a=t[Number(e)])?void 0:a.total)===ni.EX_LOW?i++:(null==(n=this.commentCheckMap)||null==(r=n[Number(e)])?void 0:r.total)===ni.LOW&&o++})),this.commentQuality=i>0?ni.EX_LOW:o>0?ni.LOW:ni.NORMAL}else this.commentQuality=ni.NORMAL,this.commentCheckMap={};else if(this.timeoutCheck&&clearTimeout(this.timeoutCheck),this.waitCommentLoading=!1,0===(null==e?void 0:e.error)){var a;const t={};let i=0,o=0;null==e||null==(a=e.data)||a.forEach((e=>{t[Number(e.itemid)]=e.score})),this.commentCheckMap=t,Object.keys(this.commentCheckMap).forEach((e=>{var t,a,n,r;(null==(t=this.commentCheckMap)||null==(a=t[Number(e)])?void 0:a.total)===ni.EX_LOW?i++:(null==(n=this.commentCheckMap)||null==(r=n[Number(e)])?void 0:r.total)===ni.LOW&&o++})),this.commentQuality=i>0?ni.EX_LOW:o>0?ni.LOW:ni.NORMAL,this.setState({isLoading:!1},(()=>{this.loadingNow=!1,this.clearTimeoutCheck(),this.commentMediaCheckShowDialog()}))}else this.commentQuality=ni.NORMAL,this.commentCheckMap={},this.setState({isLoading:!1},(()=>{this.clearTimeoutCheck(),this.commentMediaCheckShowDialog()}))})).catch((e=>{this.loadingNow&&this.waitCommentLoading&&(Object.keys(this._allMediaCheck).length>0||d.length>0?(this.waitCommentLoading=!1,this.commentCheckMap={},this.commentQuality=ni.NORMAL):(this.timeoutCheck&&clearTimeout(this.timeoutCheck),this.waitCommentLoading=!1,this.commentCheckMap={},this.commentQuality=ni.NORMAL,this.loadingNow=!1,this.setState({isLoading:!1},(()=>{this.clearTimeoutCheck(),this.commentMediaCheckShowDialog()}))))}))}else this.commentCheckMap={},this.commentQuality=ni.NORMAL,s>0||d.length>0?(this.loadingNow=!0,this.setState({isLoading:!0},(()=>{this.timeoutCheck=setTimeout((()=>{this.loadingNow=!1,this._allMediaCheck={},this.setState({isLoading:!1},(()=>{this.clearTimeoutCheck(),this.commentMediaCheckShowDialog()}))}),this.state.mediaCheckWaitTime)}))):(this.clearTimeoutCheck(),this.commentMediaCheckShowDialog())},this.commentCheck=async function(){var e;const{orderId:a}=t.props,i=t._modalRef?null==(e=t._modalRef.getData())?void 0:e.rate_items_data:[],o=[];let n;if(i.length>0&&i.forEach((e=>{(e.comment||Object.values(e.template_tag_comments).length>0)&&(n={order_id:a,item_id:e.itemid,comments:[]},e.comment&&n.comments.push(e.comment),n.comments=n.comments.concat(Object.values(e.template_tag_comments).filter((e=>""!==e))),o.push(n))})),o.length>0){const e=await fe({data:o});if(null!=e&&e.error||null==e||!e.response)t.commentQuality=ni.NORMAL,t.commentCheckMap={};else{const{error:a}=null==e?void 0:e.response;if(0===a){var r,s,d;const a={};let i=0,o=0;(null==e||null==(r=e.response)?void 0:r.data)&&(null==e||null==(s=e.response)||null==(d=s.data)||d.forEach((e=>{a[Number(e.item_id)]=e.score}))),t.commentCheckMap=a,Object.keys(t.commentCheckMap).forEach((e=>{t.commentCheckMap[Number(e)].total===ni.EX_LOW?i++:ni.LOW&&o++})),t.commentQuality=i>0?ni.EX_LOW:o>0?ni.LOW:ni.NORMAL}else t.commentCheckMap={},t.commentQuality=ni.NORMAL}}else t.commentCheckMap={},t.commentQuality=ni.NORMAL},this.handlePrimaryButtonClicked=()=>{switch(this.props.mode){case ii.VIEW_MODE:if(this.props.defaultRatingCommentCheck)this.commentCheckNoWait();else if(this.props.defaultRatingMediaQualityCheck)this.preCheck();else{if(!this.state.editing)return void this.closeRating();this.handleConfirm()}return;case ii.RATE_MODE:return void(this.props.defaultRatingCommentCheck?this.commentCheckNoWait():this.props.defaultRatingMediaQualityCheck?this.preCheck():this.handleSubmitRating());case ii.FOLLOW_UP:case ii.EDIT_MODE:return void this.handleConfirm();default:this.closeRating()}},this.closeRating=()=>{this.clearTimeoutCheck(),this.context.dismissPopup()},this.getReadyState=()=>{switch(this.props.mode){case ii.RATE_MODE:return!!this._modalRef&&this._modalRef.isReady();case ii.VIEW_MODE:return!this.state.editing||!this._modalRef||this._modalRef.isReady();default:return!this._modalRef||this._modalRef.isReady()}},this.scrollToTopContentContainer=()=>{this._contentContainer&&(this._contentContainer.scrollTop=0)};const a=this.formattedRatings(e.ratings);this.state={editing:!1,editingRatingIndex:0,ratings:a||[],ratingMeta:null,isLoading:!1,isConfirming:!1,items:[],getEditOrderDetailSucess:!0,isRatingLoading:!0,isShowMediaErr:0,isShowCancel:!0,mediaCheckTitle:"",mediaCheckMessage:"",mediaCheckWaitTime:3e3,categoryCoinList:void 0,limitValidationMap:void 0,isOrderValidationCheckPass:!0,showDialogNow:!1,cannotRedShow:!1,scrollBottom:!0,showWaringPop:!1,warningState:""}}getCategroyCoin(){const{orderId:e}=this.props;n.FetchUtils.fetchInfo(`/api/v4/order/get_rating_coin_reward_rule_list${(0,ei.Wc)({order_id:e,apply_coin_limits_validate:!0})}`).then((({response:e={}})=>{const{error:t,coin_reward_rule_list:a,coin_limits_validate_result:i}=e;if(!t){if(a&&a.length>0){const e={};a.forEach((t=>{e[t.item_id]=t.coin_reward_rule})),this.setState({categoryCoinList:e})}if(i&&i.length>0){const e={};i.forEach((({item_id:t,passed:a,limits_info:i})=>{e[t]={passed:a,limits_info:i}}));const t=Object.keys(e).some((t=>e[t].passed));this.setState({limitValidationMap:e,isOrderValidationCheckPass:t})}}}))}async componentDidMount(){const e=await J.Cm.getRatingMeta({});e.error||this.setState({ratingMeta:e.data}),this.getTime(),this.getCategroyCoin(),this.props.mode===ii.RATE_MODE&&this.getRateEditOrderDetail()}getRateEditOrderDetail(){this.setState({isRatingLoading:!0});const{orderId:e,shopId:t}=this.props;J.Cm.getRateOrderDetail({shopid:t,orderid:e}).then((e=>{const t=(0,l.Z)(e,["data","items"],[]);this.setState({items:t,isRatingLoading:!1,getEditOrderDetailSucess:t.length>0})})).catch((()=>{this.setState({isRatingLoading:!1,getEditOrderDetailSucess:!1})}))}renderViewBuyerRating(){return i.createElement(Le,{rating:this.props.rating})}renderEditing(){const e=this.state.ratings[this.state.editingRatingIndex],t=this.props.accountInfo.username;return i.createElement(ja,{rating:e,username:t||"",defaultRatingAnonymous:e.anonymous,defaultVideoReview:this.props.defaultVideoReview,enableRatingCreationUIRevamp:this.props.enableRatingCreationUIRevamp,defaultRatingReviewTemplate:this.props.defaultRatingReviewTemplate,orderId:this.props.orderId,userId:this.props.userId,ref:this.setModalRef,forceFormUpdate:()=>this.forceUpdate(),ratingMeta:this.state.ratingMeta,collectMediaCheck:this.collectMediaCheck,defaultRatingMediaQualityCheck:this.props.defaultRatingMediaQualityCheck,collectAllMedia:this.collectAllMedia,cancelCollectMedia:this.cancelCollectMedia,commentCheckMap:this.commentCheckMap,deleteCommentCheckItemId:this.deleteCommentCheckItemId,defaultRatingCommentCheck:this.props.defaultRatingCommentCheck,showDialogNow:this.state.showDialogNow,updateSellerService:e=>this.updateDetailedRating(e)})}renderRating(){const e=this.props.accountInfo.username;return i.createElement(Aa,{items:this.state.items||si,shopId:this.props.shopId,orderId:this.props.orderId,userId:this.props.userId,username:e||"",defaultRatingAnonymous:this.props.defaultRatingAnonymous,defaultVideoReview:this.props.defaultVideoReview,enableRatingCreationUIRevamp:this.props.enableRatingCreationUIRevamp,defaultRatingReviewTemplate:this.props.defaultRatingReviewTemplate,ref:this.setModalRef,forceFormUpdate:()=>this.forceUpdate(),ratingMeta:this.state.ratingMeta,collectMediaCheck:this.collectMediaCheck,defaultRatingMediaQualityCheck:this.props.defaultRatingMediaQualityCheck,collectAllMedia:this.collectAllMedia,cancelCollectMedia:this.cancelCollectMedia,categoryCoinList:this.state.categoryCoinList,limitValidationMap:this.state.limitValidationMap,commentCheckMap:this.commentCheckMap,deleteCommentCheckItemId:this.deleteCommentCheckItemId,defaultRatingCommentCheck:this.props.defaultRatingCommentCheck,isShowCoinBanner:this.isShowCoinBanner,collectLocationMap:this.collectLocationMap,showDialogNow:this.state.showDialogNow,collectCoinItem:this.collectCoinItem,cannotRedShow:this.state.cannotRedShow,updateSellerService:e=>this.updateDetailedRating(e)})}renderAddFollowUp(){const e=this.state.ratings[this.state.editingRatingIndex],t=this.props.accountInfo.username;return i.createElement(Ka,{rating:e,username:t||"",defaultRatingAnonymous:e.anonymous,defaultVideoReview:this.props.defaultVideoReview,enableRatingCreationUIRevamp:this.props.enableRatingCreationUIRevamp,defaultRatingReviewTemplate:this.props.defaultRatingReviewTemplate,orderId:this.props.orderId,userId:this.props.userId,ref:this.setModalRef,forceFormUpdate:()=>this.forceUpdate(),ratingMeta:this.state.ratingMeta,collectMediaCheck:this.collectMediaCheck,defaultRatingMediaQualityCheck:this.props.defaultRatingMediaQualityCheck,collectAllMedia:this.collectAllMedia,cancelCollectMedia:this.cancelCollectMedia,commentCheckMap:this.commentCheckMap,deleteCommentCheckItemId:this.deleteCommentCheckItemId,defaultRatingCommentCheck:this.props.defaultRatingCommentCheck,showDialogNow:this.state.showDialogNow,updateSellerService:e=>this.updateDetailedRating(e)})}renderNewLoading(){return i.createElement(h.Z,{hideOverlay:!0,show:!0})}renderError(){return i.createElement("div",{className:ka},i.createElement("span",{className:Na},ai("rating_loading_failed")),i.createElement("div",{className:Ma,onClick:this.getRateEditOrderDetail.bind(this)},ai("rating_btn_name_retry")))}render(){const{mode:e}=this.props,t=[ii.RATE_MODE,ii.EDIT_MODE,ii.FOLLOW_UP].includes(e)||this.state.editing,a=this.getReadyState();return i.createElement(r.Z,{title:this.getTitle(),textSubmit:ai("pr_order_purchase_label_submit"),textOk:ai("pr_order_purchase_label_ok"),textSubmitting:a?null:ai("label_submit"),cancelButtonText:ai("pr_order_purchase_label_cancel"),isSubmitting:!this.getReadyState(),showSubmitButton:this.props.defaultRatingShowSubmit&&t,showCancelButton:t,showOKButton:!t,onSubmit:this.handlePrimaryButtonClicked,onCancel:this.closeRating,onOK:this.closeRating,formExtraClassNames:"OU2Nj+",onBackButtonClick:this.state.editing?this.backToView:void 0},this.state.isLoading?i.createElement(Qa,null):null,this.state.showWaringPop?i.createElement(L,{goRating:this.handleGoRating,warningState:this.state.warningState}):null,this.state.isConfirming?i.createElement(O,{onSubmit:e===ii.FOLLOW_UP||e===ii.VIEW_MODE&&this.props.isFollowUp?this.handleAddFollowUp:this.handleSubmitEditRating,onCancel:this.handleConfirmClose}):null,this.state.isShowMediaErr===oi.EX_LOW||this.state.isShowMediaErr===oi.LOW||this.state.isShowMediaErr===ni.EX_LOW||this.state.isShowMediaErr===ni.LOW?i.createElement(k,{message:this.state.mediaCheckMessage,title:this.state.mediaCheckTitle,onSubmit:this.checkSubmit,submitText:this.state.isShowMediaErr===oi.EX_LOW||this.state.isShowMediaErr===ni.EX_LOW?ai("btn_back_to_edit"):ai("btn_submit_check"),showCancel:this.state.isShowMediaErr!==oi.EX_LOW&&this.state.isShowMediaErr!==ni.EX_LOW,cancelText:this.state.isShowMediaErr===oi.EX_LOW||this.state.isShowMediaErr===ni.EX_LOW?void 0:ai("btn_back_to_edit"),onCancel:()=>{this.setState({isShowMediaErr:oi.NORMAL,showDialogNow:!1})}}):null,this.getModalBody())}}di.contextTypes={dismissPopup:d().func,showPopup:d().func};const _i=(0,c.compose)(f.Pf,(0,g.u)({fetchOnMount:!0}),(0,_.connect)((e=>({defaultRatingAnonymous:(0,m.Au)(e.featureToggles,u.o0p,!1),defaultVideoReview:(0,m.Au)(e.featureToggles,u.ZXS,!1),defaultRatingReviewTemplate:(0,m.Au)(e.featureToggles,v.aJ,!1),defaultRatingMediaQualityCheck:(0,m.Au)(e.featureToggles,v.wc,!1),defaultRatingShowEdit:E(e.featureToggles,v.h4,!0),defaultRatingShowSubmit:E(e.featureToggles,v.te,!0),useDetect:(0,m.Au)(e.featureToggles,v.wr,!1),defaultRatingCommentCheck:(0,m.Au)(e.featureToggles,v.ge,!1),enableRatingCreationUIRevamp:(0,m.Au)(e.featureToggles,v.SQ,!0),isServiceEvaluationCanEmpty:(0,m.Au)(e.featureToggles,v.e5,!1),isFollowUp:(0,m.Au)(e.featureToggles,v.q3,!1)})),{}),p.withInjectReducer)((0,v.wl)(di));function ci(){return ci=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(e[i]=a[i])}return e},ci.apply(this,arguments)}const{t:li}=n.I18n;function pi({dismissPopup:e,orderId:t,userId:a,mode:n,reloadOrder:s}){const[d,_]=(0,i.useState)(null);return(0,i.useEffect)((()=>{(async()=>{const e=n===ii.VIEW_MODE?J.Cm.getOrderItemRatings:J.Cm.getOrderBuyerRatings;try{const a=await e({orderid:t});a&&a.data&&a.data.items&&a.data.items.length?_({data:a.data.items,error:0}):_({data:null,error:1})}catch(a){_({data:null,error:1})}})()}),[t,n]),d?null!=d&&d.error?o().createElement(r.Z,{textOk:li("pr_order_purchase_label_ok"),onSubmit:()=>{e()},showCancelButton:!1},"Get Data Failed"):n===ii.VIEW_MODE?o().createElement(_i,{mode:ii.VIEW_MODE,ratings:d.data,orderId:t,shopId:d.data[0].shopid,userId:a,reloadOrder:s}):o().createElement(_i,{mode:ii.VIEW_BUYER_RATING_MODE,rating:ci({},d.data[0],{author_pic:d.data[0].author_portrait,author_name:d.data[0].author_username}),userId:a,reloadOrder:s}):null}const{t:ui}=n.I18n;function mi({mode:e=ii.EDIT_MODE,dismissPopup:t,commentId:a,shopId:n,isSeller:s,orderId:d,userId:_,fromSource:c,callback:l}){const[p,u]=(0,i.useState)(null);return(0,i.useEffect)((()=>{(async()=>{try{const e=await J.Cm.getItemRating({cmtid:a,shopid:n,is_seller:Number(s)}),{data:t,error:i}=e;u(i?{data:null,error:1}:{data:t,error:0})}catch(e){u({data:null,error:1})}})()}),[a,n,s]),p?null!=p&&p.error?o().createElement(r.Z,{textSubmit:ui("pr_order_purchase_label_ok"),onSubmit:()=>{t()},showCancelButton:!1},"Get Data Failed"):o().createElement(_i,{mode:e,ratings:[null==p?void 0:p.data],userId:_,shopId:n,orderId:d,fromSource:c,rateSuccessCallback:l}):null}function gi({orderId:e,userId:t,shopId:a,showPopup:i,fromSource:n,callback:r}){i(o().createElement(_i,{mode:ii.RATE_MODE,orderId:e,shopId:a,userId:t,fromSource:n,rateSuccessCallback:r}))}function hi({commentId:e,orderId:t,userId:a,shopId:i,isSeller:n,showPopup:r,dismissPopup:s,fromSource:d,callback:_}){r(o().createElement(mi,{dismissPopup:s,commentId:e,shopId:i,isSeller:n,orderId:t,userId:a,fromSource:d,callback:_}))}function yi({commentId:e,orderId:t,userId:a,shopId:i,isSeller:n,showPopup:r,dismissPopup:s,fromSource:d,callback:_}){r(o().createElement(mi,{mode:ii.FOLLOW_UP,dismissPopup:s,commentId:e,shopId:i,isSeller:n,orderId:t,userId:a,fromSource:d,callback:_}))}const fi=e=>{const{mode:t,orderId:a,userId:i,shopId:n,dismissPopup:r,reloadOrder:s}=e;return t===ii.RATE_MODE?o().createElement(_i,{mode:t,orderId:a,userId:i,shopId:n,dismissPopup:r,reloadOrder:s}):o().createElement(pi,{mode:t,orderId:a,userId:i,dismissPopup:r,reloadOrder:s})}},1256:(e,t,a)=>{"use strict";a.d(t,{y9:()=>x,_X:()=>_t}),a(6943);var i=a(9913),o=a(3206);(0,o.n)("EDIT_RATING");const n=(0,o.n)("FETCH_ONE_ITEM_RATING"),r=(0,o.n)("FETCH_ITEM_RATING"),s=(0,o.n)("FETCH_ONE_SHOP_RATING"),d=(0,o.n)("FETCH_SHOP_RATING"),_=(0,o.n)("FETCH_ONE_BUYER_RATING"),c=(0,o.n)("FETCH_BUYER_RATING"),l=(0,o.n)("GET_RATING_META"),p=((0,o.n)("RATE_PRODUCT"),(0,o.n)("UPLOAD_IMAGE"),(0,o.n)("REPLY_RATING"),(0,o.n)("LIKE_RATING")),u=(0,o.n)("UNLIKE_RATING"),m=((0,o.n)("REPORT_RATING"),(0,o.n)("FETCH_SHOP_RATING_SUMMARY")),g=(0,o.n)("REPLY_ITEM_RATING_V2"),h=(0,o.n)("REPLY_BUYER_RATING_V2"),y=(0,o.n)("CLEAN_RATING_CACHE"),f=(0,o.n)("FETCH_ORDER_ITEM_RATINGS"),v=(0,o.n)("FETCH_ORDER_BUYER_RATINGS"),b=(0,o.n)("LIKE_SHOP_RATING"),E=(0,o.n)("UNLIKE_SHOP_RATING"),C=(0,o.n)("FETCH_RATEABLE_LIST"),w=(0,o.n)("FETCH_MY_RATING_LIST"),S=(0,o.n)("UPDATE_RATEABLE_LIST"),R=(0,o.n)("UPDATE_MY_REVIEW");var k=a(1082);const N={CANT_EDIT:0,CAN_EDIT:1,EDITED_AND_CANT_EDIT:2};let M=function(e){return e[e.SHOW=0]="SHOW",e[e.HIDE=1]="HIDE",e}({});const O=({shopId:e,itemId:t,filter:a=0,type:i=0,tag_filter:o="",variation_filters:n="",exclude_filter:r=M.HIDE,flag:s,filter_size:d,fold_filter:_})=>{const c={shop_id:e,item_id:t,flag:s,filter:a,type:i,tag_filter:o,variation_filters:n,filter_size:d,fold_filter:_,exclude_filter:r};return(0,k.Wc)(c)},T=({shopId:e,filter:t=1,type:a=0})=>{const i={shop_id:e,filter:t,type:a};return(0,k.Wc)(i)},I=({userId:e,filter:t=1,type:a=0})=>{const i={user_id:e,filter:t,type:a};return(0,k.Wc)(i)},L=e=>(0,k.Wc)(e),A=e=>(0,k.Wc)(e);function x(e){return e.editable===N.CAN_EDIT}function D(){return D=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(e[i]=a[i])}return e},D.apply(this,arguments)}(0,i.Z)({[r.REQUESTED]:(e,t)=>{const{payload:a}=t,i=O(a.query);return D({},e,{queryLoadingState:D({},e.queryLoadingState,{[i]:!0})})},[r.SUCCESS]:(e,t)=>{var a;const i=e.itemRatingSummary,{query:{offset:o,limit:n,exclude_filter:r,filter:s,type:d,tag_filter:_,filter_size:c,variation_filters:l},ratings:p,top_ratings:u,summary:m,hasMore:g,is_sip_item:h,show_local_review:y,browsing_ui:f,rcmd_algo:v,size_info_abt:b,downgradeSwitch:E,purchase_bar_abt:C}=t.payload;let w=p;const S=O(t.payload.query),R=e.itemRating[S];let k=[...R?R.ratings:[]];if((w||[]).forEach((e=>{k.includes(Number(e.cmtid))||k.push(Number(e.cmtid))})),u&&0===o&&!s&&!d&&!_&&!c&&!l){const e=u.map((e=>e.cmtid));k=[...e,...k.filter((t=>!e.includes(t)))],w=[...u,...w.filter((t=>!e.includes(t.cmtid)))]}const N=w.reduce(((e,t)=>(t.cmtid&&(e[t.cmtid]=t),e)),{});let M=null!=(a=null==m?void 0:m.rating_total)?a:0;return r&&(M=Math.max(M,(null==i?void 0:i.rating_total)||0)),D({},e,{itemRatingMap:D({},e.itemRatingMap,N),itemRating:D({},e.itemRating,{[S]:D({},e.itemRating[S],{browsing_ui:f,rcmd_algo:v,size_info_abt:b,hasMore:g,ratings:k,offset:o+n,downgradeSwitch:!!E,summary:D({},m,{rating_total:M})})}),itemRatingSummary:D({},m,{rating_total:M}),is_sip_item:h,show_local_review:y,purchase_bar_abt:C,size_info_abt:b,queryLoadingState:D({},e.queryLoadingState,{[S]:!1}),networkErrorCode:0})},[r.FAILED]:(e,t)=>{const{payload:a}=t,i=O(a.query);return D({},e,{queryLoadingState:D({},e.queryLoadingState,{[i]:!1}),networkErrorCode:a.error})},[y.REQUESTED]:e=>D({},e,{itemRatingMap:{},itemRating:{},shopRating:{},shopRatingMap:{},buyerRating:{},buyerRatingMap:{}}),[n.SUCCESS]:(e,t)=>{const{rating:a}=t.payload;return D({},e,{itemRatingMap:D({},e.itemRatingMap,{[a.cmtid]:a})})},[s.SUCCESS]:(e,t)=>{const{rating:a}=t.payload;return D({},e,{shopRatingMap:[a].reduce(((e,t)=>(t.cmtid&&(e[t.cmtid]=t),e)),e.shopRatingMap)})},[d.REQUESTED]:(e,t)=>{const{payload:a}=t,i=T(a.query);return D({},e,{shopRatingLoadingState:D({},e.shopRatingLoadingState,{[i]:!0}),networkErrorCode:0})},[d.SUCCESS]:(e,t)=>{const{query:{offset:a,limit:i},ratings:o,hasMore:n}=t.payload,r=T(t.payload.query),s=e.shopRating[r],d=s?s.ratings:[],_=o.reduce(((e,t,i)=>(e[i+a]=t.cmtid,e)),[...d]),c=o.reduce(((e,t)=>(t.cmtid&&(e[t.cmtid]=t),e)),{});return D({},e,{shopRatingMap:D({},e.shopRatingMap,c),shopRating:D({},e.shopRating,{[r]:D({},e.shopRating[r],{ratings:_,hasMore:n,offset:a+i})}),shopRatingLoadingState:D({},e.shopRatingLoadingState,{[r]:!1})})},[d.FAILED]:(e,t)=>{const{payload:a}=t,i=T(a.query);return D({},e,{shopRatingLoadingState:D({},e.shopRatingLoadingState,{[i]:!1}),networkErrorCode:t.payload.error})},[_.SUCCESS]:(e,t)=>{const{rating:a}=t.payload;return D({},e,{buyerRatingMap:[a].reduce(((e,t)=>(t.cmtid&&(e[t.cmtid]=t),e)),e.buyerRatingMap)})},[c.REQUESTED]:(e,t)=>{const{payload:a}=t,i=I(a.query);return D({},e,{buyerRatingLoadingState:D({},e.buyerRatingLoadingState,{[i]:!0}),networkErrorCode:0})},[c.SUCCESS]:(e,t)=>{const{query:{offset:a,limit:i},ratings:o,hasMore:n}=t.payload,r=I(t.payload.query),s=e.buyerRating[r],d=s?s.ratings:[],_=o.reduce(((e,t,i)=>(e[i+a]=t.cmtid,e)),[...d]),c=o.reduce(((e,t)=>(t.cmtid&&(e[t.cmtid]=t),e)),{});return D({},e,{buyerRatingMap:D({},e.buyerRatingMap,c),buyerRating:D({},e.buyerRating,{[r]:D({},e.buyerRating[r],{ratings:_,hasMore:n,offset:a+i})}),buyerRatingLoadingState:D({},e.buyerRatingLoadingState,{[r]:!1})})},[c.FAILED]:(e,t)=>{const{payload:a}=t,i=I(a.query);return D({},e,{buyerRatingLoadingState:D({},e.buyerRatingLoadingState,{[i]:!1}),networkErrorCode:a.error})},[l.SUCCESS]:(e,t)=>D({},e,{ratingMeta:t.payload}),[p.REQUESTED]:(e,t)=>{const a=e.itemRatingMap[t.ratingId];return D({},e,{itemRatingMap:D({},e.itemRatingMap,{[t.ratingId]:D({},a,{liked:!0,like_count:t.likeCount})})})},[p.FAILED]:(e,t)=>{const a=e.itemRatingMap[t.ratingId];return D({},e,{itemRatingMap:D({},e.itemRatingMap,{[t.ratingId]:D({},a,{liked:!1,like_count:t.likeCount})})})},[u.REQUESTED]:(e,t)=>{const a=e.itemRatingMap[t.ratingId];return D({},e,{itemRatingMap:D({},e.itemRatingMap,{[t.ratingId]:D({},a,{liked:!1,like_count:t.likeCount})})})},[u.FAILED]:(e,t)=>{const a=e.itemRatingMap[t.ratingId];return D({},e,{itemRatingMap:D({},e.itemRatingMap,{[t.ratingId]:D({},a,{liked:!1,like_count:t.likeCount})})})},[m.SUCCESS]:(e,t)=>D({},e,{shopRatingSummary:t.data}),[h.SUCCESS]:(e,t)=>D({},e,{ratingReplies:D({},e.ratingReplies,{[t.cmtId]:t.comment})}),[h.FAILED]:(e,t)=>D({},e,{ratingReplies:D({},e.ratingReplies,{[t.cmtId]:null})}),[g.SUCCESS]:(e,t)=>D({},e,{ratingReplies:D({},e.ratingReplies,{[t.cmtId]:t.comment})}),[g.FAILED]:(e,t)=>D({},e,{ratingReplies:D({},e.ratingReplies,{[t.cmtId]:null})}),[f.REQUESTED]:(e,t)=>{const a=L(t.payload.query);return D({},e,{orderItemRating:{[a]:{ratings:e.orderItemRating[a]&&e.orderItemRating[a].ratings||[],loading:!0,error:0}}})},[f.SUCCESS]:(e,t)=>{const a=L(t.payload.query);return D({},e,{itemRatingMap:t.payload.ratings.filter((e=>e.cmtid)).reduce(((e,t)=>(e[t.cmtid]=t,e)),e.itemRatingMap),orderItemRating:{[a]:{loading:!1,ratings:t.payload.ratings.filter((e=>e.cmtid)).map((e=>e.cmtid)),error:0,rateable:t.payload.rateable}}})},[f.FAILED]:(e,t)=>{const a=L(t.payload.query);return D({},e,{orderItemRating:{[a]:D({},e.orderItemRating[a],{loading:!1,error:t.payload.error})}})},[v.REQUESTED]:(e,t)=>{const a=A(t.payload.query);return D({},e,{orderBuyerRating:{[a]:{ratings:e.orderBuyerRating[a]&&e.orderBuyerRating[a].ratings||[],loading:!0,error:0}}})},[v.SUCCESS]:(e,t)=>{const a=A(t.payload.query);return D({},e,{buyerRatingMap:t.payload.ratings.filter((e=>e.cmtid)).reduce(((e,t)=>(e[t.cmtid]=t,e)),e.buyerRatingMap),orderBuyerRating:{[a]:{loading:!1,ratings:t.payload.ratings.filter((e=>e.cmtid)).map((e=>e.cmtid)),error:0}}})},[v.FAILED]:(e,t)=>{const a=A(t.payload.query);return D({},e,{orderBuyerRating:{[a]:D({},e.orderBuyerRating[a],{loading:!1,error:t.payload.error})}})},[b.REQUESTED]:(e,t)=>D({},e,{shopRatingMap:D({},e.shopRatingMap,{[t.ratingId]:D({},e.shopRatingMap[t.ratingId],{liked:!0,like_count:t.likeCount})})}),[b.FAILED]:(e,t)=>D({},e,{shopRatingMap:D({},e.shopRatingMap,{[t.ratingId]:D({},e.shopRatingMap[t.ratingId],{liked:!1,like_count:t.likeCount})})}),[E.REQUESTED]:(e,t)=>D({},e,{shopRatingMap:D({},e.shopRatingMap,{[t.ratingId]:D({},e.shopRatingMap[t.ratingId],{liked:!1,like_count:t.likeCount})})}),[E.FAILED]:(e,t)=>D({},e,{shopRatingMap:D({},e.shopRatingMap,{[t.ratingId]:D({},e.shopRatingMap[t.ratingId],{liked:!1,like_count:t.likeCount})})}),[C.REQUESTED]:(e,t)=>{const a=`${t.payload.query.userId}`,i=!!e.rateableListMap[a];return D({},e,{rateableListMap:D({},e.rateableListMap,{[a]:i?D({},e.rateableListMap[a],{loading:!0}):{is_end:!1,rate_list:[],offset:0,loading:!0,errorCode:0,preOffset:-1}})})},[C.SUCCESS]:(e,t)=>{const{userId:a,offset:i}=t.payload.query,o=`${a}`,n=e.rateableListMap[o].rate_list,r=e.rateableListMap[o].preOffset,{is_end:s=!1,rate_list:d=[],cursor:_=0}=t.payload.data||{},c=0===i?[...d||[]]:r!==i?[...n,...d||[]]:n;return D({},e,{rateableListMap:D({},e.rateableListMap,{[o]:D({},e.rateableListMap[o],{rate_list:c,is_end:s,offset:_,loading:!1,preOffset:i,errorCode:0})})})},[C.FAILED]:(e,t)=>{const{userId:a}=t.payload.query||{},i=`${a}`;return D({},e,{rateableListMap:D({},e.rateableListMap,{[i]:D({},e.rateableListMap[i],{loading:!1,errorCode:t.payload.error})})})},[w.REQUESTED]:(e,t)=>{const{userId:a}=t.payload.query,i=!!e.myRatingListMap[a];return D({},e,{myRatingListMap:D({},e.myRatingListMap,{[a]:i?D({},e.myRatingListMap[a],{loading:!0}):{is_end:!1,ratingList:[],ratingListMap:{},offset:0,loading:!0,errorCode:0}})})},[w.SUCCESS]:(e,t)=>{const{userId:a,offset:i,limit:o}=t.payload.query,n=e.myRatingListMap[a].ratingList,{is_end:r,rate_list:s}=t.payload.data||{},d=(s||[]).reduce(((e,t,a)=>(e[a+i]=t.cmtid,e)),0===i?[]:[...n]),_=(s||[]).reduce(((e,t)=>(t.cmtid&&(e[t.cmtid]=t),e)),{});return D({},e,{myRatingListMap:D({},e.myRatingListMap,{[a]:D({},e.myRatingListMap[a],{ratingList:d,ratingListMap:D({},e.myRatingListMap[a].ratingListMap,_),is_end:r,offset:i+o,loading:!1,errorCode:0})})})},[w.FAILED]:(e,t)=>{const{userId:a}=t.payload.query;return D({},e,{myRatingListMap:D({},e.myRatingListMap,{[a]:D({},e.myRatingListMap[a],{loading:!1,errorCode:t.payload.error})})})},[S.SUCCESS]:(e,t)=>{var a;const{orderId:i,userId:o}=t,n=(null==(a=e.rateableListMap[o])?void 0:a.rate_list)||[],r=n.findIndex((e=>e.order_id===i));if(r>=0){const t=[...n];return t.splice(r,1),D({},e,{rateableListMap:D({},e.rateableListMap,{[o]:D({},e.rateableListMap[o],{rate_list:t})})})}return e},[R.SUCCESS]:(e,t)=>{const{cmtid:a,updateData:i,userId:o}=t.data;return D({},e,{myRatingListMap:D({},e.myRatingListMap,{[o]:D({},e.myRatingListMap[o],{ratingListMap:D({},e.myRatingListMap[o].ratingListMap,{[a]:D({},e.myRatingListMap[o].ratingListMap[a],i)})})})})}},{shopRating:{},shopRatingMap:{},size_info_abt:"",buyerRating:{},buyerRatingMap:{},itemRating:{},itemRatingMap:{},orderItemRating:{},orderBuyerRating:{},ratingReplies:{},ratingText:{},queryLoadingState:{},shopRatingLoadingState:{},buyerRatingLoadingState:{},networkErrorCode:0,ratingMeta:null,rateableListMap:{},myRatingListMap:{}});var B=a(1437),j=a(6704),P=a(5410);const q="SERIALIZE_META_DATA_KEY";function U(e){Reflect.defineMetadata(q,!0,e)}function W(e){return Reflect.hasOwnMetadata(q,e)}function F(e,t,a){let i=new t;const o=Reflect.getMetadata(t.prototype,t.prototype);if(!W(t)||!o)return e;for(const r of o.keys()){var n;const s=null!=(n=null==o?void 0:o.get(r))?n:[];i[r]=null==e?void 0:e[r];const d=t.prototype.constructor.name,_=Reflect.getMetadata("design:type",i,r);s.forEach((({transform:e,validator:t})=>{null==t||t(d,r,i[r],_);const o=e(i[r],_,a);null!=o?i[r]=o:a&&delete i[r]}))}return i=Object.assign(e||{},i),i}function $(e){return function(t,a){!function(e){var t;const{target:a,property:i,transform:o,validator:n}=e;let r=new Map;if(Reflect.hasMetadata(a,a)&&(r=Reflect.getMetadata(a,a)),null!=(t=r.get(i))&&t.length){var s,d;const e=null!=(s=null==(d=r)?void 0:d.get(i))?s:[];r.set(i,e.concat({transform:o,validator:n}))}else r.set(i,[{transform:o,validator:n}]);Reflect.defineMetadata(a,r,a)}({target:t,property:a,transform(t,a,i){if(!e&&a&&!W(a))switch(a.name.toLowerCase()){case"number":return isNaN(parseInt(t))?0:t;case"string":return"string"==typeof t?t:"";case"boolean":return"boolean"==typeof t&&t;default:return t}if(e&&null!=e&&e.mapTo){const o=e.mapTo(),n="[object Array]"===Object.prototype.toString.call(t);if(a===Array&&n){const e=[];return t.forEach((t=>{e.push(F(t,o))})),e}return e&&a===Array&&!n?[]:(null==o?void 0:o.name)===(null==a?void 0:a.name)?i?void 0:F(t,o,!0):F(t,o)}}})}}!function(){function e(){}var t;t=e,e.fromJSON=function(e){return F(e,t)},e=t=(0,P.__decorate)([U],e)}();var V=function(){function e(){}var t;return t=e,e.fromJSON=function(e){return F(e,t)},(0,P.__decorate)([$(),(0,P.__metadata)("design:type",String)],e.prototype,"name",void 0),(0,P.__decorate)([$(),(0,P.__metadata)("design:type",String)],e.prototype,"value",void 0),(0,P.__decorate)([$(),(0,P.__metadata)("design:type",String)],e.prototype,"domain",void 0),(0,P.__decorate)([$(),(0,P.__metadata)("design:type",Number)],e.prototype,"max_age",void 0),(0,P.__decorate)([$(),(0,P.__metadata)("design:type",String)],e.prototype,"path",void 0),(0,P.__decorate)([$(),(0,P.__metadata)("design:type",Boolean)],e.prototype,"secure",void 0),(0,P.__decorate)([$(),(0,P.__metadata)("design:type",Boolean)],e.prototype,"http_only",void 0),t=(0,P.__decorate)([U],e)}(),J=function(){function e(){}var t;return t=e,e.fromJSON=function(e){return F(e,t)},(0,P.__decorate)([$(),(0,P.__metadata)("design:type",Boolean)],e.prototype,"no_cache",void 0),(0,P.__decorate)([$(),(0,P.__metadata)("design:type",Boolean)],e.prototype,"no_store",void 0),(0,P.__decorate)([$(),(0,P.__metadata)("design:type",Boolean)],e.prototype,"must_revalidate",void 0),(0,P.__decorate)([$(),(0,P.__metadata)("design:type",Number)],e.prototype,"max_age",void 0),t=(0,P.__decorate)([U],e)}(),H=(function(){function e(){}var t;t=e,e.fromJSON=function(e){return F(e,t)},(0,P.__decorate)([$({mapTo:function(){return V}}),(0,P.__metadata)("design:type",Array)],e.prototype,"cookies",void 0),(0,P.__decorate)([$(),(0,P.__metadata)("design:type",Number)],e.prototype,"userid",void 0),(0,P.__decorate)([$(),(0,P.__metadata)("design:type",String)],e.prototype,"session_id",void 0),(0,P.__decorate)([$(),(0,P.__metadata)("design:type",String)],e.prototype,"client_ip",void 0),(0,P.__decorate)([$(),(0,P.__metadata)("design:type",Number)],e.prototype,"platform",void 0),(0,P.__decorate)([$(),(0,P.__metadata)("design:type",String)],e.prototype,"url",void 0),(0,P.__decorate)([$(),(0,P.__metadata)("design:type",String)],e.prototype,"user_agent",void 0),(0,P.__decorate)([$(),(0,P.__metadata)("design:type",String)],e.prototype,"sso_token",void 0),(0,P.__decorate)([$(),(0,P.__metadata)("design:type",String)],e.prototype,"shopee_token",void 0),(0,P.__decorate)([$(),(0,P.__metadata)("design:type",String)],e.prototype,"tracking_session_id",void 0),(0,P.__decorate)([$(),(0,P.__metadata)("design:type",String)],e.prototype,"country",void 0),(0,P.__decorate)([$(),(0,P.__metadata)("design:type",Boolean)],e.prototype,"downgrade",void 0),(0,P.__decorate)([$(),(0,P.__metadata)("design:type",String)],e.prototype,"language",void 0),(0,P.__decorate)([$(),(0,P.__metadata)("design:type",String)],e.prototype,"client_ip_country",void 0),(0,P.__decorate)([$(),(0,P.__metadata)("design:type",String)],e.prototype,"device_fingerprint",void 0),(0,P.__decorate)([$(),(0,P.__metadata)("design:type",String)],e.prototype,"app_version",void 0),(0,P.__decorate)([$(),(0,P.__metadata)("design:type",String)],e.prototype,"rn_version",void 0),(0,P.__decorate)([$(),(0,P.__metadata)("design:type",Number)],e.prototype,"shopid",void 0),(0,P.__decorate)([$(),(0,P.__metadata)("design:type",Number)],e.prototype,"app_type",void 0),(0,P.__decorate)([$(),(0,P.__metadata)("design:type",String)],e.prototype,"client_id",void 0),(0,P.__decorate)([$(),(0,P.__metadata)("design:type",Number)],e.prototype,"client_platform",void 0),(0,P.__decorate)([$(),(0,P.__metadata)("design:type",Boolean)],e.prototype,"is_from_xiapibuy",void 0),(0,P.__decorate)([$(),(0,P.__metadata)("design:type",String)],e.prototype,"referer",void 0),(0,P.__decorate)([$({mapTo:function(){return String}}),(0,P.__metadata)("design:type",Array)],e.prototype,"forwarded_for",void 0),(0,P.__decorate)([$(),(0,P.__metadata)("design:type",String)],e.prototype,"real_ip",void 0),(0,P.__decorate)([$(),(0,P.__metadata)("design:type",Boolean)],e.prototype,"crawler",void 0),e=t=(0,P.__decorate)([U],e)}(),function(){function e(){}var t;t=e,e.fromJSON=function(e){return F(e,t)},(0,P.__decorate)([$({mapTo:function(){return V}}),(0,P.__metadata)("design:type",Array)],e.prototype,"cookies",void 0),(0,P.__decorate)([$(),(0,P.__metadata)("design:type",String)],e.prototype,"content_type",void 0),(0,P.__decorate)([$({mapTo:function(){return J}}),(0,P.__metadata)("design:type",J)],e.prototype,"cache_control",void 0),e=t=(0,P.__decorate)([U],e)}(),function(){function e(){}var t;t=e,e.fromJSON=function(e){return F(e,t)},(0,P.__decorate)([$(),(0,P.__metadata)("design:type",String)],e.prototype,"data",void 0),e=t=(0,P.__decorate)([U],e)}(),function(){function e(){}var t;t=e,e.fromJSON=function(e){return F(e,t)},(0,P.__decorate)([$(),(0,P.__metadata)("design:type",String)],e.prototype,"data",void 0),e=t=(0,P.__decorate)([U],e)}(),function(){function e(){}var t;t=e,e.fromJSON=function(e){return F(e,t)},e=t=(0,P.__decorate)([U],e)}(),function(){function e(){}var t;t=e,e.fromJSON=function(e){return F(e,t)},e=t=(0,P.__decorate)([U],e)}(),function(){function e(){}var t;return t=e,e.fromJSON=function(e){return F(e,t)},(0,P.__decorate)([$(),(0,P.__metadata)("design:type",String)],e.prototype,"name",void 0),(0,P.__decorate)([$(),(0,P.__metadata)("design:type",Number)],e.prototype,"count",void 0),t=(0,P.__decorate)([U],e)}()),G=function(){function e(){}var t;return t=e,e.fromJSON=function(e){return F(e,t)},(0,P.__decorate)([$({mapTo:function(){return H}}),(0,P.__metadata)("design:type",Array)],e.prototype,"tag_filters",void 0),(0,P.__decorate)([$(),(0,P.__metadata)("design:type",String)],e.prototype,"signature",void 0),(0,P.__decorate)([$(),(0,P.__metadata)("design:type",Boolean)],e.prototype,"downgrade_switch",void 0),t=(0,P.__decorate)([U],e)}(),X=(function(){function e(){}var t;t=e,e.fromJSON=function(e){return F(e,t)},(0,P.__decorate)([$(),(0,P.__metadata)("design:type",Number)],e.prototype,"itemid",void 0),(0,P.__decorate)([$(),(0,P.__metadata)("design:type",String)],e.prototype,"variation_filters",void 0),(0,P.__decorate)([$(),(0,P.__metadata)("design:type",Number)],e.prototype,"filter",void 0),(0,P.__decorate)([$(),(0,P.__metadata)("design:type",Number)],e.prototype,"type",void 0),e=t=(0,P.__decorate)([U],e)}(),function(){function e(){}var t;return t=e,e.fromJSON=function(e){return F(e,t)},(0,P.__decorate)([$(),(0,P.__metadata)("design:type",Number)],e.prototype,"error",void 0),(0,P.__decorate)([$(),(0,P.__metadata)("design:type",String)],e.prototype,"error_msg",void 0),(0,P.__decorate)([$({mapTo:function(){return G}}),(0,P.__metadata)("design:type",G)],e.prototype,"data",void 0),t=(0,P.__decorate)([U],e)}()),Q=(function(){function e(){}var t;t=e,e.fromJSON=function(e){return F(e,t)},(0,P.__decorate)([$(),(0,P.__metadata)("design:type",Number)],e.prototype,"userid",void 0),e=t=(0,P.__decorate)([U],e)}(),function(){function e(){}var t;t=e,e.fromJSON=function(e){return F(e,t)},(0,P.__decorate)([$(),(0,P.__metadata)("design:type",Number)],e.prototype,"error",void 0),(0,P.__decorate)([$(),(0,P.__metadata)("design:type",String)],e.prototype,"error_msg",void 0),(0,P.__decorate)([$({mapTo:function(){return Q}}),(0,P.__metadata)("design:type",Q)],e.prototype,"data",void 0),e=t=(0,P.__decorate)([U],e)}(),function(){function e(){}var t;return t=e,e.fromJSON=function(e){return F(e,t)},(0,P.__decorate)([$({mapTo:function(){return Z}}),(0,P.__metadata)("design:type",Z)],e.prototype,"buyer_rating_summary",void 0),(0,P.__decorate)([$({mapTo:function(){return Z}}),(0,P.__metadata)("design:type",Z)],e.prototype,"seller_rating_summary",void 0),(0,P.__decorate)([$(),(0,P.__metadata)("design:type",Number)],e.prototype,"total_avg_star",void 0),t=(0,P.__decorate)([U],e)}()),Z=function(){function e(){}var t;return t=e,e.fromJSON=function(e){return F(e,t)},(0,P.__decorate)([$(),(0,P.__metadata)("design:type",Number)],e.prototype,"rating_total",void 0),(0,P.__decorate)([$({mapTo:function(){return Number}}),(0,P.__metadata)("design:type",Array)],e.prototype,"rating_count",void 0),(0,P.__decorate)([$(),(0,P.__metadata)("design:type",Number)],e.prototype,"rating_star",void 0),t=(0,P.__decorate)([U],e)}(),z=(function(){function e(){}var t;t=e,e.fromJSON=function(e){return F(e,t)},(0,P.__decorate)([$(),(0,P.__metadata)("design:type",Number)],e.prototype,"shopid",void 0),(0,P.__decorate)([$(),(0,P.__metadata)("design:type",Number)],e.prototype,"itemid",void 0),(0,P.__decorate)([$(),(0,P.__metadata)("design:type",Number)],e.prototype,"offset",void 0),(0,P.__decorate)([$(),(0,P.__metadata)("design:type",Number)],e.prototype,"limit",void 0),(0,P.__decorate)([$(),(0,P.__metadata)("design:type",Number)],e.prototype,"filter",void 0),(0,P.__decorate)([$(),(0,P.__metadata)("design:type",Number)],e.prototype,"flag",void 0),(0,P.__decorate)([$(),(0,P.__metadata)("design:type",Number)],e.prototype,"type",void 0),(0,P.__decorate)([$(),(0,P.__metadata)("design:type",String)],e.prototype,"tag_filter",void 0),(0,P.__decorate)([$(),(0,P.__metadata)("design:type",Number)],e.prototype,"exclude_filter",void 0),(0,P.__decorate)([$(),(0,P.__metadata)("design:type",Number)],e.prototype,"request_source",void 0),(0,P.__decorate)([$(),(0,P.__metadata)("design:type",String)],e.prototype,"variation_filters",void 0),(0,P.__decorate)([$(),(0,P.__metadata)("design:type",Boolean)],e.prototype,"relevant_reviews",void 0),(0,P.__decorate)([$(),(0,P.__metadata)("design:type",Number)],e.prototype,"filter_size",void 0),(0,P.__decorate)([$(),(0,P.__metadata)("design:type",Number)],e.prototype,"fold_filter",void 0),e=t=(0,P.__decorate)([U],e)}(),function(){function e(){}var t;t=e,e.fromJSON=function(e){return F(e,t)},(0,P.__decorate)([$(),(0,P.__metadata)("design:type",Number)],e.prototype,"error",void 0),(0,P.__decorate)([$(),(0,P.__metadata)("design:type",String)],e.prototype,"error_msg",void 0),(0,P.__decorate)([$({mapTo:function(){return z}}),(0,P.__metadata)("design:type",z)],e.prototype,"data",void 0),e=t=(0,P.__decorate)([U],e)}(),function(){function e(){}var t;return t=e,e.fromJSON=function(e){return F(e,t)},(0,P.__decorate)([$({mapTo:function(){return ee}}),(0,P.__metadata)("design:type",Array)],e.prototype,"ratings",void 0),(0,P.__decorate)([$({mapTo:function(){return oe}}),(0,P.__metadata)("design:type",oe)],e.prototype,"item_rating_summary",void 0),(0,P.__decorate)([$(),(0,P.__metadata)("design:type",Boolean)],e.prototype,"is_sip_item",void 0),(0,P.__decorate)([$(),(0,P.__metadata)("design:type",String)],e.prototype,"rcmd_algo",void 0),(0,P.__decorate)([$(),(0,P.__metadata)("design:type",Boolean)],e.prototype,"downgrade_switch",void 0),(0,P.__decorate)([$(),(0,P.__metadata)("design:type",Boolean)],e.prototype,"has_more",void 0),(0,P.__decorate)([$(),(0,P.__metadata)("design:type",Boolean)],e.prototype,"show_local_review",void 0),(0,P.__decorate)([$(),(0,P.__metadata)("design:type",String)],e.prototype,"browsing_ui",void 0),(0,P.__decorate)([$(),(0,P.__metadata)("design:type",Boolean)],e.prototype,"enable_buyer_gallery_media",void 0),(0,P.__decorate)([$({mapTo:function(){return ee}}),(0,P.__metadata)("design:type",ee)],e.prototype,"user_latest_rating",void 0),(0,P.__decorate)([$(),(0,P.__metadata)("design:type",String)],e.prototype,"size_info_abt",void 0),(0,P.__decorate)([$({mapTo:function(){return ee}}),(0,P.__metadata)("design:type",Array)],e.prototype,"top_ratings",void 0),(0,P.__decorate)([$(),(0,P.__metadata)("design:type",Boolean)],e.prototype,"resize_image_abt",void 0),(0,P.__decorate)([$(),(0,P.__metadata)("design:type",String)],e.prototype,"purchase_bar_abt",void 0),t=(0,P.__decorate)([U],e)}()),Y=(function(){function e(){}var t;t=e,e.fromJSON=function(e){return F(e,t)},(0,P.__decorate)([$({mapTo:function(){return ee}}),(0,P.__metadata)("design:type",Array)],e.prototype,"ratings",void 0),(0,P.__decorate)([$({mapTo:function(){return oe}}),(0,P.__metadata)("design:type",oe)],e.prototype,"item_rating_summary",void 0),(0,P.__decorate)([$(),(0,P.__metadata)("design:type",Boolean)],e.prototype,"is_sip_item",void 0),(0,P.__decorate)([$(),(0,P.__metadata)("design:type",String)],e.prototype,"rcmd_algo",void 0),(0,P.__decorate)([$({mapTo:function(){return Y}}),(0,P.__metadata)("design:type",Array)],e.prototype,"facets",void 0),(0,P.__decorate)([$(),(0,P.__metadata)("design:type",String)],e.prototype,"signature",void 0),(0,P.__decorate)([$({mapTo:function(){return ee}}),(0,P.__metadata)("design:type",ee)],e.prototype,"user_latest_rating",void 0),e=t=(0,P.__decorate)([U],e)}(),function(){function e(){}var t;return t=e,e.fromJSON=function(e){return F(e,t)},(0,P.__decorate)([$(),(0,P.__metadata)("design:type",Number)],e.prototype,"count",void 0),(0,P.__decorate)([$(),(0,P.__metadata)("design:type",Number)],e.prototype,"type",void 0),t=(0,P.__decorate)([U],e)}()),K=function(){function e(){}var t;return t=e,e.fromJSON=function(e){return F(e,t)},(0,P.__decorate)([$(),(0,P.__metadata)("design:type",Boolean)],e.prototype,"is_oversea",void 0),(0,P.__decorate)([$(),(0,P.__metadata)("design:type",String)],e.prototype,"origin_region",void 0),t=(0,P.__decorate)([U],e)}(),ee=function(){function e(){}var t;return t=e,e.fromJSON=function(e){return F(e,t)},(0,P.__decorate)([$(),(0,P.__metadata)("design:type",Number)],e.prototype,"orderid",void 0),(0,P.__decorate)([$(),(0,P.__metadata)("design:type",Number)],e.prototype,"itemid",void 0),(0,P.__decorate)([$(),(0,P.__metadata)("design:type",Number)],e.prototype,"cmtid",void 0),(0,P.__decorate)([$(),(0,P.__metadata)("design:type",Number)],e.prototype,"ctime",void 0),(0,P.__decorate)([$(),(0,P.__metadata)("design:type",Number)],e.prototype,"rating",void 0),(0,P.__decorate)([$(),(0,P.__metadata)("design:type",Number)],e.prototype,"userid",void 0),(0,P.__decorate)([$(),(0,P.__metadata)("design:type",Number)],e.prototype,"shopid",void 0),(0,P.__decorate)([$(),(0,P.__metadata)("design:type",String)],e.prototype,"comment",void 0),(0,P.__decorate)([$(),(0,P.__metadata)("design:type",Number)],e.prototype,"rating_star",void 0),(0,P.__decorate)([$(),(0,P.__metadata)("design:type",Number)],e.prototype,"status",void 0),(0,P.__decorate)([$(),(0,P.__metadata)("design:type",Number)],e.prototype,"mtime",void 0),(0,P.__decorate)([$(),(0,P.__metadata)("design:type",Number)],e.prototype,"editable",void 0),(0,P.__decorate)([$(),(0,P.__metadata)("design:type",Number)],e.prototype,"opt",void 0),(0,P.__decorate)([$(),(0,P.__metadata)("design:type",Number)],e.prototype,"filter",void 0),(0,P.__decorate)([$({mapTo:function(){return ce}}),(0,P.__metadata)("design:type",Array)],e.prototype,"mentioned",void 0),(0,P.__decorate)([$(),(0,P.__metadata)("design:type",Boolean)],e.prototype,"is_hidden",void 0),(0,P.__decorate)([$(),(0,P.__metadata)("design:type",Boolean)],e.prototype,"can_follow_up",void 0),(0,P.__decorate)([$({mapTo:function(){return nt}}),(0,P.__metadata)("design:type",nt)],e.prototype,"follow_up",void 0),(0,P.__decorate)([$(),(0,P.__metadata)("design:type",String)],e.prototype,"author_username",void 0),(0,P.__decorate)([$(),(0,P.__metadata)("design:type",String)],e.prototype,"author_portrait",void 0),(0,P.__decorate)([$(),(0,P.__metadata)("design:type",Number)],e.prototype,"author_shopid",void 0),(0,P.__decorate)([$(),(0,P.__metadata)("design:type",Boolean)],e.prototype,"anonymous",void 0),(0,P.__decorate)([$({mapTo:function(){return String}}),(0,P.__metadata)("design:type",Array)],e.prototype,"images",void 0),(0,P.__decorate)([$({mapTo:function(){return ne}}),(0,P.__metadata)("design:type",Array)],e.prototype,"videos",void 0),(0,P.__decorate)([$({mapTo:function(){return de}}),(0,P.__metadata)("design:type",Array)],e.prototype,"product_items",void 0),(0,P.__decorate)([$(),(0,P.__metadata)("design:type",String)],e.prototype,"delete_reason",void 0),(0,P.__decorate)([$(),(0,P.__metadata)("design:type",String)],e.prototype,"delete_operator",void 0),(0,P.__decorate)([$({mapTo:function(){return _e}}),(0,P.__metadata)("design:type",_e)],e.prototype,"ItemRatingReply",void 0),(0,P.__decorate)([$({mapTo:function(){return le}}),(0,P.__metadata)("design:type",Array)],e.prototype,"tags",void 0),(0,P.__decorate)([$(),(0,P.__metadata)("design:type",Number)],e.prototype,"editable_date",void 0),(0,P.__decorate)([$(),(0,P.__metadata)("design:type",Boolean)],e.prototype,"show_reply",void 0),(0,P.__decorate)([$(),(0,P.__metadata)("design:type",Number)],e.prototype,"like_count",void 0),(0,P.__decorate)([$(),(0,P.__metadata)("design:type",Boolean)],e.prototype,"liked",void 0),(0,P.__decorate)([$(),(0,P.__metadata)("design:type",Boolean)],e.prototype,"sync_to_social",void 0),(0,P.__decorate)([$({mapTo:function(){return pe}}),(0,P.__metadata)("design:type",pe)],e.prototype,"detailed_rating",void 0),(0,P.__decorate)([$(),(0,P.__metadata)("design:type",Boolean)],e.prototype,"exclude_scoring_due_low_logistic",void 0),(0,P.__decorate)([$({mapTo:function(){return ue}}),(0,P.__metadata)("design:type",ue)],e.prototype,"loyalty_info",void 0),(0,P.__decorate)([$({mapTo:function(){return String}}),(0,P.__metadata)("design:type",Array)],e.prototype,"template_tags",void 0),(0,P.__decorate)([$(),(0,P.__metadata)("design:type",Boolean)],e.prototype,"has_template_tag",void 0),(0,P.__decorate)([$(),(0,P.__metadata)("design:type",Boolean)],e.prototype,"sync_to_social_toggle",void 0),(0,P.__decorate)([$({mapTo:function(){return K}}),(0,P.__metadata)("design:type",K)],e.prototype,"sip_info",void 0),(0,P.__decorate)([$(),(0,P.__metadata)("design:type",Boolean)],e.prototype,"is_repeated_purchase",void 0),(0,P.__decorate)([$(),(0,P.__metadata)("design:type",Boolean)],e.prototype,"display_variation_filter",void 0),(0,P.__decorate)([$(),(0,P.__metadata)("design:type",Number)],e.prototype,"overall_fit",void 0),(0,P.__decorate)([$(),(0,P.__metadata)("design:type",Boolean)],e.prototype,"is_normal_item",void 0),(0,P.__decorate)([$(),(0,P.__metadata)("design:type",Number)],e.prototype,"viewed",void 0),(0,P.__decorate)([$(),(0,P.__metadata)("design:type",Boolean)],e.prototype,"show_view",void 0),(0,P.__decorate)([$({mapTo:function(){return Ke}}),(0,P.__metadata)("design:type",Ke)],e.prototype,"sync_to_social_detail",void 0),(0,P.__decorate)([$({mapTo:function(){return te}}),(0,P.__metadata)("design:type",te)],e.prototype,"profile",void 0),(0,P.__decorate)([$({mapTo:function(){return String}}),(0,P.__metadata)("design:type",Array)],e.prototype,"size_info_tags",void 0),(0,P.__decorate)([$(),(0,P.__metadata)("design:type",String)],e.prototype,"size_info_abt",void 0),(0,P.__decorate)([$({mapTo:function(){return re}}),(0,P.__metadata)("design:type",Array)],e.prototype,"image_data",void 0),(0,P.__decorate)([$({mapTo:function(){return se}}),(0,P.__metadata)("design:type",se)],e.prototype,"key_media",void 0),(0,P.__decorate)([$(),(0,P.__metadata)("design:type",Boolean)],e.prototype,"is_super_review",void 0),(0,P.__decorate)([$({mapTo:function(){return String}}),(0,P.__metadata)("design:type",Array)],e.prototype,"super_reviewer_tag",void 0),(0,P.__decorate)([$(),(0,P.__metadata)("design:type",Boolean)],e.prototype,"is_newly_created",void 0),(0,P.__decorate)([$({mapTo:function(){return Ye}}),(0,P.__metadata)("design:type",Array)],e.prototype,"template_tags_hints",void 0),t=(0,P.__decorate)([U],e)}(),te=function(){function e(){}var t;return t=e,e.fromJSON=function(e){return F(e,t)},(0,P.__decorate)([$({mapTo:function(){return ae}}),(0,P.__metadata)("design:type",Array)],e.prototype,"measurements",void 0),t=(0,P.__decorate)([U],e)}(),ae=function(){function e(){}var t;return t=e,e.fromJSON=function(e){return F(e,t)},(0,P.__decorate)([$(),(0,P.__metadata)("design:type",Number)],e.prototype,"measurement_id",void 0),(0,P.__decorate)([$(),(0,P.__metadata)("design:type",String)],e.prototype,"measurement_name",void 0),(0,P.__decorate)([$({mapTo:function(){return ie}}),(0,P.__metadata)("design:type",Array)],e.prototype,"unit_values",void 0),t=(0,P.__decorate)([U],e)}(),ie=function(){function e(){}var t;return t=e,e.fromJSON=function(e){return F(e,t)},(0,P.__decorate)([$(),(0,P.__metadata)("design:type",Number)],e.prototype,"value",void 0),(0,P.__decorate)([$(),(0,P.__metadata)("design:type",String)],e.prototype,"unit",void 0),t=(0,P.__decorate)([U],e)}(),oe=function(){function e(){}var t;return t=e,e.fromJSON=function(e){return F(e,t)},(0,P.__decorate)([$(),(0,P.__metadata)("design:type",Number)],e.prototype,"rating_total",void 0),(0,P.__decorate)([$({mapTo:function(){return Number}}),(0,P.__metadata)("design:type",Array)],e.prototype,"rating_count",void 0),(0,P.__decorate)([$(),(0,P.__metadata)("design:type",Number)],e.prototype,"rcount_with_context",void 0),(0,P.__decorate)([$(),(0,P.__metadata)("design:type",Number)],e.prototype,"rcount_with_image",void 0),(0,P.__decorate)([$(),(0,P.__metadata)("design:type",Number)],e.prototype,"rcount_with_media",void 0),(0,P.__decorate)([$(),(0,P.__metadata)("design:type",Number)],e.prototype,"rcount_local_review",void 0),(0,P.__decorate)([$(),(0,P.__metadata)("design:type",Number)],e.prototype,"rcount_repeat_purchase",void 0),(0,P.__decorate)([$(),(0,P.__metadata)("design:type",Number)],e.prototype,"rcount_overall_fit_small",void 0),(0,P.__decorate)([$(),(0,P.__metadata)("design:type",Number)],e.prototype,"rcount_overall_fit_fit",void 0),(0,P.__decorate)([$(),(0,P.__metadata)("design:type",Number)],e.prototype,"rcount_overall_fit_large",void 0),(0,P.__decorate)([$(),(0,P.__metadata)("design:type",Number)],e.prototype,"rcount_oversea_review",void 0),(0,P.__decorate)([$(),(0,P.__metadata)("design:type",Number)],e.prototype,"rcount_folded",void 0),t=(0,P.__decorate)([U],e)}(),ne=function(){function e(){}var t;return t=e,e.fromJSON=function(e){return F(e,t)},(0,P.__decorate)([$(),(0,P.__metadata)("design:type",String)],e.prototype,"id",void 0),(0,P.__decorate)([$(),(0,P.__metadata)("design:type",String)],e.prototype,"cover",void 0),(0,P.__decorate)([$(),(0,P.__metadata)("design:type",String)],e.prototype,"url",void 0),(0,P.__decorate)([$(),(0,P.__metadata)("design:type",Number)],e.prototype,"duration",void 0),(0,P.__decorate)([$(),(0,P.__metadata)("design:type",Number)],e.prototype,"upload_time",void 0),(0,P.__decorate)([$(),(0,P.__metadata)("design:type",String)],e.prototype,"mms_ext",void 0),(0,P.__decorate)([$(),(0,P.__metadata)("design:type",String)],e.prototype,"cover_image_id",void 0),(0,P.__decorate)([$({mapTo:function(){return t}}),(0,P.__metadata)("design:type",e)],e.prototype,"highlight",void 0),t=(0,P.__decorate)([U],e)}(),re=function(){function e(){}var t;return t=e,e.fromJSON=function(e){return F(e,t)},(0,P.__decorate)([$(),(0,P.__metadata)("design:type",String)],e.prototype,"image_id",void 0),(0,P.__decorate)([$(),(0,P.__metadata)("design:type",String)],e.prototype,"cover_image_id",void 0),t=(0,P.__decorate)([U],e)}(),se=function(){function e(){}var t;return t=e,e.fromJSON=function(e){return F(e,t)},(0,P.__decorate)([$(),(0,P.__metadata)("design:type",Number)],e.prototype,"key_media_code",void 0),(0,P.__decorate)([$(),(0,P.__metadata)("design:type",String)],e.prototype,"key_media_id",void 0),t=(0,P.__decorate)([U],e)}(),de=function(){function e(){}var t;return t=e,e.fromJSON=function(e){return F(e,t)},(0,P.__decorate)([$(),(0,P.__metadata)("design:type",Number)],e.prototype,"itemid",void 0),(0,P.__decorate)([$(),(0,P.__metadata)("design:type",Number)],e.prototype,"shopid",void 0),(0,P.__decorate)([$(),(0,P.__metadata)("design:type",String)],e.prototype,"name",void 0),(0,P.__decorate)([$(),(0,P.__metadata)("design:type",String)],e.prototype,"image",void 0),(0,P.__decorate)([$(),(0,P.__metadata)("design:type",Number)],e.prototype,"is_snapshot",void 0),(0,P.__decorate)([$(),(0,P.__metadata)("design:type",Number)],e.prototype,"snapshotid",void 0),(0,P.__decorate)([$(),(0,P.__metadata)("design:type",Number)],e.prototype,"modelid",void 0),(0,P.__decorate)([$(),(0,P.__metadata)("design:type",String)],e.prototype,"model_name",void 0),(0,P.__decorate)([$({mapTo:function(){return String}}),(0,P.__metadata)("design:type",Array)],e.prototype,"options",void 0),t=(0,P.__decorate)([U],e)}(),_e=function(){function e(){}var t;return t=e,e.fromJSON=function(e){return F(e,t)},(0,P.__decorate)([$(),(0,P.__metadata)("design:type",Number)],e.prototype,"orderid",void 0),(0,P.__decorate)([$(),(0,P.__metadata)("design:type",Number)],e.prototype,"itemid",void 0),(0,P.__decorate)([$(),(0,P.__metadata)("design:type",Number)],e.prototype,"cmtid",void 0),(0,P.__decorate)([$(),(0,P.__metadata)("design:type",Number)],e.prototype,"ctime",void 0),(0,P.__decorate)([$(),(0,P.__metadata)("design:type",Number)],e.prototype,"rating",void 0),(0,P.__decorate)([$(),(0,P.__metadata)("design:type",Number)],e.prototype,"userid",void 0),(0,P.__decorate)([$(),(0,P.__metadata)("design:type",Number)],e.prototype,"shopid",void 0),(0,P.__decorate)([$(),(0,P.__metadata)("design:type",String)],e.prototype,"comment",void 0),(0,P.__decorate)([$(),(0,P.__metadata)("design:type",Number)],e.prototype,"rating_star",void 0),(0,P.__decorate)([$(),(0,P.__metadata)("design:type",Number)],e.prototype,"status",void 0),(0,P.__decorate)([$(),(0,P.__metadata)("design:type",Number)],e.prototype,"mtime",void 0),(0,P.__decorate)([$(),(0,P.__metadata)("design:type",Number)],e.prototype,"editable",void 0),(0,P.__decorate)([$(),(0,P.__metadata)("design:type",Number)],e.prototype,"opt",void 0),(0,P.__decorate)([$(),(0,P.__metadata)("design:type",Number)],e.prototype,"filter",void 0),(0,P.__decorate)([$({mapTo:function(){return ce}}),(0,P.__metadata)("design:type",Array)],e.prototype,"mentioned",void 0),(0,P.__decorate)([$(),(0,P.__metadata)("design:type",Boolean)],e.prototype,"is_hidden",void 0),t=(0,P.__decorate)([U],e)}(),ce=function(){function e(){}var t;return t=e,e.fromJSON=function(e){return F(e,t)},(0,P.__decorate)([$(),(0,P.__metadata)("design:type",Number)],e.prototype,"offset",void 0),(0,P.__decorate)([$(),(0,P.__metadata)("design:type",Number)],e.prototype,"length",void 0),(0,P.__decorate)([$(),(0,P.__metadata)("design:type",Number)],e.prototype,"infoid",void 0),(0,P.__decorate)([$(),(0,P.__metadata)("design:type",Number)],e.prototype,"type",void 0),t=(0,P.__decorate)([U],e)}(),le=function(){function e(){}var t;return t=e,e.fromJSON=function(e){return F(e,t)},(0,P.__decorate)([$(),(0,P.__metadata)("design:type",Number)],e.prototype,"tag_id",void 0),(0,P.__decorate)([$(),(0,P.__metadata)("design:type",String)],e.prototype,"tag_description",void 0),t=(0,P.__decorate)([U],e)}(),pe=function(){function e(){}var t;return t=e,e.fromJSON=function(e){return F(e,t)},(0,P.__decorate)([$(),(0,P.__metadata)("design:type",Number)],e.prototype,"product_quality",void 0),(0,P.__decorate)([$(),(0,P.__metadata)("design:type",Number)],e.prototype,"seller_service",void 0),(0,P.__decorate)([$(),(0,P.__metadata)("design:type",Number)],e.prototype,"delivery_service",void 0),t=(0,P.__decorate)([U],e)}(),ue=function(){function e(){}var t;return t=e,e.fromJSON=function(e){return F(e,t)},(0,P.__decorate)([$(),(0,P.__metadata)("design:type",Number)],e.prototype,"tier_code",void 0),(0,P.__decorate)([$(),(0,P.__metadata)("design:type",String)],e.prototype,"user_tier_badge_url",void 0),(0,P.__decorate)([$(),(0,P.__metadata)("design:type",String)],e.prototype,"tier_text",void 0),(0,P.__decorate)([$(),(0,P.__metadata)("design:type",String)],e.prototype,"user_tier_badge_text_color",void 0),(0,P.__decorate)([$(),(0,P.__metadata)("design:type",String)],e.prototype,"user_tier_badge_background_color",void 0),t=(0,P.__decorate)([U],e)}(),me=(function(){function e(){}var t;t=e,e.fromJSON=function(e){return F(e,t)},(0,P.__decorate)([$(),(0,P.__metadata)("design:type",String)],e.prototype,"name",void 0),(0,P.__decorate)([$(),(0,P.__metadata)("design:type",String)],e.prototype,"image",void 0),(0,P.__decorate)([$(),(0,P.__metadata)("design:type",Number)],e.prototype,"itemid",void 0),(0,P.__decorate)([$(),(0,P.__metadata)("design:type",Number)],e.prototype,"shopid",void 0),(0,P.__decorate)([$({mapTo:function(){return Number}}),(0,P.__metadata)("design:type",Array)],e.prototype,"modelids",void 0),(0,P.__decorate)([$(),(0,P.__metadata)("design:type",Number)],e.prototype,"price",void 0),(0,P.__decorate)([$(),(0,P.__metadata)("design:type",Number)],e.prototype,"price_before_discount",void 0),(0,P.__decorate)([$(),(0,P.__metadata)("design:type",Number)],e.prototype,"stock",void 0),(0,P.__decorate)([$(),(0,P.__metadata)("design:type",Number)],e.prototype,"flash_sale_stock",void 0),(0,P.__decorate)([$(),(0,P.__metadata)("design:type",Number)],e.prototype,"promotionid",void 0),(0,P.__decorate)([$(),(0,P.__metadata)("design:type",Number)],e.prototype,"start_time",void 0),(0,P.__decorate)([$(),(0,P.__metadata)("design:type",Number)],e.prototype,"end_time",void 0),(0,P.__decorate)([$(),(0,P.__metadata)("design:type",String)],e.prototype,"discount",void 0),(0,P.__decorate)([$(),(0,P.__metadata)("design:type",String)],e.prototype,"promo_name",void 0),(0,P.__decorate)([$({mapTo:function(){return String}}),(0,P.__metadata)("design:type",Array)],e.prototype,"promo_images",void 0),(0,P.__decorate)([$({mapTo:function(){return String}}),(0,P.__metadata)("design:type",Array)],e.prototype,"promo_overlay_image",void 0),(0,P.__decorate)([$(),(0,P.__metadata)("design:type",Number)],e.prototype,"raw_discount",void 0),(0,P.__decorate)([$(),(0,P.__metadata)("design:type",String)],e.prototype,"hidden_price_display",void 0),(0,P.__decorate)([$(),(0,P.__metadata)("design:type",Number)],e.prototype,"reminder_count",void 0),(0,P.__decorate)([$(),(0,P.__metadata)("design:type",Number)],e.prototype,"flash_sale_type",void 0),(0,P.__decorate)([$(),(0,P.__metadata)("design:type",String)],e.prototype,"brand_sale_brand_custom_logo",void 0),(0,P.__decorate)([$(),(0,P.__metadata)("design:type",Boolean)],e.prototype,"is_shop_preferred",void 0),(0,P.__decorate)([$(),(0,P.__metadata)("design:type",Boolean)],e.prototype,"is_shop_official",void 0),(0,P.__decorate)([$({mapTo:function(){return ye}}),(0,P.__metadata)("design:type",ye)],e.prototype,"voucher",void 0),(0,P.__decorate)([$({mapTo:function(){return ye}}),(0,P.__metadata)("design:type",ye)],e.prototype,"extra_discount_info",void 0),(0,P.__decorate)([$(),(0,P.__metadata)("design:type",Number)],e.prototype,"flash_catid",void 0),(0,P.__decorate)([$(),(0,P.__metadata)("design:type",Number)],e.prototype,"item_type",void 0),(0,P.__decorate)([$(),(0,P.__metadata)("design:type",String)],e.prototype,"reference_item_id",void 0),(0,P.__decorate)([$(),(0,P.__metadata)("design:type",Number)],e.prototype,"cat_label",void 0),e=t=(0,P.__decorate)([U],e)}(),function(){function e(){}var t;t=e,e.fromJSON=function(e){return F(e,t)},(0,P.__decorate)([$(),(0,P.__metadata)("design:type",Number)],e.prototype,"rating_star",void 0),(0,P.__decorate)([$({mapTo:function(){return Number}}),(0,P.__metadata)("design:type",Array)],e.prototype,"rating_count",void 0),(0,P.__decorate)([$(),(0,P.__metadata)("design:type",Number)],e.prototype,"rcount_with_context",void 0),(0,P.__decorate)([$(),(0,P.__metadata)("design:type",Number)],e.prototype,"rcount_with_image",void 0),e=t=(0,P.__decorate)([U],e)}(),function(){function e(){}var t;t=e,e.fromJSON=function(e){return F(e,t)},(0,P.__decorate)([$(),(0,P.__metadata)("design:type",String)],e.prototype,"video_id",void 0),(0,P.__decorate)([$(),(0,P.__metadata)("design:type",String)],e.prototype,"thumb_url",void 0),(0,P.__decorate)([$(),(0,P.__metadata)("design:type",Number)],e.prototype,"duration",void 0),(0,P.__decorate)([$(),(0,P.__metadata)("design:type",Number)],e.prototype,"version",void 0),(0,P.__decorate)([$({mapTo:function(){return me}}),(0,P.__metadata)("design:type",Array)],e.prototype,"formats",void 0),(0,P.__decorate)([$({mapTo:function(){return me}}),(0,P.__metadata)("design:type",me)],e.prototype,"default_format",void 0),e=t=(0,P.__decorate)([U],e)}(),function(){function e(){}var t;return t=e,e.fromJSON=function(e){return F(e,t)},(0,P.__decorate)([$(),(0,P.__metadata)("design:type",Number)],e.prototype,"format",void 0),(0,P.__decorate)([$(),(0,P.__metadata)("design:type",String)],e.prototype,"defn",void 0),(0,P.__decorate)([$(),(0,P.__metadata)("design:type",String)],e.prototype,"profile",void 0),(0,P.__decorate)([$(),(0,P.__metadata)("design:type",String)],e.prototype,"path",void 0),(0,P.__decorate)([$(),(0,P.__metadata)("design:type",String)],e.prototype,"url",void 0),(0,P.__decorate)([$(),(0,P.__metadata)("design:type",Number)],e.prototype,"width",void 0),(0,P.__decorate)([$(),(0,P.__metadata)("design:type",Number)],e.prototype,"height",void 0),t=(0,P.__decorate)([U],e)}()),ge=(function(){function e(){}var t;t=e,e.fromJSON=function(e){return F(e,t)},(0,P.__decorate)([$(),(0,P.__metadata)("design:type",Number)],e.prototype,"min_count",void 0),(0,P.__decorate)([$(),(0,P.__metadata)("design:type",Number)],e.prototype,"max_count",void 0),(0,P.__decorate)([$(),(0,P.__metadata)("design:type",Number)],e.prototype,"price",void 0),e=t=(0,P.__decorate)([U],e)}(),function(){function e(){}var t;t=e,e.fromJSON=function(e){return F(e,t)},(0,P.__decorate)([$(),(0,P.__metadata)("design:type",Number)],e.prototype,"bundle_deal_id",void 0),(0,P.__decorate)([$(),(0,P.__metadata)("design:type",String)],e.prototype,"bundle_deal_label",void 0),e=t=(0,P.__decorate)([U],e)}(),function(){function e(){}var t;t=e,e.fromJSON=function(e){return F(e,t)},(0,P.__decorate)([$(),(0,P.__metadata)("design:type",String)],e.prototype,"name",void 0),(0,P.__decorate)([$({mapTo:function(){return String}}),(0,P.__metadata)("design:type",Array)],e.prototype,"options",void 0),(0,P.__decorate)([$({mapTo:function(){return String}}),(0,P.__metadata)("design:type",Array)],e.prototype,"images",void 0),(0,P.__decorate)([$({mapTo:function(){return ge}}),(0,P.__metadata)("design:type",Array)],e.prototype,"properties",void 0),(0,P.__decorate)([$(),(0,P.__metadata)("design:type",Number)],e.prototype,"type",void 0),e=t=(0,P.__decorate)([U],e)}(),function(){function e(){}var t;return t=e,e.fromJSON=function(e){return F(e,t)},(0,P.__decorate)([$(),(0,P.__metadata)("design:type",String)],e.prototype,"color",void 0),t=(0,P.__decorate)([U],e)}()),he=(function(){function e(){}var t;t=e,e.fromJSON=function(e){return F(e,t)},(0,P.__decorate)([$(),(0,P.__metadata)("design:type",Number)],e.prototype,"campaignid",void 0),(0,P.__decorate)([$(),(0,P.__metadata)("design:type",Number)],e.prototype,"group_buy_price",void 0),(0,P.__decorate)([$(),(0,P.__metadata)("design:type",Number)],e.prototype,"start_time",void 0),(0,P.__decorate)([$(),(0,P.__metadata)("design:type",Number)],e.prototype,"end_time",void 0),(0,P.__decorate)([$(),(0,P.__metadata)("design:type",Number)],e.prototype,"group_size",void 0),(0,P.__decorate)([$(),(0,P.__metadata)("design:type",Number)],e.prototype,"purchase_limit",void 0),(0,P.__decorate)([$(),(0,P.__metadata)("design:type",Number)],e.prototype,"payment_duration",void 0),(0,P.__decorate)([$(),(0,P.__metadata)("design:type",String)],e.prototype,"custom_name",void 0),(0,P.__decorate)([$({mapTo:function(){return String}}),(0,P.__metadata)("design:type",Array)],e.prototype,"custom_images",void 0),(0,P.__decorate)([$(),(0,P.__metadata)("design:type",Number)],e.prototype,"group_buy_catid",void 0),(0,P.__decorate)([$(),(0,P.__metadata)("design:type",Number)],e.prototype,"users_paid",void 0),e=t=(0,P.__decorate)([U],e)}(),function(){function e(){}var t;t=e,e.fromJSON=function(e){return F(e,t)},(0,P.__decorate)([$(),(0,P.__metadata)("design:type",String)],e.prototype,"custom_name",void 0),(0,P.__decorate)([$(),(0,P.__metadata)("design:type",String)],e.prototype,"custom_image",void 0),e=t=(0,P.__decorate)([U],e)}(),function(){function e(){}var t;t=e,e.fromJSON=function(e){return F(e,t)},(0,P.__decorate)([$(),(0,P.__metadata)("design:type",Number)],e.prototype,"preview_end_time",void 0),e=t=(0,P.__decorate)([U],e)}(),function(){function e(){}var t;t=e,e.fromJSON=function(e){return F(e,t)},(0,P.__decorate)([$(),(0,P.__metadata)("design:type",Number)],e.prototype,"add_on_deal_id",void 0),(0,P.__decorate)([$(),(0,P.__metadata)("design:type",String)],e.prototype,"add_on_deal_label",void 0),(0,P.__decorate)([$(),(0,P.__metadata)("design:type",Number)],e.prototype,"sub_type",void 0),e=t=(0,P.__decorate)([U],e)}(),function(){function e(){}var t;t=e,e.fromJSON=function(e){return F(e,t)},(0,P.__decorate)([$(),(0,P.__metadata)("design:type",Number)],e.prototype,"promotion_id",void 0),(0,P.__decorate)([$(),(0,P.__metadata)("design:type",String)],e.prototype,"voucher_code",void 0),(0,P.__decorate)([$(),(0,P.__metadata)("design:type",String)],e.prototype,"label",void 0),e=t=(0,P.__decorate)([U],e)}(),function(){function e(){}var t;t=e,e.fromJSON=function(e){return F(e,t)},(0,P.__decorate)([$({mapTo:function(){return he}}),(0,P.__metadata)("design:type",Array)],e.prototype,"exclusive_price_results",void 0),e=t=(0,P.__decorate)([U],e)}(),function(){function e(){}var t;return t=e,e.fromJSON=function(e){return F(e,t)},(0,P.__decorate)([$(),(0,P.__metadata)("design:type",Number)],e.prototype,"promotion_id",void 0),(0,P.__decorate)([$(),(0,P.__metadata)("design:type",Boolean)],e.prototype,"is_entitled",void 0),(0,P.__decorate)([$(),(0,P.__metadata)("design:type",Number)],e.prototype,"save_amount",void 0),(0,P.__decorate)([$(),(0,P.__metadata)("design:type",String)],e.prototype,"label",void 0),(0,P.__decorate)([$(),(0,P.__metadata)("design:type",String)],e.prototype,"url",void 0),(0,P.__decorate)([$(),(0,P.__metadata)("design:type",String)],e.prototype,"url_text",void 0),(0,P.__decorate)([$(),(0,P.__metadata)("design:type",String)],e.prototype,"mobile_image",void 0),(0,P.__decorate)([$(),(0,P.__metadata)("design:type",String)],e.prototype,"pc_image",void 0),(0,P.__decorate)([$(),(0,P.__metadata)("design:type",String)],e.prototype,"background_color",void 0),(0,P.__decorate)([$(),(0,P.__metadata)("design:type",Number)],e.prototype,"model_ep_price",void 0),(0,P.__decorate)([$(),(0,P.__metadata)("design:type",Number)],e.prototype,"model_ep_discount",void 0),t=(0,P.__decorate)([U],e)}()),ye=(function(){function e(){}var t;t=e,e.fromJSON=function(e){return F(e,t)},(0,P.__decorate)([$(),(0,P.__metadata)("design:type",Number)],e.prototype,"order_max_purchase_limit",void 0),(0,P.__decorate)([$(),(0,P.__metadata)("design:type",Number)],e.prototype,"overall_purchase_limit",void 0),(0,P.__decorate)([$(),(0,P.__metadata)("design:type",Number)],e.prototype,"item_overall_quota",void 0),(0,P.__decorate)([$(),(0,P.__metadata)("design:type",Number)],e.prototype,"start_date",void 0),(0,P.__decorate)([$(),(0,P.__metadata)("design:type",Number)],e.prototype,"end_date",void 0),e=t=(0,P.__decorate)([U],e)}(),function(){function e(){}var t;return t=e,e.fromJSON=function(e){return F(e,t)},(0,P.__decorate)([$(),(0,P.__metadata)("design:type",Number)],e.prototype,"promotionid",void 0),(0,P.__decorate)([$(),(0,P.__metadata)("design:type",String)],e.prototype,"voucher_code",void 0),(0,P.__decorate)([$(),(0,P.__metadata)("design:type",Number)],e.prototype,"reward_type",void 0),(0,P.__decorate)([$(),(0,P.__metadata)("design:type",Number)],e.prototype,"discount_value",void 0),(0,P.__decorate)([$(),(0,P.__metadata)("design:type",Number)],e.prototype,"discount_percentage",void 0),(0,P.__decorate)([$(),(0,P.__metadata)("design:type",Number)],e.prototype,"coin_percentage",void 0),(0,P.__decorate)([$(),(0,P.__metadata)("design:type",Number)],e.prototype,"min_spend",void 0),t=(0,P.__decorate)([U],e)}()),fe=(function(){function e(){}var t;t=e,e.fromJSON=function(e){return F(e,t)},(0,P.__decorate)([$(),(0,P.__metadata)("design:type",Number)],e.prototype,"flash_sale_price",void 0),(0,P.__decorate)([$(),(0,P.__metadata)("design:type",String)],e.prototype,"hidden_price_display",void 0),(0,P.__decorate)([$(),(0,P.__metadata)("design:type",Number)],e.prototype,"extra_discount",void 0),(0,P.__decorate)([$(),(0,P.__metadata)("design:type",Number)],e.prototype,"extra_discount_stock",void 0),(0,P.__decorate)([$(),(0,P.__metadata)("design:type",Number)],e.prototype,"start_time",void 0),(0,P.__decorate)([$(),(0,P.__metadata)("design:type",Number)],e.prototype,"end_time",void 0),e=t=(0,P.__decorate)([U],e)}(),function(){function e(){}var t;t=e,e.fromJSON=function(e){return F(e,t)},(0,P.__decorate)([$(),(0,P.__metadata)("design:type",Number)],e.prototype,"order_id",void 0),(0,P.__decorate)([$(),(0,P.__metadata)("design:type",Boolean)],e.prototype,"apply_coin_limits_validate",void 0),e=t=(0,P.__decorate)([U],e)}(),function(){function e(){}var t;return t=e,e.fromJSON=function(e){return F(e,t)},(0,P.__decorate)([$(),(0,P.__metadata)("design:type",Number)],e.prototype,"coins_earned_with_pictures_or_videos",void 0),(0,P.__decorate)([$(),(0,P.__metadata)("design:type",Number)],e.prototype,"coins_earned_with_pictures_and_videos",void 0),(0,P.__decorate)([$(),(0,P.__metadata)("design:type",Number)],e.prototype,"coins_earned_with_human_or_object",void 0),(0,P.__decorate)([$(),(0,P.__metadata)("design:type",Number)],e.prototype,"size_info_rewards",void 0),t=(0,P.__decorate)([U],e)}()),ve=function(){function e(){}var t;return t=e,e.fromJSON=function(e){return F(e,t)},(0,P.__decorate)([$(),(0,P.__metadata)("design:type",Number)],e.prototype,"item_id",void 0),(0,P.__decorate)([$({mapTo:function(){return fe}}),(0,P.__metadata)("design:type",fe)],e.prototype,"coin_reward_rule",void 0),t=(0,P.__decorate)([U],e)}(),be=function(){function e(){}var t;return t=e,e.fromJSON=function(e){return F(e,t)},(0,P.__decorate)([$(),(0,P.__metadata)("design:type",Number)],e.prototype,"threshold",void 0),(0,P.__decorate)([$(),(0,P.__metadata)("design:type",Number)],e.prototype,"max_times",void 0),(0,P.__decorate)([$(),(0,P.__metadata)("design:type",Number)],e.prototype,"duration",void 0),t=(0,P.__decorate)([U],e)}(),Ee=function(){function e(){}var t;return t=e,e.fromJSON=function(e){return F(e,t)},(0,P.__decorate)([$(),(0,P.__metadata)("design:type",Number)],e.prototype,"item_id",void 0),(0,P.__decorate)([$(),(0,P.__metadata)("design:type",Boolean)],e.prototype,"passed",void 0),(0,P.__decorate)([$({mapTo:function(){return be}}),(0,P.__metadata)("design:type",be)],e.prototype,"limits_info",void 0),t=(0,P.__decorate)([U],e)}(),Ce=(function(){function e(){}var t;t=e,e.fromJSON=function(e){return F(e,t)},(0,P.__decorate)([$({mapTo:function(){return Ee}}),(0,P.__metadata)("design:type",Array)],e.prototype,"coin_limits_validate_result",void 0),e=t=(0,P.__decorate)([U],e)}(),function(){function e(){}var t;t=e,e.fromJSON=function(e){return F(e,t)},(0,P.__decorate)([$(),(0,P.__metadata)("design:type",Number)],e.prototype,"error",void 0),(0,P.__decorate)([$(),(0,P.__metadata)("design:type",String)],e.prototype,"error_msg",void 0),(0,P.__decorate)([$({mapTo:function(){return ve}}),(0,P.__metadata)("design:type",Array)],e.prototype,"coin_reward_rule_list",void 0),(0,P.__decorate)([$({mapTo:function(){return Ee}}),(0,P.__metadata)("design:type",Array)],e.prototype,"coin_limits_validate_result",void 0),e=t=(0,P.__decorate)([U],e)}(),function(){function e(){}var t;t=e,e.fromJSON=function(e){return F(e,t)},(0,P.__decorate)([$(),(0,P.__metadata)("design:type",Number)],e.prototype,"shopid",void 0),(0,P.__decorate)([$(),(0,P.__metadata)("design:type",Number)],e.prototype,"orderid",void 0),e=t=(0,P.__decorate)([U],e)}(),function(){function e(){}var t;t=e,e.fromJSON=function(e){return F(e,t)},(0,P.__decorate)([$(),(0,P.__metadata)("design:type",Number)],e.prototype,"error",void 0),(0,P.__decorate)([$(),(0,P.__metadata)("design:type",String)],e.prototype,"error_msg",void 0),(0,P.__decorate)([$({mapTo:function(){return Ce}}),(0,P.__metadata)("design:type",Ce)],e.prototype,"data",void 0),e=t=(0,P.__decorate)([U],e)}(),function(){function e(){}var t;return t=e,e.fromJSON=function(e){return F(e,t)},(0,P.__decorate)([$(),(0,P.__metadata)("design:type",Boolean)],e.prototype,"can_rate",void 0),t=(0,P.__decorate)([U],e)}()),we=(function(){function e(){}var t;t=e,e.fromJSON=function(e){return F(e,t)},(0,P.__decorate)([$(),(0,P.__metadata)("design:type",String)],e.prototype,"raw_data",void 0),(0,P.__decorate)([$(),(0,P.__metadata)("design:type",Boolean)],e.prototype,"apply_coin_limits_validate",void 0),e=t=(0,P.__decorate)([U],e)}(),function(){function e(){}var t;return t=e,e.fromJSON=function(e){return F(e,t)},(0,P.__decorate)([$(),(0,P.__metadata)("design:type",Boolean)],e.prototype,"coin_succ",void 0),(0,P.__decorate)([$(),(0,P.__metadata)("design:type",Boolean)],e.prototype,"order_succ",void 0),(0,P.__decorate)([$(),(0,P.__metadata)("design:type",Number)],e.prototype,"review_prize_status",void 0),t=(0,P.__decorate)([U],e)}()),Se=function(){function e(){}var t;return t=e,e.fromJSON=function(e){return F(e,t)},(0,P.__decorate)([$(),(0,P.__metadata)("design:type",Number)],e.prototype,"coins_earned",void 0),(0,P.__decorate)([$(),(0,P.__metadata)("design:type",Number)],e.prototype,"available_amount",void 0),(0,P.__decorate)([$(),(0,P.__metadata)("design:type",Number)],e.prototype,"referral_coins",void 0),(0,P.__decorate)([$({mapTo:function(){return we}}),(0,P.__metadata)("design:type",we)],e.prototype,"extra_info",void 0),t=(0,P.__decorate)([U],e)}(),Re=(function(){function e(){}var t;t=e,e.fromJSON=function(e){return F(e,t)},(0,P.__decorate)([$(),(0,P.__metadata)("design:type",Number)],e.prototype,"error",void 0),(0,P.__decorate)([$(),(0,P.__metadata)("design:type",String)],e.prototype,"error_msg",void 0),(0,P.__decorate)([$({mapTo:function(){return Se}}),(0,P.__metadata)("design:type",Se)],e.prototype,"data",void 0),(0,P.__decorate)([$({mapTo:function(){return Ee}}),(0,P.__metadata)("design:type",Array)],e.prototype,"coin_limits_validate_result",void 0),e=t=(0,P.__decorate)([U],e)}(),function(){function e(){}var t;t=e,e.fromJSON=function(e){return F(e,t)},(0,P.__decorate)([$(),(0,P.__metadata)("design:type",Number)],e.prototype,"userid",void 0),(0,P.__decorate)([$(),(0,P.__metadata)("design:type",Number)],e.prototype,"offset",void 0),(0,P.__decorate)([$(),(0,P.__metadata)("design:type",Number)],e.prototype,"limit",void 0),(0,P.__decorate)([$(),(0,P.__metadata)("design:type",Number)],e.prototype,"type",void 0),e=t=(0,P.__decorate)([U],e)}(),function(){function e(){}var t;t=e,e.fromJSON=function(e){return F(e,t)},(0,P.__decorate)([$(),(0,P.__metadata)("design:type",Number)],e.prototype,"error",void 0),(0,P.__decorate)([$(),(0,P.__metadata)("design:type",String)],e.prototype,"error_msg",void 0),(0,P.__decorate)([$({mapTo:function(){return Re}}),(0,P.__metadata)("design:type",Re)],e.prototype,"data",void 0),(0,P.__decorate)([$(),(0,P.__metadata)("design:type",Number)],e.prototype,"filter",void 0),(0,P.__decorate)([$(),(0,P.__metadata)("design:type",Number)],e.prototype,"flag",void 0),(0,P.__decorate)([$(),(0,P.__metadata)("design:type",Number)],e.prototype,"type",void 0),e=t=(0,P.__decorate)([U],e)}(),function(){function e(){}var t;return t=e,e.fromJSON=function(e){return F(e,t)},(0,P.__decorate)([$({mapTo:function(){return ke}}),(0,P.__metadata)("design:type",Array)],e.prototype,"items",void 0),t=(0,P.__decorate)([U],e)}()),ke=function(){function e(){}var t;return t=e,e.fromJSON=function(e){return F(e,t)},(0,P.__decorate)([$(),(0,P.__metadata)("design:type",Number)],e.prototype,"cmtid",void 0),(0,P.__decorate)([$(),(0,P.__metadata)("design:type",Number)],e.prototype,"userid",void 0),(0,P.__decorate)([$(),(0,P.__metadata)("design:type",Number)],e.prototype,"shopid",void 0),(0,P.__decorate)([$(),(0,P.__metadata)("design:type",Number)],e.prototype,"orderid",void 0),(0,P.__decorate)([$(),(0,P.__metadata)("design:type",Number)],e.prototype,"rating",void 0),(0,P.__decorate)([$(),(0,P.__metadata)("design:type",String)],e.prototype,"comment",void 0),(0,P.__decorate)([$(),(0,P.__metadata)("design:type",Number)],e.prototype,"ctime",void 0),(0,P.__decorate)([$(),(0,P.__metadata)("design:type",Number)],e.prototype,"mtime",void 0),(0,P.__decorate)([$(),(0,P.__metadata)("design:type",Number)],e.prototype,"status",void 0),(0,P.__decorate)([$(),(0,P.__metadata)("design:type",Number)],e.prototype,"rating_star",void 0),(0,P.__decorate)([$(),(0,P.__metadata)("design:type",Number)],e.prototype,"editable",void 0),(0,P.__decorate)([$(),(0,P.__metadata)("design:type",Number)],e.prototype,"opt",void 0),(0,P.__decorate)([$({mapTo:function(){return ce}}),(0,P.__metadata)("design:type",Array)],e.prototype,"mentioned",void 0),(0,P.__decorate)([$(),(0,P.__metadata)("design:type",String)],e.prototype,"author_username",void 0),(0,P.__decorate)([$(),(0,P.__metadata)("design:type",String)],e.prototype,"author_portrait",void 0),(0,P.__decorate)([$(),(0,P.__metadata)("design:type",Number)],e.prototype,"author_shopid",void 0),(0,P.__decorate)([$(),(0,P.__metadata)("design:type",Boolean)],e.prototype,"anonymous",void 0),(0,P.__decorate)([$(),(0,P.__metadata)("design:type",Number)],e.prototype,"editable_date",void 0),(0,P.__decorate)([$({mapTo:function(){return String}}),(0,P.__metadata)("design:type",Array)],e.prototype,"images",void 0),(0,P.__decorate)([$({mapTo:function(){return de}}),(0,P.__metadata)("design:type",Array)],e.prototype,"product_items",void 0),(0,P.__decorate)([$(),(0,P.__metadata)("design:type",String)],e.prototype,"delete_reason",void 0),(0,P.__decorate)([$(),(0,P.__metadata)("design:type",String)],e.prototype,"delete_operator",void 0),(0,P.__decorate)([$({mapTo:function(){return Ne}}),(0,P.__metadata)("design:type",Ne)],e.prototype,"UserRatingReply",void 0),(0,P.__decorate)([$(),(0,P.__metadata)("design:type",Boolean)],e.prototype,"show_reply",void 0),t=(0,P.__decorate)([U],e)}(),Ne=function(){function e(){}var t;return t=e,e.fromJSON=function(e){return F(e,t)},(0,P.__decorate)([$(),(0,P.__metadata)("design:type",Number)],e.prototype,"cmtid",void 0),(0,P.__decorate)([$(),(0,P.__metadata)("design:type",Number)],e.prototype,"userid",void 0),(0,P.__decorate)([$(),(0,P.__metadata)("design:type",Number)],e.prototype,"shopid",void 0),(0,P.__decorate)([$(),(0,P.__metadata)("design:type",Number)],e.prototype,"orderid",void 0),(0,P.__decorate)([$(),(0,P.__metadata)("design:type",Number)],e.prototype,"rating",void 0),(0,P.__decorate)([$(),(0,P.__metadata)("design:type",String)],e.prototype,"comment",void 0),(0,P.__decorate)([$(),(0,P.__metadata)("design:type",Number)],e.prototype,"ctime",void 0),(0,P.__decorate)([$(),(0,P.__metadata)("design:type",Number)],e.prototype,"mtime",void 0),(0,P.__decorate)([$(),(0,P.__metadata)("design:type",Number)],e.prototype,"status",void 0),(0,P.__decorate)([$(),(0,P.__metadata)("design:type",Number)],e.prototype,"rating_star",void 0),(0,P.__decorate)([$(),(0,P.__metadata)("design:type",Number)],e.prototype,"editable",void 0),(0,P.__decorate)([$(),(0,P.__metadata)("design:type",Number)],e.prototype,"opt",void 0),(0,P.__decorate)([$({mapTo:function(){return ce}}),(0,P.__metadata)("design:type",Array)],e.prototype,"mentioned",void 0),t=(0,P.__decorate)([U],e)}(),Me=(function(){function e(){}var t;t=e,e.fromJSON=function(e){return F(e,t)},(0,P.__decorate)([$(),(0,P.__metadata)("design:type",String)],e.prototype,"shop",void 0),(0,P.__decorate)([$(),(0,P.__metadata)("design:type",String)],e.prototype,"user",void 0),e=t=(0,P.__decorate)([U],e)}(),function(){function e(){}var t;t=e,e.fromJSON=function(e){return F(e,t)},(0,P.__decorate)([$(),(0,P.__metadata)("design:type",String)],e.prototype,"shop",void 0),(0,P.__decorate)([$(),(0,P.__metadata)("design:type",String)],e.prototype,"user",void 0),e=t=(0,P.__decorate)([U],e)}(),function(){function e(){}var t;t=e,e.fromJSON=function(e){return F(e,t)},(0,P.__decorate)([$(),(0,P.__metadata)("design:type",Number)],e.prototype,"shopid",void 0),(0,P.__decorate)([$(),(0,P.__metadata)("design:type",Number)],e.prototype,"itemid",void 0),e=t=(0,P.__decorate)([U],e)}(),function(){function e(){}var t;return t=e,e.fromJSON=function(e){return F(e,t)},(0,P.__decorate)([$(),(0,P.__metadata)("design:type",String)],e.prototype,"name",void 0),(0,P.__decorate)([$(),(0,P.__metadata)("design:type",String)],e.prototype,"image",void 0),t=(0,P.__decorate)([U],e)}()),Oe=function(){function e(){}var t;return t=e,e.fromJSON=function(e){return F(e,t)},(0,P.__decorate)([$(),(0,P.__metadata)("design:type",String)],e.prototype,"name",void 0),(0,P.__decorate)([$({mapTo:function(){return Me}}),(0,P.__metadata)("design:type",Array)],e.prototype,"options",void 0),t=(0,P.__decorate)([U],e)}(),Te=function(){function e(){}var t;return t=e,e.fromJSON=function(e){return F(e,t)},(0,P.__decorate)([$(),(0,P.__metadata)("design:type",String)],e.prototype,"name",void 0),(0,P.__decorate)([$(),(0,P.__metadata)("design:type",Number)],e.prototype,"count",void 0),t=(0,P.__decorate)([U],e)}(),Ie=function(){function e(){}var t;return t=e,e.fromJSON=function(e){return F(e,t)},(0,P.__decorate)([$(),(0,P.__metadata)("design:type",String)],e.prototype,"item_name",void 0),(0,P.__decorate)([$(),(0,P.__metadata)("design:type",String)],e.prototype,"item_image",void 0),(0,P.__decorate)([$({mapTo:function(){return Oe}}),(0,P.__metadata)("design:type",Array)],e.prototype,"option_infos",void 0),(0,P.__decorate)([$({mapTo:function(){return Te}}),(0,P.__metadata)("design:type",Array)],e.prototype,"count_infos",void 0),(0,P.__decorate)([$(),(0,P.__metadata)("design:type",Boolean)],e.prototype,"downgrade_switch",void 0),t=(0,P.__decorate)([U],e)}(),Le=function(){function e(){}var t;return t=e,e.fromJSON=function(e){return F(e,t)},(0,P.__decorate)([$(),(0,P.__metadata)("design:type",Number)],e.prototype,"error",void 0),(0,P.__decorate)([$(),(0,P.__metadata)("design:type",String)],e.prototype,"error_msg",void 0),(0,P.__decorate)([$({mapTo:function(){return Ie}}),(0,P.__metadata)("design:type",Ie)],e.prototype,"data",void 0),t=(0,P.__decorate)([U],e)}(),Ae=(function(){function e(){}var t;t=e,e.fromJSON=function(e){return F(e,t)},(0,P.__decorate)([$(),(0,P.__metadata)("design:type",Number)],e.prototype,"cmtid",void 0),(0,P.__decorate)([$(),(0,P.__metadata)("design:type",Number)],e.prototype,"is_seller",void 0),(0,P.__decorate)([$(),(0,P.__metadata)("design:type",Number)],e.prototype,"shopid",void 0),e=t=(0,P.__decorate)([U],e)}(),function(){function e(){}var t;t=e,e.fromJSON=function(e){return F(e,t)},(0,P.__decorate)([$(),(0,P.__metadata)("design:type",Number)],e.prototype,"error",void 0),(0,P.__decorate)([$(),(0,P.__metadata)("design:type",String)],e.prototype,"error_msg",void 0),(0,P.__decorate)([$({mapTo:function(){return ee}}),(0,P.__metadata)("design:type",ee)],e.prototype,"data",void 0),e=t=(0,P.__decorate)([U],e)}(),function(){function e(){}var t;t=e,e.fromJSON=function(e){return F(e,t)},e=t=(0,P.__decorate)([U],e)}(),function(){function e(){}var t;t=e,e.fromJSON=function(e){return F(e,t)},(0,P.__decorate)([$({mapTo:function(){return Ae}}),(0,P.__metadata)("design:type",Ae)],e.prototype,"data",void 0),(0,P.__decorate)([$(),(0,P.__metadata)("design:type",Number)],e.prototype,"be_error",void 0),(0,P.__decorate)([$(),(0,P.__metadata)("design:type",String)],e.prototype,"error_msg",void 0),(0,P.__decorate)([$(),(0,P.__metadata)("design:type",Number)],e.prototype,"error",void 0),e=t=(0,P.__decorate)([U],e)}(),function(){function e(){}var t;return t=e,e.fromJSON=function(e){return F(e,t)},(0,P.__decorate)([$(),(0,P.__metadata)("design:type",Number)],e.prototype,"minimum_videos",void 0),(0,P.__decorate)([$({mapTo:function(){return xe}}),(0,P.__metadata)("design:type",Array)],e.prototype,"tags",void 0),(0,P.__decorate)([$(),(0,P.__metadata)("design:type",Number)],e.prototype,"coins_earned_with_pics_and_videos",void 0),(0,P.__decorate)([$(),(0,P.__metadata)("design:type",Number)],e.prototype,"coins_earned",void 0),(0,P.__decorate)([$(),(0,P.__metadata)("design:type",Number)],e.prototype,"minimum_characters",void 0),(0,P.__decorate)([$(),(0,P.__metadata)("design:type",Number)],e.prototype,"minimum_pictures",void 0),(0,P.__decorate)([$({mapTo:function(){return De}}),(0,P.__metadata)("design:type",De)],e.prototype,"popup_config",void 0),(0,P.__decorate)([$(),(0,P.__metadata)("design:type",Number)],e.prototype,"default_rating_star",void 0),t=(0,P.__decorate)([U],e)}()),xe=function(){function e(){}var t;return t=e,e.fromJSON=function(e){return F(e,t)},(0,P.__decorate)([$(),(0,P.__metadata)("design:type",Number)],e.prototype,"rating_star",void 0),(0,P.__decorate)([$({mapTo:function(){return le}}),(0,P.__metadata)("design:type",Array)],e.prototype,"tags",void 0),t=(0,P.__decorate)([U],e)}(),De=(function(){function e(){}var t;t=e,e.fromJSON=function(e){return F(e,t)},(0,P.__decorate)([$(),(0,P.__metadata)("design:type",String)],e.prototype,"item",void 0),(0,P.__decorate)([$(),(0,P.__metadata)("design:type",String)],e.prototype,"model",void 0),e=t=(0,P.__decorate)([U],e)}(),function(){function e(){}var t;return t=e,e.fromJSON=function(e){return F(e,t)},(0,P.__decorate)([$(),(0,P.__metadata)("design:type",String)],e.prototype,"popup_text",void 0),(0,P.__decorate)([$(),(0,P.__metadata)("design:type",String)],e.prototype,"popup_button_refer_now",void 0),(0,P.__decorate)([$(),(0,P.__metadata)("design:type",String)],e.prototype,"popup_refer_now_url",void 0),t=(0,P.__decorate)([U],e)}()),Be=(function(){function e(){}var t;t=e,e.fromJSON=function(e){return F(e,t)},(0,P.__decorate)([$(),(0,P.__metadata)("design:type",Number)],e.prototype,"shopid",void 0),(0,P.__decorate)([$(),(0,P.__metadata)("design:type",Number)],e.prototype,"userid",void 0),(0,P.__decorate)([$(),(0,P.__metadata)("design:type",Number)],e.prototype,"offset",void 0),(0,P.__decorate)([$(),(0,P.__metadata)("design:type",Number)],e.prototype,"limit",void 0),(0,P.__decorate)([$(),(0,P.__metadata)("design:type",Number)],e.prototype,"filter",void 0),(0,P.__decorate)([$(),(0,P.__metadata)("design:type",Number)],e.prototype,"type",void 0),e=t=(0,P.__decorate)([U],e)}(),function(){function e(){}var t;t=e,e.fromJSON=function(e){return F(e,t)},(0,P.__decorate)([$(),(0,P.__metadata)("design:type",Number)],e.prototype,"error",void 0),(0,P.__decorate)([$(),(0,P.__metadata)("design:type",String)],e.prototype,"error_msg",void 0),(0,P.__decorate)([$({mapTo:function(){return Be}}),(0,P.__metadata)("design:type",Be)],e.prototype,"data",void 0),e=t=(0,P.__decorate)([U],e)}(),function(){function e(){}var t;return t=e,e.fromJSON=function(e){return F(e,t)},(0,P.__decorate)([$({mapTo:function(){return ee}}),(0,P.__metadata)("design:type",Array)],e.prototype,"items",void 0),(0,P.__decorate)([$(),(0,P.__metadata)("design:type",Boolean)],e.prototype,"rateable",void 0),t=(0,P.__decorate)([U],e)}()),je=(function(){function e(){}var t;t=e,e.fromJSON=function(e){return F(e,t)},(0,P.__decorate)([$(),(0,P.__metadata)("design:type",Number)],e.prototype,"orderid",void 0),e=t=(0,P.__decorate)([U],e)}(),function(){function e(){}var t;t=e,e.fromJSON=function(e){return F(e,t)},(0,P.__decorate)([$(),(0,P.__metadata)("design:type",Number)],e.prototype,"error",void 0),(0,P.__decorate)([$(),(0,P.__metadata)("design:type",String)],e.prototype,"error_msg",void 0),(0,P.__decorate)([$({mapTo:function(){return je}}),(0,P.__metadata)("design:type",je)],e.prototype,"buyer",void 0),e=t=(0,P.__decorate)([U],e)}(),function(){function e(){}var t;return t=e,e.fromJSON=function(e){return F(e,t)},(0,P.__decorate)([$(),(0,P.__metadata)("design:type",Number)],e.prototype,"shopid",void 0),(0,P.__decorate)([$(),(0,P.__metadata)("design:type",Number)],e.prototype,"userid",void 0),(0,P.__decorate)([$(),(0,P.__metadata)("design:type",String)],e.prototype,"username",void 0),(0,P.__decorate)([$(),(0,P.__metadata)("design:type",String)],e.prototype,"portrait",void 0),t=(0,P.__decorate)([U],e)}()),Pe=(function(){function e(){}var t;t=e,e.fromJSON=function(e){return F(e,t)},(0,P.__decorate)([$({mapTo:function(){return Pe}}),(0,P.__metadata)("design:type",Array)],e.prototype,"data",void 0),(0,P.__decorate)([$(),(0,P.__metadata)("design:type",Number)],e.prototype,"orderid",void 0),e=t=(0,P.__decorate)([U],e)}(),function(){function e(){}var t;return t=e,e.fromJSON=function(e){return F(e,t)},(0,P.__decorate)([$(),(0,P.__metadata)("design:type",Number)],e.prototype,"itemid",void 0),(0,P.__decorate)([$({mapTo:function(){return String}}),(0,P.__metadata)("design:type",Array)],e.prototype,"comments",void 0),t=(0,P.__decorate)([U],e)}()),qe=(function(){function e(){}var t;t=e,e.fromJSON=function(e){return F(e,t)},(0,P.__decorate)([$(),(0,P.__metadata)("design:type",Number)],e.prototype,"error",void 0),(0,P.__decorate)([$(),(0,P.__metadata)("design:type",String)],e.prototype,"error_msg",void 0),(0,P.__decorate)([$({mapTo:function(){return qe}}),(0,P.__metadata)("design:type",Array)],e.prototype,"data",void 0),e=t=(0,P.__decorate)([U],e)}(),function(){function e(){}var t;return t=e,e.fromJSON=function(e){return F(e,t)},(0,P.__decorate)([$(),(0,P.__metadata)("design:type",Number)],e.prototype,"itemid",void 0),(0,P.__decorate)([$({mapTo:function(){return Ue}}),(0,P.__metadata)("design:type",Ue)],e.prototype,"score",void 0),t=(0,P.__decorate)([U],e)}()),Ue=function(){function e(){}var t;return t=e,e.fromJSON=function(e){return F(e,t)},(0,P.__decorate)([$(),(0,P.__metadata)("design:type",Number)],e.prototype,"text",void 0),(0,P.__decorate)([$(),(0,P.__metadata)("design:type",Number)],e.prototype,"symbol",void 0),(0,P.__decorate)([$(),(0,P.__metadata)("design:type",Number)],e.prototype,"total",void 0),t=(0,P.__decorate)([U],e)}(),We=(function(){function e(){}var t;t=e,e.fromJSON=function(e){return F(e,t)},(0,P.__decorate)([$(),(0,P.__metadata)("design:type",Number)],e.prototype,"offset",void 0),(0,P.__decorate)([$(),(0,P.__metadata)("design:type",Number)],e.prototype,"limit",void 0),e=t=(0,P.__decorate)([U],e)}(),function(){function e(){}var t;t=e,e.fromJSON=function(e){return F(e,t)},(0,P.__decorate)([$(),(0,P.__metadata)("design:type",Number)],e.prototype,"error",void 0),(0,P.__decorate)([$(),(0,P.__metadata)("design:type",String)],e.prototype,"error_msg",void 0),(0,P.__decorate)([$({mapTo:function(){return We}}),(0,P.__metadata)("design:type",We)],e.prototype,"data",void 0),e=t=(0,P.__decorate)([U],e)}(),function(){function e(){}var t;return t=e,e.fromJSON=function(e){return F(e,t)},(0,P.__decorate)([$({mapTo:function(){return ee}}),(0,P.__metadata)("design:type",Array)],e.prototype,"rate_list",void 0),(0,P.__decorate)([$(),(0,P.__metadata)("design:type",Boolean)],e.prototype,"is_end",void 0),t=(0,P.__decorate)([U],e)}()),Fe=(function(){function e(){}var t;t=e,e.fromJSON=function(e){return F(e,t)},(0,P.__decorate)([$(),(0,P.__metadata)("design:type",Number)],e.prototype,"orderid",void 0),(0,P.__decorate)([$(),(0,P.__metadata)("design:type",Number)],e.prototype,"limit",void 0),(0,P.__decorate)([$(),(0,P.__metadata)("design:type",Number)],e.prototype,"is_asc",void 0),(0,P.__decorate)([$(),(0,P.__metadata)("design:type",Boolean)],e.prototype,"apply_coin_limits_validate",void 0),e=t=(0,P.__decorate)([U],e)}(),function(){function e(){}var t;return t=e,e.fromJSON=function(e){return F(e,t)},(0,P.__decorate)([$(),(0,P.__metadata)("design:type",Number)],e.prototype,"shop_id",void 0),(0,P.__decorate)([$(),(0,P.__metadata)("design:type",String)],e.prototype,"shop_name",void 0),(0,P.__decorate)([$(),(0,P.__metadata)("design:type",Number)],e.prototype,"user_id",void 0),(0,P.__decorate)([$(),(0,P.__metadata)("design:type",String)],e.prototype,"user_name",void 0),t=(0,P.__decorate)([U],e)}()),$e=function(){function e(){}var t;return t=e,e.fromJSON=function(e){return F(e,t)},(0,P.__decorate)([$(),(0,P.__metadata)("design:type",Number)],e.prototype,"item_id",void 0),(0,P.__decorate)([$(),(0,P.__metadata)("design:type",Number)],e.prototype,"model_id",void 0),(0,P.__decorate)([$(),(0,P.__metadata)("design:type",Number)],e.prototype,"shop_id",void 0),(0,P.__decorate)([$(),(0,P.__metadata)("design:type",String)],e.prototype,"name",void 0),(0,P.__decorate)([$(),(0,P.__metadata)("design:type",String)],e.prototype,"model_name",void 0),(0,P.__decorate)([$(),(0,P.__metadata)("design:type",String)],e.prototype,"image",void 0),(0,P.__decorate)([$(),(0,P.__metadata)("design:type",Number)],e.prototype,"amount",void 0),(0,P.__decorate)([$(),(0,P.__metadata)("design:type",Number)],e.prototype,"status",void 0),(0,P.__decorate)([$(),(0,P.__metadata)("design:type",Number)],e.prototype,"item_price",void 0),(0,P.__decorate)([$(),(0,P.__metadata)("design:type",Number)],e.prototype,"snapshot_id",void 0),t=(0,P.__decorate)([U],e)}(),Ve=function(){function e(){}var t;return t=e,e.fromJSON=function(e){return F(e,t)},(0,P.__decorate)([$({mapTo:function(){return Fe}}),(0,P.__metadata)("design:type",Fe)],e.prototype,"shop_info",void 0),(0,P.__decorate)([$({mapTo:function(){return $e}}),(0,P.__metadata)("design:type",Array)],e.prototype,"items",void 0),(0,P.__decorate)([$(),(0,P.__metadata)("design:type",Number)],e.prototype,"order_id",void 0),(0,P.__decorate)([$(),(0,P.__metadata)("design:type",Number)],e.prototype,"coin_to_earn",void 0),(0,P.__decorate)([$(),(0,P.__metadata)("design:type",Number)],e.prototype,"rate_deadline",void 0),(0,P.__decorate)([$(),(0,P.__metadata)("design:type",Number)],e.prototype,"total_price",void 0),(0,P.__decorate)([$(),(0,P.__metadata)("design:type",String)],e.prototype,"currency",void 0),t=(0,P.__decorate)([U],e)}(),Je=function(){function e(){}var t;return t=e,e.fromJSON=function(e){return F(e,t)},(0,P.__decorate)([$(),(0,P.__metadata)("design:type",Boolean)],e.prototype,"is_end",void 0),(0,P.__decorate)([$({mapTo:function(){return Ve}}),(0,P.__metadata)("design:type",Array)],e.prototype,"rate_list",void 0),(0,P.__decorate)([$(),(0,P.__metadata)("design:type",Number)],e.prototype,"cursor",void 0),(0,P.__decorate)([$(),(0,P.__metadata)("design:type",Number)],e.prototype,"buyer_to_rate_count",void 0),t=(0,P.__decorate)([U],e)}(),He=(function(){function e(){}var t;t=e,e.fromJSON=function(e){return F(e,t)},(0,P.__decorate)([$(),(0,P.__metadata)("design:type",Number)],e.prototype,"error",void 0),(0,P.__decorate)([$(),(0,P.__metadata)("design:type",String)],e.prototype,"error_msg",void 0),(0,P.__decorate)([$({mapTo:function(){return Je}}),(0,P.__metadata)("design:type",Je)],e.prototype,"data",void 0),e=t=(0,P.__decorate)([U],e)}(),function(){function e(){}var t;t=e,e.fromJSON=function(e){return F(e,t)},(0,P.__decorate)([$(),(0,P.__metadata)("design:type",String)],e.prototype,"raw_data",void 0),e=t=(0,P.__decorate)([U],e)}(),function(){function e(){}var t;return t=e,e.fromJSON=function(e){return F(e,t)},(0,P.__decorate)([$(),(0,P.__metadata)("design:type",Number)],e.prototype,"referral_coins",void 0),t=(0,P.__decorate)([U],e)}()),Ge=(function(){function e(){}var t;t=e,e.fromJSON=function(e){return F(e,t)},(0,P.__decorate)([$({mapTo:function(){return He}}),(0,P.__metadata)("design:type",He)],e.prototype,"data",void 0),(0,P.__decorate)([$(),(0,P.__metadata)("design:type",Number)],e.prototype,"error",void 0),(0,P.__decorate)([$(),(0,P.__metadata)("design:type",String)],e.prototype,"error_msg",void 0),e=t=(0,P.__decorate)([U],e)}(),function(){function e(){}var t;t=e,e.fromJSON=function(e){return F(e,t)},(0,P.__decorate)([$(),(0,P.__metadata)("design:type",Number)],e.prototype,"cmtid",void 0),(0,P.__decorate)([$(),(0,P.__metadata)("design:type",Number)],e.prototype,"orderid",void 0),(0,P.__decorate)([$(),(0,P.__metadata)("design:type",Number)],e.prototype,"shopid",void 0),(0,P.__decorate)([$(),(0,P.__metadata)("design:type",String)],e.prototype,"comment",void 0),e=t=(0,P.__decorate)([U],e)}(),function(){function e(){}var t;return t=e,e.fromJSON=function(e){return F(e,t)},t=(0,P.__decorate)([U],e)}()),Xe=(function(){function e(){}var t;t=e,e.fromJSON=function(e){return F(e,t)},(0,P.__decorate)([$({mapTo:function(){return Ge}}),(0,P.__metadata)("design:type",Ge)],e.prototype,"data",void 0),(0,P.__decorate)([$(),(0,P.__metadata)("design:type",Number)],e.prototype,"error",void 0),(0,P.__decorate)([$(),(0,P.__metadata)("design:type",String)],e.prototype,"error_msg",void 0),e=t=(0,P.__decorate)([U],e)}(),function(){function e(){}var t;t=e,e.fromJSON=function(e){return F(e,t)},(0,P.__decorate)([$(),(0,P.__metadata)("design:type",Number)],e.prototype,"cmtid",void 0),(0,P.__decorate)([$(),(0,P.__metadata)("design:type",Number)],e.prototype,"is_seller",void 0),e=t=(0,P.__decorate)([U],e)}(),function(){function e(){}var t;t=e,e.fromJSON=function(e){return F(e,t)},(0,P.__decorate)([$(),(0,P.__metadata)("design:type",Number)],e.prototype,"error",void 0),(0,P.__decorate)([$(),(0,P.__metadata)("design:type",String)],e.prototype,"error_msg",void 0),(0,P.__decorate)([$({mapTo:function(){return ke}}),(0,P.__metadata)("design:type",ke)],e.prototype,"data",void 0),e=t=(0,P.__decorate)([U],e)}(),function(){function e(){}var t;return t=e,e.fromJSON=function(e){return F(e,t)},(0,P.__decorate)([$(),(0,P.__metadata)("design:type",String)],e.prototype,"comment",void 0),(0,P.__decorate)([$(),(0,P.__metadata)("design:type",Number)],e.prototype,"rating",void 0),(0,P.__decorate)([$({mapTo:function(){return String}}),(0,P.__metadata)("design:type",Array)],e.prototype,"photos",void 0),t=(0,P.__decorate)([U],e)}()),Qe=(function(){function e(){}var t;t=e,e.fromJSON=function(e){return F(e,t)},(0,P.__decorate)([$(),(0,P.__metadata)("design:type",Number)],e.prototype,"shopid",void 0),(0,P.__decorate)([$(),(0,P.__metadata)("design:type",Number)],e.prototype,"orderid",void 0),(0,P.__decorate)([$({mapTo:function(){return Xe}}),(0,P.__metadata)("design:type",Array)],e.prototype,"data",void 0),(0,P.__decorate)([$(),(0,P.__metadata)("design:type",Number)],e.prototype,"cmtid",void 0),e=t=(0,P.__decorate)([U],e)}(),function(){function e(){}var t;t=e,e.fromJSON=function(e){return F(e,t)},(0,P.__decorate)([$(),(0,P.__metadata)("design:type",Number)],e.prototype,"error",void 0),(0,P.__decorate)([$(),(0,P.__metadata)("design:type",String)],e.prototype,"error_msg",void 0),(0,P.__decorate)([$({mapTo:function(){return Qe}}),(0,P.__metadata)("design:type",Qe)],e.prototype,"data",void 0),e=t=(0,P.__decorate)([U],e)}(),function(){function e(){}var t;return t=e,e.fromJSON=function(e){return F(e,t)},t=(0,P.__decorate)([U],e)}()),Ze=(function(){function e(){}var t;t=e,e.fromJSON=function(e){return F(e,t)},(0,P.__decorate)([$(),(0,P.__metadata)("design:type",Number)],e.prototype,"cmtid",void 0),(0,P.__decorate)([$(),(0,P.__metadata)("design:type",Number)],e.prototype,"orderid",void 0),(0,P.__decorate)([$(),(0,P.__metadata)("design:type",Number)],e.prototype,"shopid",void 0),(0,P.__decorate)([$(),(0,P.__metadata)("design:type",String)],e.prototype,"comment",void 0),e=t=(0,P.__decorate)([U],e)}(),function(){function e(){}var t;t=e,e.fromJSON=function(e){return F(e,t)},(0,P.__decorate)([$(),(0,P.__metadata)("design:type",Number)],e.prototype,"error",void 0),(0,P.__decorate)([$(),(0,P.__metadata)("design:type",String)],e.prototype,"error_msg",void 0),e=t=(0,P.__decorate)([U],e)}(),function(){function e(){}var t;t=e,e.fromJSON=function(e){return F(e,t)},(0,P.__decorate)([$(),(0,P.__metadata)("design:type",Number)],e.prototype,"shopid",void 0),(0,P.__decorate)([$(),(0,P.__metadata)("design:type",Number)],e.prototype,"orderid",void 0),(0,P.__decorate)([$({mapTo:function(){return Xe}}),(0,P.__metadata)("design:type",Array)],e.prototype,"data",void 0),e=t=(0,P.__decorate)([U],e)}(),function(){function e(){}var t;t=e,e.fromJSON=function(e){return F(e,t)},(0,P.__decorate)([$(),(0,P.__metadata)("design:type",Number)],e.prototype,"error",void 0),(0,P.__decorate)([$(),(0,P.__metadata)("design:type",String)],e.prototype,"error_msg",void 0),(0,P.__decorate)([$({mapTo:function(){return Qe}}),(0,P.__metadata)("design:type",Qe)],e.prototype,"data",void 0),e=t=(0,P.__decorate)([U],e)}(),function(){function e(){}var t;t=e,e.fromJSON=function(e){return F(e,t)},(0,P.__decorate)([$(),(0,P.__metadata)("design:type",Number)],e.prototype,"shopid",void 0),(0,P.__decorate)([$(),(0,P.__metadata)("design:type",Number)],e.prototype,"orderid",void 0),e=t=(0,P.__decorate)([U],e)}(),function(){function e(){}var t;t=e,e.fromJSON=function(e){return F(e,t)},(0,P.__decorate)([$(),(0,P.__metadata)("design:type",Number)],e.prototype,"error",void 0),(0,P.__decorate)([$(),(0,P.__metadata)("design:type",String)],e.prototype,"error_msg",void 0),(0,P.__decorate)([$({mapTo:function(){return Ze}}),(0,P.__metadata)("design:type",Ze)],e.prototype,"data",void 0),e=t=(0,P.__decorate)([U],e)}(),function(){function e(){}var t;return t=e,e.fromJSON=function(e){return F(e,t)},(0,P.__decorate)([$(),(0,P.__metadata)("design:type",Number)],e.prototype,"expiry_time",void 0),(0,P.__decorate)([$(),(0,P.__metadata)("design:type",Boolean)],e.prototype,"is_expired",void 0),(0,P.__decorate)([$(),(0,P.__metadata)("design:type",Boolean)],e.prototype,"is_rated",void 0),(0,P.__decorate)([$(),(0,P.__metadata)("design:type",Number)],e.prototype,"orderid",void 0),(0,P.__decorate)([$(),(0,P.__metadata)("design:type",Number)],e.prototype,"shopid",void 0),(0,P.__decorate)([$(),(0,P.__metadata)("design:type",String)],e.prototype,"ordersn",void 0),(0,P.__decorate)([$(),(0,P.__metadata)("design:type",Boolean)],e.prototype,"order_privacy_toggle_status",void 0),(0,P.__decorate)([$({mapTo:function(){return ze}}),(0,P.__metadata)("design:type",Array)],e.prototype,"items",void 0),(0,P.__decorate)([$(),(0,P.__metadata)("design:type",Number)],e.prototype,"coin_to_earn",void 0),t=(0,P.__decorate)([U],e)}()),ze=function(){function e(){}var t;return t=e,e.fromJSON=function(e){return F(e,t)},(0,P.__decorate)([$(),(0,P.__metadata)("design:type",Number)],e.prototype,"itemid",void 0),(0,P.__decorate)([$(),(0,P.__metadata)("design:type",Number)],e.prototype,"modelid",void 0),(0,P.__decorate)([$(),(0,P.__metadata)("design:type",Number)],e.prototype,"shopid",void 0),(0,P.__decorate)([$(),(0,P.__metadata)("design:type",Number)],e.prototype,"orderid",void 0),(0,P.__decorate)([$(),(0,P.__metadata)("design:type",String)],e.prototype,"name",void 0),(0,P.__decorate)([$(),(0,P.__metadata)("design:type",String)],e.prototype,"image",void 0),(0,P.__decorate)([$({mapTo:function(){return String}}),(0,P.__metadata)("design:type",Array)],e.prototype,"image_list",void 0),(0,P.__decorate)([$({mapTo:function(){return String}}),(0,P.__metadata)("design:type",Array)],e.prototype,"model_names",void 0),(0,P.__decorate)([$(),(0,P.__metadata)("design:type",Boolean)],e.prototype,"sync_to_social_toggle",void 0),(0,P.__decorate)([$({mapTo:function(){return String}}),(0,P.__metadata)("design:type",Array)],e.prototype,"template_tags",void 0),(0,P.__decorate)([$({mapTo:function(){return Ke}}),(0,P.__metadata)("design:type",Ke)],e.prototype,"sync_to_social_detail",void 0),(0,P.__decorate)([$({mapTo:function(){return Ye}}),(0,P.__metadata)("design:type",Array)],e.prototype,"template_tags_hints",void 0),t=(0,P.__decorate)([U],e)}(),Ye=function(){function e(){}var t;return t=e,e.fromJSON=function(e){return F(e,t)},(0,P.__decorate)([$(),(0,P.__metadata)("design:type",String)],e.prototype,"tag",void 0),(0,P.__decorate)([$(),(0,P.__metadata)("design:type",String)],e.prototype,"hint",void 0),t=(0,P.__decorate)([U],e)}(),Ke=function(){function e(){}var t;return t=e,e.fromJSON=function(e){return F(e,t)},(0,P.__decorate)([$(),(0,P.__metadata)("design:type",Boolean)],e.prototype,"qcResult",void 0),(0,P.__decorate)([$(),(0,P.__metadata)("design:type",Boolean)],e.prototype,"enableProductRatingSync",void 0),t=(0,P.__decorate)([U],e)}(),et=(function(){function e(){}var t;t=e,e.fromJSON=function(e){return F(e,t)},(0,P.__decorate)([$(),(0,P.__metadata)("design:type",Number)],e.prototype,"shopid",void 0),(0,P.__decorate)([$(),(0,P.__metadata)("design:type",Number)],e.prototype,"cmtid",void 0),(0,P.__decorate)([$(),(0,P.__metadata)("design:type",Boolean)],e.prototype,"anonymous",void 0),e=t=(0,P.__decorate)([U],e)}(),function(){function e(){}var t;t=e,e.fromJSON=function(e){return F(e,t)},(0,P.__decorate)([$(),(0,P.__metadata)("design:type",Number)],e.prototype,"error",void 0),(0,P.__decorate)([$(),(0,P.__metadata)("design:type",String)],e.prototype,"error_msg",void 0),(0,P.__decorate)([$({mapTo:function(){return Ge}}),(0,P.__metadata)("design:type",Ge)],e.prototype,"data",void 0),e=t=(0,P.__decorate)([U],e)}(),function(){function e(){}var t;t=e,e.fromJSON=function(e){return F(e,t)},(0,P.__decorate)([$(),(0,P.__metadata)("design:type",Number)],e.prototype,"orderid",void 0),e=t=(0,P.__decorate)([U],e)}(),function(){function e(){}var t;return t=e,e.fromJSON=function(e){return F(e,t)},(0,P.__decorate)([$({mapTo:function(){return ee}}),(0,P.__metadata)("design:type",Array)],e.prototype,"items",void 0),(0,P.__decorate)([$(),(0,P.__metadata)("design:type",Boolean)],e.prototype,"rateable",void 0),t=(0,P.__decorate)([U],e)}()),tt=(function(){function e(){}var t;t=e,e.fromJSON=function(e){return F(e,t)},(0,P.__decorate)([$(),(0,P.__metadata)("design:type",Number)],e.prototype,"error",void 0),(0,P.__decorate)([$(),(0,P.__metadata)("design:type",String)],e.prototype,"error_msg",void 0),(0,P.__decorate)([$({mapTo:function(){return et}}),(0,P.__metadata)("design:type",et)],e.prototype,"data",void 0),e=t=(0,P.__decorate)([U],e)}(),function(){function e(){}var t;t=e,e.fromJSON=function(e){return F(e,t)},(0,P.__decorate)([$(),(0,P.__metadata)("design:type",Number)],e.prototype,"orderid",void 0),e=t=(0,P.__decorate)([U],e)}(),function(){function e(){}var t;return t=e,e.fromJSON=function(e){return F(e,t)},(0,P.__decorate)([$({mapTo:function(){return ke}}),(0,P.__metadata)("design:type",Array)],e.prototype,"items",void 0),t=(0,P.__decorate)([U],e)}()),at=(function(){function e(){}var t;t=e,e.fromJSON=function(e){return F(e,t)},(0,P.__decorate)([$(),(0,P.__metadata)("design:type",Number)],e.prototype,"error",void 0),(0,P.__decorate)([$(),(0,P.__metadata)("design:type",String)],e.prototype,"error_msg",void 0),(0,P.__decorate)([$({mapTo:function(){return tt}}),(0,P.__metadata)("design:type",tt)],e.prototype,"data",void 0),e=t=(0,P.__decorate)([U],e)}(),function(){function e(){}var t;t=e,e.fromJSON=function(e){return F(e,t)},(0,P.__decorate)([$(),(0,P.__metadata)("design:type",Number)],e.prototype,"cmtid",void 0),(0,P.__decorate)([$(),(0,P.__metadata)("design:type",Number)],e.prototype,"shopid",void 0),(0,P.__decorate)([$(),(0,P.__metadata)("design:type",Number)],e.prototype,"itemid",void 0),(0,P.__decorate)([$(),(0,P.__metadata)("design:type",Boolean)],e.prototype,"like",void 0),e=t=(0,P.__decorate)([U],e)}(),function(){function e(){}var t;t=e,e.fromJSON=function(e){return F(e,t)},(0,P.__decorate)([$(),(0,P.__metadata)("design:type",Number)],e.prototype,"error",void 0),(0,P.__decorate)([$(),(0,P.__metadata)("design:type",String)],e.prototype,"error_msg",void 0),(0,P.__decorate)([$({mapTo:function(){return at}}),(0,P.__metadata)("design:type",at)],e.prototype,"data",void 0),e=t=(0,P.__decorate)([U],e)}(),function(){function e(){}var t;return t=e,e.fromJSON=function(e){return F(e,t)},(0,P.__decorate)([$(),(0,P.__metadata)("design:type",Number)],e.prototype,"like_count",void 0),t=(0,P.__decorate)([U],e)}()),it=(function(){function e(){}var t;t=e,e.fromJSON=function(e){return F(e,t)},(0,P.__decorate)([$(),(0,P.__metadata)("design:type",Number)],e.prototype,"cmtid",void 0),(0,P.__decorate)([$(),(0,P.__metadata)("design:type",Number)],e.prototype,"shopid",void 0),(0,P.__decorate)([$(),(0,P.__metadata)("design:type",Number)],e.prototype,"itemid",void 0),(0,P.__decorate)([$(),(0,P.__metadata)("design:type",String)],e.prototype,"reason",void 0),e=t=(0,P.__decorate)([U],e)}(),function(){function e(){}var t;t=e,e.fromJSON=function(e){return F(e,t)},(0,P.__decorate)([$(),(0,P.__metadata)("design:type",Number)],e.prototype,"error",void 0),(0,P.__decorate)([$(),(0,P.__metadata)("design:type",String)],e.prototype,"error_msg",void 0),(0,P.__decorate)([$(),(0,P.__metadata)("design:type",Number)],e.prototype,"be_error",void 0),(0,P.__decorate)([$({mapTo:function(){return Ge}}),(0,P.__metadata)("design:type",Ge)],e.prototype,"data",void 0),e=t=(0,P.__decorate)([U],e)}(),function(){function e(){}var t;t=e,e.fromJSON=function(e){return F(e,t)},(0,P.__decorate)([$(),(0,P.__metadata)("design:type",Boolean)],e.prototype,"enable",void 0),e=t=(0,P.__decorate)([U],e)}(),function(){function e(){}var t;t=e,e.fromJSON=function(e){return F(e,t)},(0,P.__decorate)([$(),(0,P.__metadata)("design:type",Number)],e.prototype,"error",void 0),(0,P.__decorate)([$(),(0,P.__metadata)("design:type",String)],e.prototype,"error_msg",void 0),e=t=(0,P.__decorate)([U],e)}(),function(){function e(){}var t;t=e,e.fromJSON=function(e){return F(e,t)},(0,P.__decorate)([$(),(0,P.__metadata)("design:type",Number)],e.prototype,"orderid",void 0),e=t=(0,P.__decorate)([U],e)}(),function(){function e(){}var t;t=e,e.fromJSON=function(e){return F(e,t)},(0,P.__decorate)([$(),(0,P.__metadata)("design:type",Number)],e.prototype,"error",void 0),(0,P.__decorate)([$(),(0,P.__metadata)("design:type",String)],e.prototype,"error_msg",void 0),(0,P.__decorate)([$({mapTo:function(){return it}}),(0,P.__metadata)("design:type",Array)],e.prototype,"data",void 0),(0,P.__decorate)([$(),(0,P.__metadata)("design:type",String)],e.prototype,"signature",void 0),(0,P.__decorate)([$(),(0,P.__metadata)("design:type",Boolean)],e.prototype,"is_white_list_user",void 0),(0,P.__decorate)([$(),(0,P.__metadata)("design:type",Boolean)],e.prototype,"show_review_prize",void 0),e=t=(0,P.__decorate)([U],e)}(),function(){function e(){}var t;return t=e,e.fromJSON=function(e){return F(e,t)},(0,P.__decorate)([$(),(0,P.__metadata)("design:type",Number)],e.prototype,"reward_coin",void 0),(0,P.__decorate)([$(),(0,P.__metadata)("design:type",Number)],e.prototype,"item_id",void 0),t=(0,P.__decorate)([U],e)}()),ot=(function(){function e(){}var t;t=e,e.fromJSON=function(e){return F(e,t)},(0,P.__decorate)([$(),(0,P.__metadata)("design:type",Number)],e.prototype,"shop_id",void 0),(0,P.__decorate)([$(),(0,P.__metadata)("design:type",Number)],e.prototype,"item_id",void 0),e=t=(0,P.__decorate)([U],e)}(),function(){function e(){}var t;t=e,e.fromJSON=function(e){return F(e,t)},(0,P.__decorate)([$(),(0,P.__metadata)("design:type",Number)],e.prototype,"error",void 0),(0,P.__decorate)([$(),(0,P.__metadata)("design:type",String)],e.prototype,"error_msg",void 0),(0,P.__decorate)([$({mapTo:function(){return ot}}),(0,P.__metadata)("design:type",ot)],e.prototype,"data",void 0),e=t=(0,P.__decorate)([U],e)}(),function(){function e(){}var t;return t=e,e.fromJSON=function(e){return F(e,t)},(0,P.__decorate)([$(),(0,P.__metadata)("design:type",Number)],e.prototype,"shop_id",void 0),(0,P.__decorate)([$(),(0,P.__metadata)("design:type",Number)],e.prototype,"item_id",void 0),(0,P.__decorate)([$(),(0,P.__metadata)("design:type",Number)],e.prototype,"price",void 0),t=(0,P.__decorate)([U],e)}()),nt=(function(){function e(){}var t;t=e,e.fromJSON=function(e){return F(e,t)},(0,P.__decorate)([$(),(0,P.__metadata)("design:type",Number)],e.prototype,"cmt_id",void 0),(0,P.__decorate)([$(),(0,P.__metadata)("design:type",Number)],e.prototype,"order_id",void 0),(0,P.__decorate)([$(),(0,P.__metadata)("design:type",Number)],e.prototype,"shop_id",void 0),(0,P.__decorate)([$(),(0,P.__metadata)("design:type",String)],e.prototype,"comment",void 0),(0,P.__decorate)([$({mapTo:function(){return String}}),(0,P.__metadata)("design:type",Array)],e.prototype,"photos",void 0),(0,P.__decorate)([$({mapTo:function(){return ne}}),(0,P.__metadata)("design:type",Array)],e.prototype,"videos",void 0),(0,P.__decorate)([$({mapTo:function(){return pe}}),(0,P.__metadata)("design:type",pe)],e.prototype,"detailed_rating",void 0),e=t=(0,P.__decorate)([U],e)}(),function(){function e(){}var t;t=e,e.fromJSON=function(e){return F(e,t)},(0,P.__decorate)([$({mapTo:function(){return Ge}}),(0,P.__metadata)("design:type",Ge)],e.prototype,"data",void 0),(0,P.__decorate)([$(),(0,P.__metadata)("design:type",Number)],e.prototype,"error",void 0),(0,P.__decorate)([$(),(0,P.__metadata)("design:type",String)],e.prototype,"error_msg",void 0),e=t=(0,P.__decorate)([U],e)}(),function(){function e(){}var t;t=e,e.fromJSON=function(e){return F(e,t)},(0,P.__decorate)([$(),(0,P.__metadata)("design:type",Number)],e.prototype,"cmt_id",void 0),(0,P.__decorate)([$(),(0,P.__metadata)("design:type",Number)],e.prototype,"order_id",void 0),(0,P.__decorate)([$(),(0,P.__metadata)("design:type",Number)],e.prototype,"shop_id",void 0),(0,P.__decorate)([$(),(0,P.__metadata)("design:type",String)],e.prototype,"comment",void 0),e=t=(0,P.__decorate)([U],e)}(),function(){function e(){}var t;t=e,e.fromJSON=function(e){return F(e,t)},(0,P.__decorate)([$({mapTo:function(){return Ge}}),(0,P.__metadata)("design:type",Ge)],e.prototype,"data",void 0),(0,P.__decorate)([$(),(0,P.__metadata)("design:type",Number)],e.prototype,"error",void 0),(0,P.__decorate)([$(),(0,P.__metadata)("design:type",String)],e.prototype,"error_msg",void 0),e=t=(0,P.__decorate)([U],e)}(),function(){function e(){}var t;return t=e,e.fromJSON=function(e){return F(e,t)},(0,P.__decorate)([$({mapTo:function(){return String}}),(0,P.__metadata)("design:type",Array)],e.prototype,"images",void 0),(0,P.__decorate)([$({mapTo:function(){return ne}}),(0,P.__metadata)("design:type",Array)],e.prototype,"videos",void 0),(0,P.__decorate)([$(),(0,P.__metadata)("design:type",String)],e.prototype,"comment",void 0),(0,P.__decorate)([$(),(0,P.__metadata)("design:type",Number)],e.prototype,"ctime",void 0),(0,P.__decorate)([$(),(0,P.__metadata)("design:type",Number)],e.prototype,"after_days",void 0),(0,P.__decorate)([$({mapTo:function(){return _e}}),(0,P.__metadata)("design:type",_e)],e.prototype,"follow_up_reply",void 0),t=(0,P.__decorate)([U],e)}());const{fetchInfo:rt,formPost:st,jsonPost:dt}=j.FetchUtils;function _t(e,t,a){return async i=>i((0,o.a)(R.SUCCESS,{data:{cmtid:e,updateData:t,userId:a}}))}Le.fromJSON,X.fromJSON,(0,B.isFeatureEnabled)("ab577b870f2ce608b36970142f91c777f2575a8110343f22354d0848a75c1fad",!1)},5523:(e,t,a)=>{"use strict";a.d(t,{kZ:()=>i,x7:()=>o,Og:()=>v,Cm:()=>h,sO:()=>c,NS:()=>d,_w:()=>C,uJ:()=>w,EH:()=>E,eK:()=>b,ZZ:()=>_});var i,o,n=a(1999),r=a(3923);function s(e){return(t,a)=>e.indexOf(t)-e.indexOf(a)}function d(e){const t=s(["shopid","itemid","offset","limit","filter","flag","type","tag_filter","exclude_filter","request_source","variation_filters","relevant_reviews","filter_size","fold_filter"]);return(0,n.sY)((()=>({keyMaker:()=>`[getRatings]:${(0,r.stringify)(e,{sort:t,skipNull:!0,skipEmptyString:!0})}`,retain:!0,query:t=>t.getRatings(e),cache:"cache-first"})),[e])}function _(e){return(0,n.sY)((()=>({keyMaker:()=>`[getUserRatingSummary]:${(0,r.stringify)(e,{skipNull:!0,skipEmptyString:!0})}`,query:async t=>await t.getUserRatingSummary(e),cache:"cache-first",disabled:!(e.userid>0)})),[])}function c(e){return(0,n.sY)((()=>({keyMaker:()=>`[getBuyerRatings]:${(0,r.stringify)(e,{skipNull:!0,skipEmptyString:!0})}`,retain:!0,query:t=>t.getBuyerRatings(e),cache:"cache-first"})),[e])}!function(e){e[e.NotSpecified=0]="NotSpecified",e[e.WithComment=1]="WithComment",e[e.WithPhoto=2]="WithPhoto",e[e.WithVideo=3]="WithVideo",e[e.LocalReview=9]="LocalReview",e[e.RepeatPurchase=10]="RepeatPurchase",e[e.OverallFitSmall=11]="OverallFitSmall",e[e.OverallFitFit=12]="OverallFitFit",e[e.OverallFitLarge=13]="OverallFitLarge"}(i||(i={})),function(e){e[e.All=0]="All",e[e.OneStar=1]="OneStar",e[e.TwoStar=2]="TwoStar",e[e.ThreeStar=3]="ThreeStar",e[e.FourStar=4]="FourStar",e[e.FiveStar=5]="FiveStar"}(o||(o={}));var l=a(3804),p=a.n(l),u=a(6704);function m(){return m=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(e[i]=a[i])}return e},m.apply(this,arguments)}const g={PC:{antiFraudConfig:{antiCrawler:{appKey:"Rating.PC"}}},RW:{antiFraudConfig:{antiCrawler:{appKey:"Rating.RW"}}}}["mobile"===(0,a(7624).UAParser)("user-agent").device.type?"RW":"PC"],h={getItemRating:e=>y("/api/v2/item/get_rating",e),getRatingTagFilters:e=>y("/api/v2/item/get_rating_tagfilters",e),getUserRatingSummary:e=>y("/api/v2/user/get_rating_summary",e,!0),getVariationFilter:e=>y("/api/v4/item/get_rating_variation_filters",e),getRatings:e=>{const t=function(e){const t=window.location.hostname.match(/(test|uat|staging)\.shopee\./i);return t?t[1].toLowerCase():"live"}();return y(`/api/${"test"===t||"uat"===t?"v4":"v2"}/item/get_ratings`,e)},getMyRatingList:e=>y("/api/v4/item/get_my_rating_list",e),getMyRatableList:e=>y("/api/v4/item/get_my_ratable_list",e),getRatingMeta:e=>y("/api/v2/item/get_rating_meta",e),getBuyerRatings:e=>y("/api/v2/buyer/get_ratings",e),getShopRatings:e=>y("/api/v4/seller_operation/get_shop_ratings",e),getShopRatingsV2:e=>y("/api/v2/shop/get_ratings",e),getShopRatingSummary:e=>y("/api/v4/seller_operation/get_rating_summary",e),likeShopRating:e=>f("/api/v4/seller_operation/like_item_rating",e),reportRating:e=>f("/api/v2/report_item_rating",e),likeItemRating:e=>f("/api/v2/like_item_rating",e),getOrderItemRatings:e=>y("/api/v2/order/get_item_ratings",e),getOrderBuyerRatings:e=>y("/api/v2/order/get_buyer_ratings",e),getRatingCoinRewardRuleList:e=>y("api/v4/get_rating_coin_reward_rule_list",e),getRateOrderDetail:e=>y("/api/v2/order/get_rate_order_detail",e),addFollowUp:e=>f("/api/v4/item/add_follow_up",e),addRating:e=>f("/api/v2/item/add_rating",e),editRating:e=>f("/api/v2/item/edit_rating",e),ratingCommentCheck:e=>f("/api/v4/comment/text_quality_detection",e),postRatingAnonymous:e=>f("/api/v2/item/set_rating_anonymous",e)};async function y(e,t,a=!1){const i=(0,r.stringifyUrl)({url:e,query:t});return await u.FetchUtils.get(i,m({},a?g:{}))}async function f(e,t,a=!1){return await u.FetchUtils.post(e,t,m({},a?g:{}))}function v(e){return p().createElement(n.AU,{service:h},e.children)}function b(e){const t=s(["shop_id","user_id","offset","limit","type","replied"]);return(0,n.sY)((()=>({keyMaker:()=>`[getShopRatings]:${(0,r.stringify)(e,{sort:t,skipNull:!0,skipEmptyString:!0})}`,retain:!0,query:t=>t.getShopRatings(e),cache:"cache-first"})),[e])}function E(e){const t=s(["shop_id","userid","replied"]);return(0,n.sY)((()=>({keyMaker:()=>`[getShopRatingSummary]:${(0,r.stringify)(e,{sort:t,skipNull:!0,skipEmptyString:!0})}`,query:async t=>await t.getShopRatingSummary(e),cache:"cache-first",disabled:!(e.userid&&e.shop_id)})),[])}function C(e){return(0,n.sY)((()=>({keyMaker:()=>`[getMyRatableList]:${(0,r.stringify)(e,{skipNull:!0,skipEmptyString:!0})}`,retain:!0,query:t=>t.getMyRatableList(e),cache:"cache-first"})),[e])}function w(e){return(0,n.sY)((()=>({keyMaker:()=>`[getMyRatingList]:${(0,r.stringify)(e,{skipNull:!0,skipEmptyString:!0})}`,retain:!0,query:t=>t.getMyRatingList(e),cache:"cache-first"})),[e])}},7158:(e,t,a)=>{var i={"./cl.png":1322,"./co.png":3234,"./pl.png":6886,"./sg.png":558};function o(e){var t=n(e);return a(t)}function n(e){if(!a.o(i,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return i[e]}o.keys=function(){return Object.keys(i)},o.resolve=n,e.exports=o,o.id=7158},8897:(e,t,a)=>{var i={"./ar.png":9715,"./br.png":9821,"./cl.png":990,"./co.png":1662,"./es.png":2644,"./fr.png":8813,"./id.png":1059,"./in.png":9802,"./mx.png":8750,"./my.png":5797,"./ph.png":5297,"./pl.png":2458,"./sg.png":6960,"./th.png":754,"./tw.png":3481,"./vn.png":618};function o(e){var t=n(e);return a(t)}function n(e){if(!a.o(i,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return i[e]}o.keys=function(){return Object.keys(i)},o.resolve=n,e.exports=o,o.id=8897},9336:(e,t,a)=>{var i={"./ar.png":9700};function o(e){var t=n(e);return a(t)}function n(e){if(!a.o(i,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return i[e]}o.keys=function(){return Object.keys(i)},o.resolve=n,e.exports=o,o.id=9336},6079:(e,t,a)=>{var i={"./ar.png":2570,"./br.png":4068,"./cl.png":3708,"./co.png":8247,"./es.png":137,"./fr.png":6594,"./id.png":4018,"./in.png":2958,"./mx.png":8078,"./my.png":3164,"./ph.png":7998,"./pl.png":9870,"./sg.png":9920,"./th.png":7016,"./tw.png":595,"./vn.png":3862};function o(e){var t=n(e);return a(t)}function n(e){if(!a.o(i,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return i[e]}o.keys=function(){return Object.keys(i)},o.resolve=n,e.exports=o,o.id=6079},7842:(e,t,a)=>{var i={"./ar.png":2640,"./br.png":8300,"./cl.png":4811,"./co.png":2374,"./es.png":8976,"./fr.png":3833,"./id.png":7720,"./in.png":1756,"./mx.png":2668,"./my.png":9163,"./ph.png":6442,"./pl.png":6342,"./sg.png":8870,"./th.png":3683,"./tw.png":3344,"./vn.png":6049};function o(e){var t=n(e);return a(t)}function n(e){if(!a.o(i,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return i[e]}o.keys=function(){return Object.keys(i)},o.resolve=n,e.exports=o,o.id=7842},1554:(e,t,a)=>{var i={"./popup_apponly@2x.png":4677,"./popup_mall_apponly@2x.png":4596};function o(e){var t=n(e);return a(t)}function n(e){if(!a.o(i,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return i[e]}o.keys=function(){return Object.keys(i)},o.resolve=n,e.exports=o,o.id=1554},6570:(e,t,a)=>{var i={"./popup_apponly_tw@2x.png":7112,"./popup_mall_apponly_tw@2x.png":2535};function o(e){var t=n(e);return a(t)}function n(e){if(!a.o(i,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return i[e]}o.keys=function(){return Object.keys(i)},o.resolve=n,e.exports=o,o.id=6570},9183:(e,t,a)=>{var i={"./popup_apponly@2x.png":7751,"./popup_mall_apponly@2x.png":3006};function o(e){var t=n(e);return a(t)}function n(e){if(!a.o(i,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return i[e]}o.keys=function(){return Object.keys(i)},o.resolve=n,e.exports=o,o.id=9183},5445:(e,t,a)=>{var i={"./popup_apponly_tw@2x.png":1336,"./popup_mall_apponly_tw@2x.png":1223};function o(e){var t=n(e);return a(t)}function n(e){if(!a.o(i,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return i[e]}o.keys=function(){return Object.keys(i)},o.resolve=n,e.exports=o,o.id=5445},3906:()=>{},5519:(e,t,a)=>{"use strict";e.exports=a.microfeI(0)},8173:(e,t,a)=>{"use strict";e.exports=a.microfeI(1)},8072:(e,t,a)=>{"use strict";e.exports=a.microfeI(2)},5518:(e,t,a)=>{"use strict";e.exports=a.microfeI(3)},3604:(e,t,a)=>{"use strict";e.exports=a.microfeI(4)}}]);
//# sourceMappingURL=https://sourcemap.webfe.shopeemobile.com/pcmall-shoprating/_/380.166602f4af4678ff26d1.js.map