(self.mfeModules=self.mfeModules||[]).push(["",["Platform","React","Redux","ReactRouter","WithInjectReducer","PlatformApi","ReactRedux","Account","FeatureToggles","ReactDom"],(e,t,r,a,n,o,i,c,s,l)=>()=>{(self.wpJsonpPcmallRating=self.wpJsonpPcmallRating||[]).push([[190],{140:(e,t,r)=>{"use strict";r.d(t,{C4:()=>g,m$:()=>v,dp:()=>_});var a=r(3804),n=r.n(a),o=r(1750),i=r(6704),c=r(8683),s=r(5518),l=r(2168),u=r.n(l);function d(e){const{onClick:t,active:r,content:a}=e;return n().createElement("div",{onClick:()=>{t(e)},className:u()("product-rating-overview__filter",r&&"product-rating-overview__filter--active")},a)}function p(e){const[t,r]=(0,a.useState)(0),{onChange:o,filters:i}=e;return n().createElement("div",{className:"product-rating-overview__filters"},i.map(((e,a)=>n().createElement(d,{content:e.content,active:t===a,key:a,onClick:()=>{r(a);const t=e.payload;o(t)}}))))}const{t:m}=i.I18n,f=(0,c.Kd)();function h(e){return(0,s.compactCurrency)(f,e||0,{precision:!1,symbol:""})}let g=function(e){return e[e.All=0]="All",e[e.WithMedia=1]="WithMedia",e[e.WithComment=2]="WithComment",e[e.RepeatPurchase=3]="RepeatPurchase",e[e.LocalReview=4]="LocalReview",e[e.Star=5]="Star",e}({});function _(e){}function v(e){const{onSwitchFilter:t,ratingScore:r,ratingSummary:o,hideExtraFilter:i,showLocalReview:c,showRepeatPurchase:s}=e,[l]=(0,a.useState)((()=>({all:{type:g.All},withMedia:{type:g.WithMedia},withComment:{type:g.WithComment},repeatPurchase:{type:g.RepeatPurchase},localReview:{type:g.LocalReview},star1:{type:g.Star,value:1},star2:{type:g.Star,value:2},star3:{type:g.Star,value:3},star4:{type:g.Star,value:4},star5:{type:g.Star,value:5}}))),u=(0,a.useMemo)((()=>{const{rcount_local_review:e,rcount_repeat_purchase:t,rcount_with_context:r,rcount_with_media:a,rating_count:n}=o,u=[{content:m("label_all"),payload:{type:g.All}},...[5,4,3,2,1].map((e=>({content:`${e} ${m("label_rating_star")} (${h(n[e-1])})`,payload:l[`star${e}`]})))];return i||(u.push({content:`${m("label_with_comment")} (${h(r||0)})`,payload:l.withComment},{content:`${m("rating_btn_name_ratingfilter_media")} (${h(a||0)})`,payload:l.withMedia}),s&&u.push({payload:l.repeatPurchase,content:`${m("label_repeat_purchase")} (${h(t||0)})`}),c&&u.push({payload:l.localReview,content:`${m("label_local_review")} (${h(e||0)})`})),u}),[l,i,o,c,s]);return n().createElement("div",{className:"product-rating-overview"},n().createElement(w,{ratingScore:r}),n().createElement(p,{filters:u,onChange:t}))}function w(e){const{ratingScore:t}=e;return n().createElement("div",{className:"product-rating-overview__briefing"},n().createElement("div",{className:"product-rating-overview__score-wrapper"},n().createElement("span",{className:"product-rating-overview__rating-score"},t%1==0?t:t&&t.toFixed(1)),n().createElement("span",{className:"product-rating-overview__rating-score-out-of"},m("text_n_out_of_m",{n:"",m:5})+" ")),n().createElement(o.DU,{rating:t,className:"product-rating-overview__stars"}))}},556:(e,t,r)=>{"use strict";r.d(t,{n:()=>a});const a=6},4792:(e,t,r)=>{"use strict";r.microfeA(e,(function(){return Promise.all([r.microfeM(0),r.microfeM(2),r.microfeM(1),r.microfeM(4),r.microfeM(3)]).then((function(){e.exports=t,r.d(t,{Z:()=>Z});var a=r(3804),n=r.n(a),o=r(6704),i=r(8281),c=r(5523),s=r(6070),l=r(9154),u=r(6123),d=r(7798),p=r(140),m=r(3930),f=r(556),h=r(17),g=r(9311),_=r(6515),v=r(2451);function w(){return w=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},w.apply(this,arguments)}const y=()=>{const{actions:e,state:t}=(0,a.useContext)(h.AccountContext),r=(0,_.tk)(t),{accountStatus:n,accountInfo:{username:o,portrait:i}}=r;return(0,a.useEffect)((()=>{n===v.d.LOGGED_IN?(0,g.RD)({username:o,portrait:i}):n===v.d.NOT_LOGGED_IN&&(0,g.hW)()}),[n,o,i]),w({},r,e)};var E=r(8062),R=r(7077),k=r(6775);function C(e){return{getUrl:function(t){try{return(0,k.generatePath)(e,t||{})}catch(r){return""}}}}const b=C(R.wl);function S(){return S=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},S.apply(this,arguments)}C(R.qB),C(R.qc),C(R.Pj),C(R.gi),C(R.T_),C(R.ZV),C(R.gI),C(R._1),C(R.mI),C(R.S8),C(R.dn),C(R.Ql),C(R.WS),C(R.l0),C(R.ER),C(R.oy),C(R.q),C(R.HJ),C(R.X6),C(R.Iu);const{t:P}=o.I18n,O={filter:c.kZ.NotSpecified,flag:1,limit:6,offset:0,type:c.x7.All,exclude_filter:0,filter_size:0,fold_filter:0,relevant_reviews:!1,request_source:1,tag_filter:"",variation_filters:""},N=f.n,x=(0,l.Pf)((0,s.wl)((function(e){var t,r,o,i;const{itemId:s,shopId:l,ratingStar:f}=e,h=(0,a.useRef)(null),[g,_]=(0,a.useState)((()=>S({},O,{shopid:l,itemid:s}))),w=()=>{const e=h.current;if(e)try{const t=e.getBoundingClientRect().top+window.pageYOffset,r=window.getComputedStyle(e),a=r.paddingTop?parseInt(r.paddingTop,10):0,n=window.innerHeight,o=document.documentElement.scrollTop||document.body.scrollTop;if(document.documentElement.scrollTop-a<t&&n/2+o>=t)return;e.scrollIntoView({behavior:"smooth",block:"start"})}catch(t){}};(0,a.useEffect)((()=>{_(S({},O,{shopid:l,itemid:s}))}),[s,l]);const R=(0,c.NS)(g);(0,a.useDebugValue)(R.data);const C=null==(t=R.data)?void 0:t.data,x=(function(){const{accountStatus:e}=y(),t=(0,k.useHistory)();(function(e){const t=(0,a.useRef)(e);t.current=e,(0,a.useState)((()=>(...e)=>t.current(...e)))[0]})((function(){if(e!==v.d.LOGGED_IN){const e=(0,E.FK)(b.getUrl(),{next:window.location.href});t.push(e)}return e===v.d.LOGGED_IN}))}(),null==C?void 0:C.item_rating_summary),Z=(0,a.useMemo)((()=>{if(!x)return 0;if(g.type>=1&&g.type<=5)return x.rating_count[g.type-1];switch(g.filter){case c.kZ.WithComment:return x.rcount_with_context;case c.kZ.LocalReview:return x.rcount_local_review;case c.kZ.RepeatPurchase:return x.rcount_repeat_purchase;case c.kZ.WithVideo:return x.rcount_with_media;case c.kZ.WithPhoto:return x.rcount_with_image;case c.kZ.OverallFitFit:return x.rcount_overall_fit_fit;case c.kZ.OverallFitSmall:return x.rcount_overall_fit_small;case c.kZ.OverallFitLarge:return x.rcount_overall_fit_large}return x.rating_total}),[g.filter,g.type,x]);if(!C||!x)return null;const I=C.downgrade_switch,L=Math.floor((Z-1)/N)+1,M=async(e,t,r)=>(await c.Cm.likeItemRating({cmtid:e,shopid:t,itemid:r,like:!0})).data.like_count,T=async(e,t,r)=>(await c.Cm.likeItemRating({cmtid:e,shopid:t,itemid:r,like:!1})).data.like_count,W=async(e,t,r,a)=>await c.Cm.reportRating({cmtid:e,shopid:t,itemid:r,reason:a});return n().createElement("div",{className:"product-ratings",ref:h,"data-nosnippet":!0},n().createElement("div",{className:"product-ratings__header"},n().createElement("div",{className:"product-ratings__header_score"},P("label_product_ratings"))),!I&&n().createElement(p.m$,{ratingScore:f,ratingSummary:x,onSwitchFilter:e=>{const{type:t}=e;_((r=>{var a;const n=null!=(a={[p.C4.Star]:c.kZ.NotSpecified,[p.C4.LocalReview]:c.kZ.LocalReview,[p.C4.RepeatPurchase]:c.kZ.RepeatPurchase,[p.C4.WithComment]:c.kZ.WithComment,[p.C4.WithMedia]:c.kZ.WithVideo,[p.C4.All]:c.kZ.NotSpecified}[t.toString()])?a:c.kZ.NotSpecified;let o=c.x7.All;return t===p.C4.Star&&((0,p.dp)(e),o=e.value),r.type===o&&r.filter===n?r:S({},r,{filter:n,type:o,offset:0})})),w()},hideExtraFilter:!1,showLocalReview:null!=(r=C.show_local_review)&&r,showRepeatPurchase:x.rcount_repeat_purchase>0}),0===(null!=(o=null==C?void 0:C.ratings)?o:[]).length?n().createElement("div",{className:"product-ratings-comments-view__no-data"},n().createElement("div",{className:"product-ratings-comments-view__no-data__icon"},n().createElement("img",{src:m.Z,alt:"empty-icon"})),n().createElement("div",{className:"product-ratings-comments-view__no-data__text"},P("text_no_ratings"))):n().createElement("div",{className:"product-ratings__list",style:{opacity:R.pending?.6:1}},n().createElement("div",{className:"shopee-product-comment-list"},(null!=(i=null==C?void 0:C.ratings)?i:[]).map((e=>e&&n().createElement(d.Z,{key:e.cmtid,rating:e,shopId:l,itemId:e.itemid,unlikeRating:async()=>{await updateLikedStatus(e,!1)},likeRating:async()=>{await updateLikedStatus(e,!0)},productItems:e.product_items,likeRating:M,unlikeRating:T,reportRating:W})))),n().createElement(u.ZP,{className:"product-ratings__page-controller",totalPageCount:L,selectedPage:Math.floor(g.offset/N),onPageSelected:e=>{w(),_((t=>S({},t,{offset:e*N})))}})))})));function Z(e){return n().createElement(c.Og,null,n().createElement(i.Z,{onTrack:o.Tracking.onTrack},n().createElement(x,e)))}}))}))},6123:(e,t,r)=>{"use strict";r.d(t,{ZP:()=>f});var a=r(3804),n=r.n(a),o=r(1905),i=r(8009);function c(){return c=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},c.apply(this,arguments)}function s(){return s=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},s.apply(this,arguments)}(0,i.Z)({Icon:function(e){return n().createElement("svg",c({viewBox:"0 0 7 11"},e),n().createElement("path",{d:"M4.694078 9.8185598L.2870824 5.4331785c-.1957415-.1947815-.1965198-.511363-.0017382-.7071046a.50867033.50867033 0 0 1 .000868-.0008702L4.7381375.2732784 4.73885.273991c.1411545-.127878.3284279-.205779.5338961-.205779.4393237 0 .7954659.3561422.7954659.7954659 0 .2054682-.077901.3927416-.205779.5338961l.0006632.0006632-.0226101.0226101a.80174653.80174653 0 0 1-.0105706.0105706L2.4680138 4.7933195c-.1562097.1562097-.1562097.4094757 0 .5656855a.45579485.45579485 0 0 0 .0006962.0006944l3.3930018 3.3763607-.0009482.0009529c.128869.1413647.2074484.3293723.2074484.5357331 0 .4393237-.3561422.7954659-.7954659.7954659-.2049545 0-.391805-.077512-.5328365-.2048207l-.0003877.0003896-.0097205-.0096728a.80042023.80042023 0 0 1-.0357234-.0355483z",fillRule:"nonzero"}))},iconClassNames:["icon-arrow-left-small"]});(0,i.Z)({Icon:function(e){return n().createElement("svg",s({viewBox:"0 0 7 11"},e),n().createElement("path",{d:"M2.305922 9.81856l4.4069956-4.385381c.1957415-.194782.1965198-.511364.0017382-.707105a.26384055.26384055 0 0 0-.000868-.00087L2.2618625.273278 2.26115.273991C2.1199955.146113 1.9327221.068212 1.7272539.068212c-.4393237 0-.7954659.356142-.7954659.795466 0 .205468.077901.392741.205779.533896l-.0006632.000663.0226101.02261c.0034906.003557.0070143.00708.0105706.010571L4.5319862 4.79332c.1562097.156209.1562097.409475 0 .565685-.0002318.000232-.0004639.000463-.0006962.000694L1.1382882 8.73606l.0009482.000953c-.128869.141365-.2074484.329372-.2074484.535733 0 .439324.3561422.795466.7954659.795466.2049545 0 .391805-.077512.5328365-.204821l.0003877.00039.0097205-.009673c.012278-.011471.0241922-.023327.0357234-.035548z",fillRule:"nonzero"}))},iconClassNames:["icon-arrow-right-small"]});var l=r(2168),u=r.n(l);function d(){return d=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},d.apply(this,arguments)}const p=(0,i.Z)({Icon:function(e){return n().createElement("svg",d({enableBackground:"new 0 0 11 11",viewBox:"0 0 11 11",x:"0",y:"0"},e),n().createElement("g",null,n().createElement("path",{d:"m8.5 11c-.1 0-.2 0-.3-.1l-6-5c-.1-.1-.2-.3-.2-.4s.1-.3.2-.4l6-5c .2-.2.5-.1.7.1s.1.5-.1.7l-5.5 4.6 5.5 4.6c.2.2.2.5.1.7-.1.1-.3.2-.4.2z"})))},iconClassNames:["icon-arrow-left"]});var m=r(7869);class f extends n().Component{componentDidUpdate(){const{selectedPage:e,totalPageCount:t}=this.props;e>=t&&0!==t&&this.props.onPageSelected(t-1)}render(){const{selectedPage:e,totalPageCount:t,onPageSelected:r,buttonModifier:a,buttonStyle:i,useV2Design:c,className:s}=this.props,l=[];!e||e<2?[0,1,2,3,4].forEach((e=>{e<t&&l.push(e)})):2===e?[0,1,2,3,4,5].forEach((e=>{e<t&&l.push(e)})):([0,1].forEach((e=>{e<t&&l.push(e)})),e&&e>=t-2?Array.from(new Array(5),((e,r)=>t-5+r)).forEach((e=>{e>1&&l.push(e)})):Array.from(new Array(5),((t,r)=>e?e-2+r:0)).forEach((e=>{e>1&&e<t&&l.push(e)})));const d=[],f=e=>n().createElement(o.Rd,{key:e,modifiers:["non-click"]},"...");let h=0;return l.forEach(((c,s,l)=>{h+1<c&&d.push(f(`ellipsis${s}`)),h=c,d.push(c===e?n().createElement(o.oe,{key:c,modifiers:[a||"primary"],style:i},c+1):n().createElement(o.Rd,{key:c,onClick:()=>r(c)},c+1)),s===l.length-1&&c<t-1&&d.push(f(`ellipsis${s}`))})),n().createElement("div",{className:u()("shopee-page-controller",{"shopee-page-controller--v2":c},s||"")},n().createElement(o.hU,{Icon:p,modifiers:["left"],style:i,onClick:0===e?void 0:()=>{r(e-1)}}),d,n().createElement(o.hU,{Icon:m.Z,modifiers:["right"],style:i,onClick:e&&e<t-1?()=>{r(e+1)}:0===e&&t>1?()=>{r(1)}:void 0}))}}f.defaultProps={totalPageCount:0,selectedPage:0,useV2Design:!1}},8281:(e,t,r)=>{"use strict";r.d(t,{Z:()=>o});var a=r(3804),n=r(7999);function o({children:e,onTrack:t}){return a.createElement(n.Z.Provider,{value:t},e)}},3930:(e,t,r)=>{"use strict";r.d(t,{Z:()=>a});const a=r.p+"7d900d4dc402db5304b2090a184404cb.png"},17:e=>{"use strict";e.exports=c},1437:e=>{"use strict";e.exports=s},6704:e=>{"use strict";e.exports=o},3804:e=>{"use strict";e.exports=t},7274:e=>{"use strict";e.exports=l},5325:e=>{"use strict";e.exports=i},6775:e=>{"use strict";e.exports=a},4857:e=>{"use strict";e.exports=r},7762:e=>{"use strict";e.exports=n}},function(t){"use strict";var r;r=t.x,t.x=()=>{Promise.resolve(t(4792)).then((t=>{e.setModule("pcmall-productrating",t.Z,{type:"slot",buildInformation:{updated:"2023-06-13T09:30:07.282Z",tag:"RT-V20230615-WEB-0",branch:"heads/RT-V20230615-WEB-0",lastCommit:"feat(rating-modal): restore order rating set anonymous function",lastCommitHash:"d99310f922fc1f2335429ed88e20f8d18797eb90"},registerSentryDsn:!0,projectAndModuleName:"pcmall-shoprating"}),r()}))}},[[4792,666,787,164,380,798]]])},2]),function(){if(window&&window.__DECKER_HOOK__){var e=window.__DECKER_HOOK__,t=function(){e.sendToDevtools("MFE_LOAD_SLOT",{slotName:"pcmall-productrating",updated:"2023-06-13T09:30:07.309Z",tag:"RT-V20230615-WEB-0",branch:"heads/RT-V20230615-WEB-0",lastCommit:"feat(rating-modal): restore order rating set anonymous function",lastCommitHash:"d99310f922fc1f2335429ed88e20f8d18797eb90"})};e.on("MFE_RETRIEVE_SLOTS",t),t()}}();
//# sourceMappingURL=https://sourcemap.webfe.shopeemobile.com/pcmall-shoprating/_/pcmall-productrating.aa7c6dd86b454b1008a8.js.map