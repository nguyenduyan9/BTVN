(self.mfeModules=self.mfeModules||[]).push(["",["Platform","React","ReactRedux","Redux","PlatformApi","FeatureToggles","WithInjectReducer","ReactRouter","ReactDom","ShopeeDefaultFooter","Experiments","ShopeeDefaultHeader","ReactHelmet","Account","NebulaCore"],(e,r,o,s,c,t,n,i,u,h,a,d,p,l,m)=>()=>{(self.wpJsonpPcmallPcpagevoucherdetail=self.wpJsonpPcmallPcpagevoucherdetail||[]).push([[614,455],{27107:(e,r,o)=>{"use strict";function s(e,r){return function(o=r,s){return s&&e.hasOwnProperty(s.type)?e[s.type](o,s):o}}o.d(r,{Z:()=>s})},76676:(e,r,o)=>{"use strict";o.d(r,{t:()=>v});var s=o(63804),c=o.n(s),t=o(27107),n=o(99045),i=o(98750),u=o(35540),h=o(71574),a=o(62258);function d(){return d=Object.assign?Object.assign.bind():function(e){for(var r=1;r<arguments.length;r++){var o=arguments[r];for(var s in o)Object.prototype.hasOwnProperty.call(o,s)&&(e[s]=o[s])}return e},d.apply(this,arguments)}const{SAVE_VOUCHER:p}=u,l=(0,t.Z)({[i.Au.REQUESTED]:(e,r)=>{const{shopId:o,itemId:s}=r,c=s?{[s]:{vouchers:e.shop&&e.shop[o]&&e.shop[o][s]&&e.shop[o][s].vouchers||[],error:-100}}:{};return d({},e,{shop:d({},e.shop,{[o]:d({},e.shop[o],!s&&{error:-100}||{},c)})})},[i.Au.SUCCESS]:(e,r)=>{const{data:o,shopId:s,itemId:c,priorityVoucherList:t}=r;return d({},e,{shop:d({},e.shop,!c&&{[s]:{error:0,vouchers:o&&o.voucher_list||[],priorityVoucherList:t}}||{},c&&e.shop&&{[s]:d({},e.shop[s],{[c]:{vouchers:o&&o.voucher_list||[],error:0}})})})},[i.Au.FAILED]:(e,r)=>{const{shopId:o,error:s,itemId:c}=r;return d({},e,{shop:d({},e.shop,!c&&{[o]:{error:s,vouchers:[]}}||{},{error:s},c&&e.shop&&{[o]:d({},e.shop[o],{[c]:{vouchers:[],error:s}})})})},[i.rQ.REQUESTED]:(e,r)=>{const o=r;return d({},e,{recommendedShopVouchers:d({},e.recommendedShopVouchers,{progress:n.Z.REQ}),shop:d({},e.shop,{[o.shopId]:{vouchers:[],error:-100}})})},[i.rQ.FAILED]:(e,r)=>{const o=r;return d({},e,{recommendedShopVouchers:d({},e.recommendedShopVouchers,{progress:n.Z.ERR,error:o.error,error_msg:o.error_msg}),shop:d({},e.shop,{[o.shopId]:d({},e.shop[o.shopId],{error:o.error})})})},[i.rQ.SUCCESS]:(e,r)=>{const{data:{shop_vouchers:o},shopId:s,isCheckout:c}=r;return d({},e,{recommendedShopVouchers:d({},e.recommendedShopVouchers,{[s]:(o||[]).filter((e=>{var r,o;return!c&&![h.i8.NOT_COMPLETE_TASK].includes(null!=(r=e.invalid_message_code)?r:-1/0)||!h.j4.includes(null!=(o=e.invalid_message_code)?o:-1/0)})),progress:n.Z.OK}),shop:d({},e.shop,{[s]:d({},e.shop[s],{error:0})})})},[p.FAILED]:(e,r)=>{const{payload:{error:o,error_msg:s,error_config:c,voucher_code:t}}=r;return d({},e,{claimProgress:d({},e.claimProgress,{[t]:{progress:o===h.o$?n.Z.OK:n.Z.ERR,error:o,error_msg:s,error_config:c}})})},[p.SUCCESS]:(e,r)=>{const o=r,s=o.payload.voucher&&o.payload.voucher.shop_id,{voucher_code:c,voucher_promotionid:t,voucher:i}=o.payload;let u=e.shop;const h=(0,a.hy)(e,c,t?String(t):null);if(s){const r=e.shop[s],c=(r&&r.vouchers||[]).map((e=>e.voucher_code===o.payload.voucher_code?d({},e,{is_claimed_before:!0}):e));u=d({},u,{[s]:d({},r,{vouchers:[...c]})})}return d({},e,{shop:d({},u),claimProgress:d({},e.claimProgress,{[o.payload.voucher_code]:{progress:n.Z.OK}}),voucherDetail:{[c||"0"]:{[t]:d({},h,{voucher_basic_info:h.voucher_basic_info||i?d({},h.voucher_basic_info,i):null,progress:n.Z.OK})}}})},[p.REQUESTED]:(e,r)=>{const o=r;return d({},e,{claimProgress:d({},e.claimProgress,{[o.payload.voucher_code]:{progress:n.Z.REQ}})})},[i.cI.REQUESTED]:(e,r)=>{const o=r;return d({},e,{claimProgress:d({},e.claimProgress,{[o.voucher_code]:{progress:n.Z.REQ}})})},[i.cI.SUCCESS]:(e,r)=>{const{voucher_code:o,invalid_message_code:s,shopid:c}=r,t=!s||s===h.eg.CLAIM_ERROR_EXIST,i=c;let u=e.shop;if(i){const r=e.shop[i],s=(r&&r.vouchers||[]).map((e=>e.voucher_code===o?d({},e,{is_claimed_before:t}):e));u=d({},u,{[i]:d({},r,{vouchers:[...s]})})}return d({},e,{shop:d({},u),claimProgress:d({},e.claimProgress,{[o]:{progress:t?n.Z.OK:n.Z.ERR,invalid_message_code:s}})})},[i.cI.FAILED]:(e,r)=>{const o=r,{error:s}=o;return d({},e,{claimProgress:d({},e.claimProgress,{[o.voucher_code]:{progress:s===h.o$?n.Z.OK:n.Z.ERR,error:s,error_msg:o.error_msg}})})},[i.XB.REQUESTED]:(e,r)=>{const o=r;return d({},e,{claimProgress:d({},e.claimProgress,{[o.voucher_code]:{progress:n.Z.REQ}})})},[i.XB.SUCCESS]:(e,r)=>{const o=r,s=o.shopid;let c=e.shop;if(o.voucher&&s){const r=e.shop[s],t=(r&&r.vouchers||[]).map((e=>e.voucher_code===o.voucher_code?d({},e,{is_claimed_before:!0}):e));c=d({},c,{[s]:d({},r,{vouchers:[...t]})})}return d({},e,{shop:d({},c),claimProgress:d({},e.claimProgress,{[o.voucher_code]:{progress:o.voucher?n.Z.OK:n.Z.ERR}})})},[i.XB.FAILED]:(e,r)=>{const{error:o,error_msg:s,error_config:c,voucher_code:t,invalid_message_code:i}=r;return d({},e,{claimProgress:d({},e.claimProgress,{[t]:{progress:o===h.o$?n.Z.OK:n.Z.ERR,error:o,error_msg:s,error_config:c,invalid_message_code:i}})})},[i.KW]:(e,r)=>{const{voucher:o}=r,{shop_id:s}=o;return s?d({},e,{recommendedShopVouchers:d({},e.recommendedShopVouchers,{[s]:[o,...e.recommendedShopVouchers[s].filter((e=>e.voucher_code!==o.voucher_code))]})}):e},[i.Ec]:(e,r)=>{const{voucher:o}=r,{shop_id:s}=o;return s?d({},e,{recommendedShopVouchers:d({},e.recommendedShopVouchers,{[s]:e.recommendedShopVouchers[s].filter((e=>e.voucher_code!==o.voucher_code))})}):e},[i.mk]:(e,r)=>{const{voucher:o}=r,{shop_id:s}=o;return s?d({},e,{recommendedShopVouchers:d({},e.recommendedShopVouchers,{[s]:e.recommendedShopVouchers[s].map((e=>e.voucher_code===o.voucher_code?o:e))})}):e},[i.Js]:(e,r)=>{const{voucher:{voucher_code:o}}=r;return o?d({},e,{claimProgress:d({},e.claimProgress,{[o]:{progress:n.Z.OK}})}):e},[i._U.SUCCESS]:(e,r)=>{const o={};return r.data.forEach((r=>{const s=e.shop[r.shopid];var c,t;o[r.shopid]={error:0,vouchers:(c=s&&s.vouchers,t=r.voucher_list,t.map((e=>d({},e,{is_claimed_before:c&&c.some((r=>r.voucher_promotionid===e.voucher_promotionid&&r.is_claimed_before))}))))}})),d({},e,{shop:d({},e.shop,o)})},[i.u7.REQUESTED]:(e,r)=>{const{promotionid:o,voucher_code:s}=r;return d({},e,{voucherDetail:{[s||"0"]:{[o]:{progress:n.Z.REQ}}}})},[i.u7.SUCCESS]:(e,r)=>{const{data:o,promotionid:s,voucher_code:c}=r;return d({},e,{voucherDetail:{[c||"0"]:d({},e.voucherDetail[c],{[s]:d({},o,{progress:n.Z.OK,error:void 0,error_msg:void 0})})}})},[i.u7.FAILED]:(e,r)=>{const{error:o,promotionid:s,voucher_code:c,error_msg:t}=r;return d({},e,{voucherDetail:{[c||"0"]:d({},e.voucherDetail[c],{[s]:{error:o,progress:n.Z.ERR,error_msg:t}})},error:o||-1})}},{shop:{},claimProgress:{},voucherDetail:{},recommendedShopVouchers:{}});var m=o(57762);const _=["injectAsyncReducer"];function v(e){function r(r){const{injectAsyncReducer:o}=r,s=function(e,r){if(null==e)return{};var o,s,c={},t=Object.keys(e);for(s=0;s<t.length;s++)o=t[s],r.indexOf(o)>=0||(c[o]=e[o]);return c}(r,_);return c().useEffect((()=>{o({voucher:l})}),[o]),c().createElement(e,s)}return r.displayName=`withVoucherReduxInjected(${function(e){return e.displayName||e.name||"Component"}(e)})`,(0,m.withInjectReducer)(r)}},62258:(e,r,o)=>{"use strict";function s(){return s=Object.assign?Object.assign.bind():function(e){for(var r=1;r<arguments.length;r++){var o=arguments[r];for(var s in o)Object.prototype.hasOwnProperty.call(o,s)&&(e[s]=o[s])}return e},s.apply(this,arguments)}function c(e,r){return e&&e.recommendedShopVouchers&&e.recommendedShopVouchers[r]||[]}function t(e){return Object.entries(e.claimProgress||[]).reduce(((e,[r,o])=>s({},e,{[r]:o.progress})),{})}function n(e){return Object.entries(e.claimProgress||[]).reduce(((e,[r,o])=>s({},e,{[r]:o.invalid_message_code})),{})}function i(e,r){if(!r)return 0;const o=e.claimProgress[r];return o?o.progress:0}function u(e,r,o){if(!o)return{};const s=e&&e.voucherDetail&&e.voucherDetail[r||"0"];return s&&s[o]||{}}o.d(r,{zq:()=>c,HL:()=>t,OX:()=>n,KT:()=>i,hy:()=>u})},22699:(e,r,o)=>{"use strict";o.microfeA(e,(function(){return Promise.all([o.microfeM(0),o.microfeM(1),o.microfeM(2),o.microfeM(3),o.microfeM(4)]).then((function(){e.exports=r,o.a(e,(async e=>{o.d(r,{Z:()=>v});var s=o(63804),c=o.n(s),t=o(84857),n=o(86704),i=o(80733),u=o(15944),h=o(76676),a=o(36868),d=o(2608),p=o(8267),l=e([p]);p=(l.then?await l:l)[0];const{t:m,withI18nCollections:_}=n.I18n,v=(0,t.compose)(d.Z,h.t,_([i.L,i.ez]))((function({vouchers:e,isShopeeMart:r,targetType:o,targetData:s}){return e?c().createElement(u.ZP,{targetType:o,targetData:s},c().createElement("div",{className:"voucher-ticket-list"},c().createElement("div",{className:"voucher-ticket-list__header"},m("label_shop_voucher")),c().createElement("div",{className:"voucher-ticket-list__sub-header"},m("voucher_shop_description")),c().createElement("div",{className:"voucher-ticket-list__list",tabIndex:-1},e.slice(0,50).map(((e,o)=>c().createElement(p.Z,{voucher:e,className:a.Z.voucherCardBody,key:o,voucherLocation:o,isShopeeMart:r})))))):null}))}))}))}))},36868:(e,r,o)=>{"use strict";o.d(r,{Z:()=>s});const s={voucherCardBody:"yOuuEM"}},96370:e=>{"use strict";var r;e.exports=(r="live",new Promise((function(e,o){"live"!=r&&"stable"!=r&&"liveish"!=r&&(r="live");var s,c,t,n="https://deo.shopeemobile.com/shopee/shopee-webfepromotion-"+r+"-sg/voucher-card@stable/"+(s="index.production",c="js",self.__ASSETS__&&self.__ASSETS__.VOUCHER_CARD_MANIFEST&&self.__ASSETS__.VOUCHER_CARD_MANIFEST[r]?[s,self.__ASSETS__.VOUCHER_CARD_MANIFEST[r],c].join("."):[s,c].join("."));(t=n,new Promise((function(e,r){var o=document.createElement("script");o.async=!1,o.defer=!0,o.crossOrigin="",o.src=t,o.onload=function(){e(window.VoucherCard)},o.onerror=r,document.body.appendChild(o)}))).then((function(r){e(r)}),o).catch((function(e){throw new Error("unable load voucher card"+e)}))})))},17:e=>{"use strict";e.exports=l},51408:e=>{"use strict";e.exports=a},71437:e=>{"use strict";e.exports=t},16161:r=>{"use strict";r.exports=e},86704:e=>{"use strict";e.exports=c},63804:e=>{"use strict";e.exports=r},67274:e=>{"use strict";e.exports=u},95325:e=>{"use strict";e.exports=o},56775:e=>{"use strict";e.exports=i},84857:e=>{"use strict";e.exports=s},57762:e=>{"use strict";e.exports=n}},function(r){"use strict";var o;o=r.x,r.x=()=>{Promise.resolve(r(22699)).then((r=>{e.setModule("pcmall-sellervoucherlist",r.Z,{type:"slot",buildInformation:{updated:"2023-05-23T09:18:26.737Z",tag:"voucher-v1.5.0",branch:"heads/voucher-v1.5.0",lastCommit:"Merge branch '\\''staging'\\'' into '\\''release'\\''",lastCommitHash:"c3da68b4b1f2d94e1a620f32d8eb6650e5315835"},registerSentryDsn:!0,projectAndModuleName:"pcmall-voucher"}),o()}))}},[[22699,666,59,774,56,881,142]]])},2]),function(){if(window&&window.__DECKER_HOOK__){var e=window.__DECKER_HOOK__,r=function(){e.sendToDevtools("MFE_LOAD_SLOT",{slotName:"pcmall-sellervoucherlist",updated:"2023-05-23T09:18:26.765Z",tag:"voucher-v1.5.0",branch:"heads/voucher-v1.5.0",lastCommit:"Merge branch '\\''staging'\\'' into '\\''release'\\''",lastCommitHash:"c3da68b4b1f2d94e1a620f32d8eb6650e5315835"})};e.on("MFE_RETRIEVE_SLOTS",r),r()}}();
//# sourceMappingURL=https://sourcemap.webfe.shopeemobile.com/pcmall-voucher/_/pcmall-sellervoucherlist.0145e0998ef1f6d253ec.js.map