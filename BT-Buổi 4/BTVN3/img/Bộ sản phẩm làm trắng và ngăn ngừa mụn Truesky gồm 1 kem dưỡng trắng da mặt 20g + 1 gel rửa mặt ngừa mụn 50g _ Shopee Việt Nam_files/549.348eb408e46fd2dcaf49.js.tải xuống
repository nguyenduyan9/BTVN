(self.wpJsonpPcmallPcpagevoucherdetail=self.wpJsonpPcmallPcpagevoucherdetail||[]).push([[549],{39381:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});const r=e=>async(t,n)=>{const{apiCall:r,actions:[o,a,i],shouldSkipCall:u,onFinish:c}=e;if("function"==typeof u&&u(n()))return c&&c(),null;t("function"==typeof o?await o(n()):o);const s=await r();return s.error||0===s.error?t(await i(n(),s)):t(await a(n(),s.response)),c&&c(),s}},81002:(e,t,n)=>{"use strict";function r(e,t,n,r=null){return e&&"function"==typeof e?e(t,n,r):null}n.d(t,{ZP:()=>o});const o=async function(e,t,n,o){const{apiCall:a,actions:[i,u,c],shouldSkipCall:s,onFinish:l,onSuccess:f}=e;if("function"==typeof s&&s(n()))return l&&l(),null;const p=r(i.payload,n(),e);var d;t({payload:(d=p,!d||"object"!=typeof d&&"function"!=typeof d||"function"!=typeof d.then?p:await p),type:i.type,requestId:o});const v=await a();return v.error?t({payload:await r(c.payload,n(),e,v),error:v.error,type:c.type,requestId:o}):(t({payload:await r(u.payload,n(),e,v.response),type:u.type,requestId:o}),f&&f()),l&&l(),v}},40187:(e,t,n)=>{"use strict";n.d(t,{Z:()=>u});var r=n(13374),o=n(63804),a=n.n(o);function i(){return i=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i.apply(this,arguments)}const u=(0,r.Z)({Icon:function(e){return a().createElement("svg",i({width:"36",height:"36",viewBox:"0 0 36 36"},e),a().createElement("path",{d:"M14.825 31.685L8.437 36l.922-6.532C4.932 26.622 2 21.654 2 16 2 7.163 9.163 0 18 0s16 7.163 16 16-7.163 16-16 16c-1.087 0-2.149-.108-3.175-.315zM17.003 5a1 1 0 0 0-.999 1.049l.585 12a1 1 0 0 0 .999.951h.824a1 1 0 0 0 .999-.951l.585-12A1 1 0 0 0 18.997 5h-1.994zM18 26.5a2.5 2.5 0 1 0 0-5 2.5 2.5 0 0 0 0 5z",fill:"#FFF"}))},iconClassNames:["icon-bubble-info"]})},14911:(e,t,n)=>{"use strict";n.d(t,{PW:()=>a});var r="NOT_FOUND",o=function(e,t){return e===t};function a(e,t){var n,a,i="object"==typeof t?t:{equalityCheck:t},u=i.equalityCheck,c=void 0===u?o:u,s=i.maxSize,l=void 0===s?1:s,f=i.resultEqualityCheck,p=function(e){return function(t,n){if(null===t||null===n||t.length!==n.length)return!1;for(var r=t.length,o=0;o<r;o++)if(!e(t[o],n[o]))return!1;return!0}}(c),d=1===l?(n=p,{get:function(e){return a&&n(a.key,e)?a.value:r},put:function(e,t){a={key:e,value:t}},getEntries:function(){return a?[a]:[]},clear:function(){a=void 0}}):function(e,t){var n=[];function o(e){var o=n.findIndex((function(n){return t(e,n.key)}));if(o>-1){var a=n[o];return o>0&&(n.splice(o,1),n.unshift(a)),a.value}return r}return{get:o,put:function(t,a){o(t)===r&&(n.unshift({key:t,value:a}),n.length>e&&n.pop())},getEntries:function(){return n},clear:function(){n=[]}}}(l,p);function v(){var t=d.get(arguments);if(t===r){if(t=e.apply(null,arguments),f){var n=d.getEntries(),o=n.find((function(e){return f(e.value,t)}));o&&(t=o.value)}d.put(arguments,t)}return t}return v.clearCache=function(){return d.clear()},v}},12043:(e,t,n)=>{"use strict";function r(e){var t=Array.isArray(e[0])?e[0]:e;if(!t.every((function(e){return"function"==typeof e}))){var n=t.map((function(e){return"function"==typeof e?"function "+(e.name||"unnamed")+"()":typeof e})).join(", ");throw new Error("createSelector expects all input-selectors to be functions, but received the following types: ["+n+"]")}return t}function o(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),o=1;o<t;o++)n[o-1]=arguments[o];var a=function(){for(var t=arguments.length,o=new Array(t),a=0;a<t;a++)o[a]=arguments[a];var i,u=0,c={memoizeOptions:void 0},s=o.pop();if("object"==typeof s&&(c=s,s=o.pop()),"function"!=typeof s)throw new Error("createSelector expects an output function after the inputs, but received: ["+typeof s+"]");var l=c,f=l.memoizeOptions,p=void 0===f?n:f,d=Array.isArray(p)?p:[p],v=r(o),_=e.apply(void 0,[function(){return u++,s.apply(null,arguments)}].concat(d)),h=e((function(){for(var e=[],t=v.length,n=0;n<t;n++)e.push(v[n].apply(null,arguments));return i=_.apply(null,e)}));return Object.assign(h,{resultFunc:s,memoizedResultFunc:_,dependencies:v,lastResult:function(){return i},recomputations:function(){return u},resetRecomputations:function(){return u=0}}),h};return a}n.d(t,{P1:()=>a});var a=o(n(14911).PW)},23546:(e,t,n)=>{"use strict";n.a(e,(async e=>{n.d(t,{x:()=>_});var r=n(63804),o=n.n(r),a=n(96370),i=n(86704),u=n(51408),c=n(37077),s=n(93991),l=n(47681),f=n(26675),p=e([a]);a=(p.then?await p:p)[0];const{t:d}=i.I18n;function v({children:e}){const{env:t,language:n,locale:r,platform:i,featureToggles:p}=(0,l._)(),[v]=(0,f.J)("FSV_VLP_VOUCHER_TOGGLE","FSV_VLP_VOUCHER_TOGGLE_WEB"),_={fsvVLP:null==v?void 0:v.parameter,latamUIRevamp:"latam"};return o().createElement(a.VoucherCardEnvProvider,{env:t,language:n,locale:r,t:d,platform:i,featureToggles:p,useTrackClick:c.Z,useTrackImpression:s.Z,getVariateConfig:u.getVariateConfig,abTest:_},e)}const _=(0,r.memo)(v)}))},47681:(e,t,n)=>{"use strict";n.d(t,{_:()=>l,z:()=>f});var r=n(30143),o=n(95325),a=n(71574),i=n(63804),u=n(71437),c=n(63300),s=n(8041);function l(){return(0,i.useMemo)((()=>({env:(0,s.dU)(),language:(0,s.of)(),locale:(0,s.Kd)(),platform:"pc",featureToggles:{VOUCHER_DRAWER_TNC_OK_CTA:(0,u.isFeatureEnabled)(c.xC2),VOUCHER_SHOW_FREE_SHIPPING_MIN_SPEND_IN_VOUCHER_WALLET:(0,u.isFeatureEnabled)(c.inS),VOUCHER_SHOW_FREE_SHIPPING_MIN_SPEND_IN_VOUCHER_SELECTION_PAGE:(0,u.isFeatureEnabled)(c.xkh),SELLER_VOUCHER_DISPLAY_LIMITED_RIBBON:(0,u.isFeatureEnabled)(c.V6n),VOUCHER_TWO_LABEL_ROWS:(0,u.isFeatureEnabled)(c.QNI),VOUCHER_LANDING_PAGE_PC:(0,u.isFeatureEnabled)(c.v_0),VOUCHER_USE_ENCODED_URL:(0,u.isFeatureEnabled)(c.RRm),FSV_SHOW_LIMITED_REDEMPTION_FLAG:(0,u.isFeatureEnabled)(c.Kml),FSV_SHOW_PRODUCT_SCOPE:(0,u.isFeatureEnabled)(c.Xqm)}})),[])}function f({voucher:e,onClaim:t,onServerError:n,onClaimSuccess:u,onClaimFailure:c}){const s=(0,o.useDispatch)();return{claim:(0,i.useCallback)((()=>{s((0,r.Ek)({promotionid:e.promotionid,voucher_code:e.voucher_code||"",shopid:e.shop_id})).then((({error:r,response:o})=>{!function(){let n=a.eg.CLAIM_ERROR_OK,i=null;r||!o||o.error||!o.data?n=a.eg.CLAIM_ERROR_UNKNOWN:(n=o.data.invalid_message_code||n,i=o.data.error_config),null==t||t(e,n,i)}(),function(){if(!o||r)return void(null==n||n());const{data:t}=o;if(!t)return void(null==n||n());const{invalid_message_code:a}=t;a?null==c||c(e,a):null==u||u(e)}()}))}),[s,t,c,u,n,e])}}},17221:(e,t,n)=>{"use strict";n.a(e,(async e=>{n.d(t,{xm:()=>r.x,z7:()=>o.z,_4:()=>o._});var r=n(23546),o=n(47681),a=e([r]);r=(a.then?await a:a)[0]}))},63164:(e,t,n)=>{"use strict";n.microfeA(e,(function(){return Promise.all([n.microfeM(0),n.microfeM(1),n.microfeM(2),n.microfeM(3),n.microfeM(4)]).then((function(){e.exports=t,n.a(e,(async e=>{n.d(t,{Z:()=>I});var r=n(63804),o=n.n(r),a=n(96370),i=n(73587),u=n(71250),c=n(65626),s=n(86704),l=n(34881),f=n(95325),p=n(2608),d=n(13218),v=n(99045),_=n(63300),h=n(80733),m=n(87867),E=n(28567),g=n.n(E),y=n(84857),C=n(24656),O=e([d,a]);[d,a]=O.then?await O:O;const P={progress:v.Z.INIT},I=(0,y.compose)(p.Z,(0,c.u)(),d.O5,(0,s.withI18nCollections)([h.L]))((function(e){const{voucher:t,isShopeeMart:n,className:c,accountStatus:p,voucherLocation:v}=e,h=(0,f.useDispatch)(),{setError:E,setErrorConfig:y}=(0,r.useContext)(d.jm),O=(0,r.useCallback)((e=>{e.stopPropagation(),async function(){const e=await h((0,l.AU)({voucher_code:t.voucher_code||"",voucher_promotionid:t.voucher_promotionid||t.promotionid,promotion_signature:t.signature||""})),{data:n,error_msg:r}=e,o=n&&n.error_config;o?o.use_link?y(o):E(o.content||(0,s.t)("voucher_cust_err_msg_content")):r&&E(r||(0,s.t)("msg_voucher_server_error"))}()}),[h,t,E,y]),I=(0,f.useSelector)((e=>(0,i.Au)(e.featureToggles,_.v_0))),S=(0,m.oW)(),R=(0,f.useSelector)((e=>t&&t.voucher_code&&e.voucher.claimProgress[t.voucher_code]||P));return o().createElement(a.ProductDetailPageProductShopVoucher,{isLoggedIn:p===u.d.LOGGED_IN,className:g()(c,C.Z.voucher),voucher:t,isValid:!0,claimProgress:R.progress,enableEncodeUrl:S,useVLP:I,isShopeeMart:n,onClaim:O,voucherLocation:v})}))}))}))}))},13218:(e,t,n)=>{"use strict";n.a(e,(async e=>{n.d(t,{jm:()=>p,O5:()=>v});var r=n(63804),o=n.n(r),a=n(40187),i=n(44653),u=n(43605),c=n(31705),s=n(17221),l=e([s]);function f(){return f=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},f.apply(this,arguments)}s=(l.then?await l:l)[0];const p=o().createContext({setError:()=>{},setErrorConfig:()=>{}});function d({children:e}){const[t,n]=(0,r.useState)(""),[s,l]=(0,r.useState)();return o().createElement(p.Provider,{value:{setError:n,setErrorConfig:l}},o().createElement(i.i8,{isOpen:Boolean(s),errorConfig:s,onClose:()=>l()}),o().createElement(u.ZP,{toastDuration:2e3,showToast:Boolean(t),toastText:t,onToastDismiss:()=>n(""),classNames:c.Z.toastContent,toastIcon:o().createElement(a.Z,null),overlayClassname:c.Z.toast,zIndex:600}),e)}function v(e){return o().forwardRef(((t,n)=>o().createElement(d,null,o().createElement(s.xm,null,o().createElement(e,f({},t,{ref:n}))))))}p.Consumer}))},24656:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});const r={voucher:"Y56Uu-"}},31705:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});const r={toast:"vGoxCe",toastContent:"_9UwfvC",container:"xIT-CJ"}}}]);
//# sourceMappingURL=https://sourcemap.webfe.shopeemobile.com/pcmall-voucher/_/549.348eb408e46fd2dcaf49.js.map