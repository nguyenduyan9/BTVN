(self.mfeModules=self.mfeModules||[]).push(["",["Platform","React","ReactRedux","Redux","PlatformApi","FeatureToggles","WithInjectReducer","ReactRouter","ReactDom","ShopeeDefaultFooter","Experiments","ShopeeDefaultHeader","ReactHelmet","Account","NebulaCore"],(e,r,o,s,c,t,n,u,i,h,a,d,p,l,m)=>()=>{(self.wpJsonpPcmallPcpagevoucherdetail=self.wpJsonpPcmallPcpagevoucherdetail||[]).push([[556,951],{27107:(e,r,o)=>{"use strict";function s(e,r){return function(o=r,s){return s&&e.hasOwnProperty(s.type)?e[s.type](o,s):o}}o.d(r,{Z:()=>s})},76676:(e,r,o)=>{"use strict";o.d(r,{t:()=>_});var s=o(63804),c=o.n(s),t=o(27107),n=o(99045),u=o(98750),i=o(35540),h=o(71574),a=o(62258);function d(){return d=Object.assign?Object.assign.bind():function(e){for(var r=1;r<arguments.length;r++){var o=arguments[r];for(var s in o)Object.prototype.hasOwnProperty.call(o,s)&&(e[s]=o[s])}return e},d.apply(this,arguments)}const{SAVE_VOUCHER:p}=i,l=(0,t.Z)({[u.Au.REQUESTED]:(e,r)=>{const{shopId:o,itemId:s}=r,c=s?{[s]:{vouchers:e.shop&&e.shop[o]&&e.shop[o][s]&&e.shop[o][s].vouchers||[],error:-100}}:{};return d({},e,{shop:d({},e.shop,{[o]:d({},e.shop[o],!s&&{error:-100}||{},c)})})},[u.Au.SUCCESS]:(e,r)=>{const{data:o,shopId:s,itemId:c,priorityVoucherList:t}=r;return d({},e,{shop:d({},e.shop,!c&&{[s]:{error:0,vouchers:o&&o.voucher_list||[],priorityVoucherList:t}}||{},c&&e.shop&&{[s]:d({},e.shop[s],{[c]:{vouchers:o&&o.voucher_list||[],error:0}})})})},[u.Au.FAILED]:(e,r)=>{const{shopId:o,error:s,itemId:c}=r;return d({},e,{shop:d({},e.shop,!c&&{[o]:{error:s,vouchers:[]}}||{},{error:s},c&&e.shop&&{[o]:d({},e.shop[o],{[c]:{vouchers:[],error:s}})})})},[u.rQ.REQUESTED]:(e,r)=>{const o=r;return d({},e,{recommendedShopVouchers:d({},e.recommendedShopVouchers,{progress:n.Z.REQ}),shop:d({},e.shop,{[o.shopId]:{vouchers:[],error:-100}})})},[u.rQ.FAILED]:(e,r)=>{const o=r;return d({},e,{recommendedShopVouchers:d({},e.recommendedShopVouchers,{progress:n.Z.ERR,error:o.error,error_msg:o.error_msg}),shop:d({},e.shop,{[o.shopId]:d({},e.shop[o.shopId],{error:o.error})})})},[u.rQ.SUCCESS]:(e,r)=>{const{data:{shop_vouchers:o},shopId:s,isCheckout:c}=r;return d({},e,{recommendedShopVouchers:d({},e.recommendedShopVouchers,{[s]:(o||[]).filter((e=>{var r,o;return!c&&![h.i8.NOT_COMPLETE_TASK].includes(null!=(r=e.invalid_message_code)?r:-1/0)||!h.j4.includes(null!=(o=e.invalid_message_code)?o:-1/0)})),progress:n.Z.OK}),shop:d({},e.shop,{[s]:d({},e.shop[s],{error:0})})})},[p.FAILED]:(e,r)=>{const{payload:{error:o,error_msg:s,error_config:c,voucher_code:t}}=r;return d({},e,{claimProgress:d({},e.claimProgress,{[t]:{progress:o===h.o$?n.Z.OK:n.Z.ERR,error:o,error_msg:s,error_config:c}})})},[p.SUCCESS]:(e,r)=>{const o=r,s=o.payload.voucher&&o.payload.voucher.shop_id,{voucher_code:c,voucher_promotionid:t,voucher:u}=o.payload;let i=e.shop;const h=(0,a.hy)(e,c,t?String(t):null);if(s){const r=e.shop[s],c=(r&&r.vouchers||[]).map((e=>e.voucher_code===o.payload.voucher_code?d({},e,{is_claimed_before:!0}):e));i=d({},i,{[s]:d({},r,{vouchers:[...c]})})}return d({},e,{shop:d({},i),claimProgress:d({},e.claimProgress,{[o.payload.voucher_code]:{progress:n.Z.OK}}),voucherDetail:{[c||"0"]:{[t]:d({},h,{voucher_basic_info:h.voucher_basic_info||u?d({},h.voucher_basic_info,u):null,progress:n.Z.OK})}}})},[p.REQUESTED]:(e,r)=>{const o=r;return d({},e,{claimProgress:d({},e.claimProgress,{[o.payload.voucher_code]:{progress:n.Z.REQ}})})},[u.cI.REQUESTED]:(e,r)=>{const o=r;return d({},e,{claimProgress:d({},e.claimProgress,{[o.voucher_code]:{progress:n.Z.REQ}})})},[u.cI.SUCCESS]:(e,r)=>{const{voucher_code:o,invalid_message_code:s,shopid:c}=r,t=!s||s===h.eg.CLAIM_ERROR_EXIST,u=c;let i=e.shop;if(u){const r=e.shop[u],s=(r&&r.vouchers||[]).map((e=>e.voucher_code===o?d({},e,{is_claimed_before:t}):e));i=d({},i,{[u]:d({},r,{vouchers:[...s]})})}return d({},e,{shop:d({},i),claimProgress:d({},e.claimProgress,{[o]:{progress:t?n.Z.OK:n.Z.ERR,invalid_message_code:s}})})},[u.cI.FAILED]:(e,r)=>{const o=r,{error:s}=o;return d({},e,{claimProgress:d({},e.claimProgress,{[o.voucher_code]:{progress:s===h.o$?n.Z.OK:n.Z.ERR,error:s,error_msg:o.error_msg}})})},[u.XB.REQUESTED]:(e,r)=>{const o=r;return d({},e,{claimProgress:d({},e.claimProgress,{[o.voucher_code]:{progress:n.Z.REQ}})})},[u.XB.SUCCESS]:(e,r)=>{const o=r,s=o.shopid;let c=e.shop;if(o.voucher&&s){const r=e.shop[s],t=(r&&r.vouchers||[]).map((e=>e.voucher_code===o.voucher_code?d({},e,{is_claimed_before:!0}):e));c=d({},c,{[s]:d({},r,{vouchers:[...t]})})}return d({},e,{shop:d({},c),claimProgress:d({},e.claimProgress,{[o.voucher_code]:{progress:o.voucher?n.Z.OK:n.Z.ERR}})})},[u.XB.FAILED]:(e,r)=>{const{error:o,error_msg:s,error_config:c,voucher_code:t,invalid_message_code:u}=r;return d({},e,{claimProgress:d({},e.claimProgress,{[t]:{progress:o===h.o$?n.Z.OK:n.Z.ERR,error:o,error_msg:s,error_config:c,invalid_message_code:u}})})},[u.KW]:(e,r)=>{const{voucher:o}=r,{shop_id:s}=o;return s?d({},e,{recommendedShopVouchers:d({},e.recommendedShopVouchers,{[s]:[o,...e.recommendedShopVouchers[s].filter((e=>e.voucher_code!==o.voucher_code))]})}):e},[u.Ec]:(e,r)=>{const{voucher:o}=r,{shop_id:s}=o;return s?d({},e,{recommendedShopVouchers:d({},e.recommendedShopVouchers,{[s]:e.recommendedShopVouchers[s].filter((e=>e.voucher_code!==o.voucher_code))})}):e},[u.mk]:(e,r)=>{const{voucher:o}=r,{shop_id:s}=o;return s?d({},e,{recommendedShopVouchers:d({},e.recommendedShopVouchers,{[s]:e.recommendedShopVouchers[s].map((e=>e.voucher_code===o.voucher_code?o:e))})}):e},[u.Js]:(e,r)=>{const{voucher:{voucher_code:o}}=r;return o?d({},e,{claimProgress:d({},e.claimProgress,{[o]:{progress:n.Z.OK}})}):e},[u._U.SUCCESS]:(e,r)=>{const o={};return r.data.forEach((r=>{const s=e.shop[r.shopid];var c,t;o[r.shopid]={error:0,vouchers:(c=s&&s.vouchers,t=r.voucher_list,t.map((e=>d({},e,{is_claimed_before:c&&c.some((r=>r.voucher_promotionid===e.voucher_promotionid&&r.is_claimed_before))}))))}})),d({},e,{shop:d({},e.shop,o)})},[u.u7.REQUESTED]:(e,r)=>{const{promotionid:o,voucher_code:s}=r;return d({},e,{voucherDetail:{[s||"0"]:{[o]:{progress:n.Z.REQ}}}})},[u.u7.SUCCESS]:(e,r)=>{const{data:o,promotionid:s,voucher_code:c}=r;return d({},e,{voucherDetail:{[c||"0"]:d({},e.voucherDetail[c],{[s]:d({},o,{progress:n.Z.OK,error:void 0,error_msg:void 0})})}})},[u.u7.FAILED]:(e,r)=>{const{error:o,promotionid:s,voucher_code:c,error_msg:t}=r;return d({},e,{voucherDetail:{[c||"0"]:d({},e.voucherDetail[c],{[s]:{error:o,progress:n.Z.ERR,error_msg:t}})},error:o||-1})}},{shop:{},claimProgress:{},voucherDetail:{},recommendedShopVouchers:{}});var m=o(57762);const v=["injectAsyncReducer"];function _(e){function r(r){const{injectAsyncReducer:o}=r,s=function(e,r){if(null==e)return{};var o,s,c={},t=Object.keys(e);for(s=0;s<t.length;s++)o=t[s],r.indexOf(o)>=0||(c[o]=e[o]);return c}(r,v);return c().useEffect((()=>{o({voucher:l})}),[o]),c().createElement(e,s)}return r.displayName=`withVoucherReduxInjected(${function(e){return e.displayName||e.name||"Component"}(e)})`,(0,m.withInjectReducer)(r)}},62258:(e,r,o)=>{"use strict";function s(){return s=Object.assign?Object.assign.bind():function(e){for(var r=1;r<arguments.length;r++){var o=arguments[r];for(var s in o)Object.prototype.hasOwnProperty.call(o,s)&&(e[s]=o[s])}return e},s.apply(this,arguments)}function c(e,r){return e&&e.recommendedShopVouchers&&e.recommendedShopVouchers[r]||[]}function t(e){return Object.entries(e.claimProgress||[]).reduce(((e,[r,o])=>s({},e,{[r]:o.progress})),{})}function n(e){return Object.entries(e.claimProgress||[]).reduce(((e,[r,o])=>s({},e,{[r]:o.invalid_message_code})),{})}function u(e,r){if(!r)return 0;const o=e.claimProgress[r];return o?o.progress:0}function i(e,r,o){if(!o)return{};const s=e&&e.voucherDetail&&e.voucherDetail[r||"0"];return s&&s[o]||{}}o.d(r,{zq:()=>c,HL:()=>t,OX:()=>n,KT:()=>u,hy:()=>i})},92123:(e,r,o)=>{"use strict";o.microfeA(e,(function(){return Promise.all([o.microfeM(0),o.microfeM(1),o.microfeM(2),o.microfeM(3),o.microfeM(4)]).then((function(){e.exports=r,o.a(e,(async e=>{o.d(r,{Z:()=>f});var s=o(28567),c=o.n(s),t=o(63804),n=o.n(t),u=o(84857),i=o(86704),h=o(80733),a=o(15944),d=o(76676),p=o(51633),l=o(2608),m=o(63164),v=e([m]);m=(v.then?await v:v)[0];const{t:_,withI18nCollections:g}=i.I18n,f=(0,u.compose)(l.Z,d.t,g([h.L,h.ez]))((e=>{const{vouchers:r,isShopeeMart:o,targetType:s,targetData:t}=e;return r&&0!==r.length?n().createElement(a.ZP,{targetType:s,targetData:t},n().createElement("div",{className:c()("product-shop-vouchers",e.className)},n().createElement("div",{className:"product-shop-vouchers__header"},_("label_shop_voucher")),n().createElement("div",{className:"product-shop-vouchers__list",style:{maxHeight:"23.25rem"},tabIndex:-1},!!r&&r.slice(0,50).map(((e,r)=>n().createElement(m.Z,{className:p.Z.voucherCard,voucher:e,isShopeeMart:o,key:`product-detail-page-seller-voucher-${r}`,voucherLocation:r})))))):null}))}))}))}))},51633:(e,r,o)=>{"use strict";o.d(r,{Z:()=>s});const s={voucherCard:"nBBX45"}},96370:e=>{"use strict";var r;e.exports=(r="live",new Promise((function(e,o){"live"!=r&&"stable"!=r&&"liveish"!=r&&(r="live");var s,c,t,n="https://deo.shopeemobile.com/shopee/shopee-webfepromotion-"+r+"-sg/voucher-card@stable/"+(s="index.production",c="js",self.__ASSETS__&&self.__ASSETS__.VOUCHER_CARD_MANIFEST&&self.__ASSETS__.VOUCHER_CARD_MANIFEST[r]?[s,self.__ASSETS__.VOUCHER_CARD_MANIFEST[r],c].join("."):[s,c].join("."));(t=n,new Promise((function(e,r){var o=document.createElement("script");o.async=!1,o.defer=!0,o.crossOrigin="",o.src=t,o.onload=function(){e(window.VoucherCard)},o.onerror=r,document.body.appendChild(o)}))).then((function(r){e(r)}),o).catch((function(e){throw new Error("unable load voucher card"+e)}))})))},17:e=>{"use strict";e.exports=l},51408:e=>{"use strict";e.exports=a},71437:e=>{"use strict";e.exports=t},16161:r=>{"use strict";r.exports=e},86704:e=>{"use strict";e.exports=c},63804:e=>{"use strict";e.exports=r},67274:e=>{"use strict";e.exports=i},95325:e=>{"use strict";e.exports=o},56775:e=>{"use strict";e.exports=u},84857:e=>{"use strict";e.exports=s},57762:e=>{"use strict";e.exports=n}},function(r){"use strict";var o;o=r.x,r.x=()=>{Promise.resolve(r(92123)).then((r=>{e.setModule("pcmall-productshopvouchers",r.Z,{type:"slot",buildInformation:{updated:"2023-05-23T09:18:26.737Z",tag:"voucher-v1.5.0",branch:"heads/voucher-v1.5.0",lastCommit:"Merge branch '\\''staging'\\'' into '\\''release'\\''",lastCommitHash:"c3da68b4b1f2d94e1a620f32d8eb6650e5315835"},registerSentryDsn:!0,projectAndModuleName:"pcmall-voucher"}),o()}))}},[[92123,666,59,774,56,881,549]]])},2]),function(){if(window&&window.__DECKER_HOOK__){var e=window.__DECKER_HOOK__,r=function(){e.sendToDevtools("MFE_LOAD_SLOT",{slotName:"pcmall-productshopvouchers",updated:"2023-05-23T09:18:26.768Z",tag:"voucher-v1.5.0",branch:"heads/voucher-v1.5.0",lastCommit:"Merge branch '\\''staging'\\'' into '\\''release'\\''",lastCommitHash:"c3da68b4b1f2d94e1a620f32d8eb6650e5315835"})};e.on("MFE_RETRIEVE_SLOTS",r),r()}}();
//# sourceMappingURL=https://sourcemap.webfe.shopeemobile.com/pcmall-voucher/_/pcmall-productshopvouchers.db4b46dadc656d65165c.js.map